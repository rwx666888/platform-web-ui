<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>贺卡模块</title>
  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .container-190227-cj{
      padding-top: 15px;
    }
    .container-190227-cj .row{
      display: flex;
    }
    /* left_cont */
    .container-190227-cj .left_cont{
      flex: 1;
      padding: 0 15px;
    }
    .container-190227-cj .left_cont .info-title{
      color: #676a6c;
      padding-left: 5%;
      margin-bottom: 20px;
    }
    .container-190227-cj .left_cont .info-title>p{
      margin-bottom: 0;
    }
    .container-190227-cj .left_cont .info-title .desc{
      font-size: 12px;
      color: #999;
    }
    .container-190227-cj .left_cont .form-group{
      margin-bottom: 20px;
    }
    .container-190227-cj .left_cont .form-group .info{
      padding-top: 8px;
      font-size: 12px;
      color: #999;
      margin-bottom: 6px;
    }
    /* right_cont */
    .container-190227-cj .right_cont{
      flex-basis: 220px;
      margin-right: 30px;
    }
    .container-190227-cj .right_cont .pic-wrapper{
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      padding-bottom: 0;
      background-color: #eee;
    }
    .container-190227-cj .right_cont .pic-wrapper:first-child{
      margin-bottom: 20px;
    }
    .container-190227-cj .right_cont .pic-wrapper .pic-item{
      display: flex;
      flex-direction: column;
      width: 100%;
      min-height: 140px;
      background-color: #fff;
    }
    .container-190227-cj .right_cont .pic-wrapper .pic-item img{
      width: 100%;
    }
    .container-190227-cj .right_cont .pic-wrapper .pic-item .content{
      display: none;
      padding: 10px;
      line-height: 20px;
      font-size: 12px;
    }
    .container-190227-cj .right_cont .pic-wrapper .pic-item.card{
      min-height: 300px;
      padding: 10px;
    }
    .container-190227-cj .right_cont .pic-wrapper .pic-item.card .content{
      padding: 10px 0;
    }
    .container-190227-cj .right_cont .pic-wrapper .title{
      font-size: 12px;
      padding: 5px 0;
    }
  </style>
</head>

<body>
  <div class="container-fluid">
    <div class="row" style="min-height: 50px;">
      <div class="p-xs col-xs-12 text-center" id="demoaffix1" data-spy="affix" data-offset-top="50">
        <button class="btn btn-primary btn-sm" type="button" id="btn_save">保存</button>
        <button class="btn btn-success btn-sm" type="button" id="btn_closewin">关闭</button>
      </div>
    </div>
  </div>
  <!-- content -->
  <div class="container-fluid container-190227-cj">
    <div class="row">
      <!-- edit -->
      <div class="left_cont">
        <div class="info-title">
          <p class="title">设置生日员工推送</p>
          <p class="desc">支持输入变量词：#姓名#，#公司#，输入后将替换为生日员工所对应的信息</p>
        </div>
        <form id="js_subForm" class="form-horizontal">
          <div class="form-group">
            <label class="col-sm-2 control-label"><span class="text-danger">*</span>推送标题</label>
            <div class="col-sm-9">
              <input class="form-control input-sm" type="text" name="title" required>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label"><span class="text-danger">*</span>推送封面图</label>
            <div class="col-sm-9">
              <p class="info">请上传一张 1068 * 456 的图片</p>
              <img id="page_upload" width="70" height="40" class="js-dy-creation" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">封面摘要</label>
            <div class="col-sm-9">
              <textarea class="form-control input-sm" name="digest" id="digest" rows="8"></textarea>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label"><span class="text-danger">*</span>贺卡</label>
            <div class="col-sm-9">
              <p class="info">请上传一张 570 * 600 的图片</p>
              <img id="card_upload" width="70" height="40" class="js-dy-creation" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label"><span class="text-danger">*</span>祝福语</label>
            <div class="col-sm-9">
              <textarea class="form-control input-sm" name="bless" id="bless" rows="8" required></textarea>
            </div>
          </div>
        </form>
      </div>
      <!-- 预览 -->
      <div class="right_cont">
        <div class="pic-wrapper">
          <div id="js_picItem_digest" class="pic-item">
            <img class="js-pic-dom" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAABTCAIAAACteyS+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2ODU1Y2VkNC03M2E5LWVmNGEtOGJiMC0yODkwOGYwZWIyMjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUFEQUVDM0RFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUFEQUVDM0NFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODczQzAwNzdFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODczQzAwNzhFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz44NpmGAAAEC0lEQVR42uzd6VarMBQFYDildFLXvb7/K95qB+YQbjrYVosUSggHsvcvl4uoK/08zahuURQOgrQOoQsQSEIgCYEkBIEkBJIQSEIsiYcuQFSKwpGFdAqHiFwXkpCGyaWM4ixORZ7Lyyen3mQ+8xazqdvElIs1bmuLUBAlQZw6v7z+qja9Lmfz2RSSkApGxccuyrL84ZPLha88YcSNlGezj+swUgmjNIhSSELKcMRpkor6z+/DRIgckpCf72tBmDZttQsTSEK+RU3TZPORcZqpSV4BScitCfFcw+RRQ0iyK+Jm3UhvQ0iybpzUUUNIsitPboXUaDhOSWpQmT9bxsedCVFHDWmUjD624XobCmC6y3Q6ea6h70/sklQcGQkh1axVfYDK9CPzw75sc3/exK6adGF0Lk6yWAPT3XBnOfebtnpZPm5CI2OUiW9ugOk+q8XM8xq87ov51J96tkgqZQRMpVHvbn9el+rtqs7DM997W81rfdkRnCqpYHT9jSH3/a1u99kQNS/Z7uOqrVzXWc39l3pHSsYg6cgoyupsVgPTXVS/BVGaZuJWgeooVYpWC7/RksGwJdVnBEyV3Xg4hqty7CLynuqfAUtqygiYup0VWsUIA3BI0sMImCBJG6MLpsMKuAQmWyVpYXRKrjBtgMlKSRoZAZO9ks5XtPQxAiYbJdW/6QdMkFTF6LMzRsBki6QTo7RLRsA0fknGGF0xHZYG8IcSxiXJMKMzplxhCrhhkrL4twniVEDSMBjdYGJUmU6LqELIzS7ijInAqAyTZILpcLthd73awBkTgRFbTPL7sXTmmAiMqjHJnjCVMuKMiTgxcvgwumBa94GpghFbTMSJUciKUV+YHjLiiYnAiBWmmowYYiIw4oOpEaMLpoQHJgIjJpieYHTKJw9MBEYcMBXPMuKDqTdJhTMwRt0tDbRkxAQT9cVow2zCXz9CK6Y6F4gHgYn6YpTw3o80g0kjo94xERj1hUk7o34xERj1gunrdkMnB+sOmDIxWkkjY9QGk/ZLMhwwERgZxmSA0anHDWMiMDKJyRCjr34/TpDFSCSNntEV0y6s/pcgRhmdv+PpeIUYvCRLGJ0xiWNl+gWTeUaGMREYmcG0DWLzjExiIjAyg+llMSNy+/qpDGDqSpKdjCowTSb0/rYcMSYCI2BiKon5tSxg6uiwPIFR15gKjpj0n+fRKWmzB6MSTGs7MJFORgkY2VuZCIwMJLMAE4ERMGnBRK0ZxWDUBFM0VkzUmlEGIk0w5aWY/jLA1HIzh8CIAyaPAabjUeDctKQtGAFTe0mKUQRGwNRSEhgBkwZJYARMGiSBETBpkARGwKRBEhiZwLQbNqbHkrYBGBnBlOWfQ8ZEjxnFYGQo6ZAx/RdgAJe5QcJYNotCAAAAAElFTkSuQmCC">
            <img class="js-pic-img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAAA9CAIAAACfhUqUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2ODU1Y2VkNC03M2E5LWVmNGEtOGJiMC0yODkwOGYwZWIyMjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUFEQUVDNDFFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUFEQUVDNDBFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODczQzAwNzdFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODczQzAwNzhFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7LtWo0AAAA00lEQVR42uzbsQqDMBRAUfN0K0JRELr0/7+rS6GDix8QB8FFUNpCC+ac1S25vAjRlHOu4GthCVASSkJJoCSUhJJQEigJJaEkitbsP348R2vE6n7rzCScbigJJcGmlQglYSahJJQEb0v+CMBMQkkoCZSEklASSgIl8XMH30y+xskasagj+uvFTMLphpLwnvRpmJGs6Vml3c31LQBON5SEkkBJKAklUYoi7t2GrrXTZhJKQkmgJP7DvRtmEkpCSaAklISSUBIoCSWhJJQESkJJnMsswAAvhBWCbeilYwAAAABJRU5ErkJggg==">
            <div class="js-pic-cont content"></div>
          </div>
          <span class="title">推送封面</span>
        </div>
        <div class="pic-wrapper">
          <div id="js_picItem_bless" class="pic-item card">
            <img class="js-pic-dom" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAABTCAIAAACteyS+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2ODU1Y2VkNC03M2E5LWVmNGEtOGJiMC0yODkwOGYwZWIyMjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUFEQUVDM0RFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUFEQUVDM0NFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODczQzAwNzdFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODczQzAwNzhFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz44NpmGAAAEC0lEQVR42uzd6VarMBQFYDildFLXvb7/K95qB+YQbjrYVosUSggHsvcvl4uoK/08zahuURQOgrQOoQsQSEIgCYEkBIEkBJIQSEIsiYcuQFSKwpGFdAqHiFwXkpCGyaWM4ixORZ7Lyyen3mQ+8xazqdvElIs1bmuLUBAlQZw6v7z+qja9Lmfz2RSSkApGxccuyrL84ZPLha88YcSNlGezj+swUgmjNIhSSELKcMRpkor6z+/DRIgckpCf72tBmDZttQsTSEK+RU3TZPORcZqpSV4BScitCfFcw+RRQ0iyK+Jm3UhvQ0iybpzUUUNIsitPboXUaDhOSWpQmT9bxsedCVFHDWmUjD624XobCmC6y3Q6ea6h70/sklQcGQkh1axVfYDK9CPzw75sc3/exK6adGF0Lk6yWAPT3XBnOfebtnpZPm5CI2OUiW9ugOk+q8XM8xq87ov51J96tkgqZQRMpVHvbn9el+rtqs7DM997W81rfdkRnCqpYHT9jSH3/a1u99kQNS/Z7uOqrVzXWc39l3pHSsYg6cgoyupsVgPTXVS/BVGaZuJWgeooVYpWC7/RksGwJdVnBEyV3Xg4hqty7CLynuqfAUtqygiYup0VWsUIA3BI0sMImCBJG6MLpsMKuAQmWyVpYXRKrjBtgMlKSRoZAZO9ks5XtPQxAiYbJdW/6QdMkFTF6LMzRsBki6QTo7RLRsA0fknGGF0xHZYG8IcSxiXJMKMzplxhCrhhkrL4twniVEDSMBjdYGJUmU6LqELIzS7ijInAqAyTZILpcLthd73awBkTgRFbTPL7sXTmmAiMqjHJnjCVMuKMiTgxcvgwumBa94GpghFbTMSJUciKUV+YHjLiiYnAiBWmmowYYiIw4oOpEaMLpoQHJgIjJpieYHTKJw9MBEYcMBXPMuKDqTdJhTMwRt0tDbRkxAQT9cVow2zCXz9CK6Y6F4gHgYn6YpTw3o80g0kjo94xERj1hUk7o34xERj1gunrdkMnB+sOmDIxWkkjY9QGk/ZLMhwwERgZxmSA0anHDWMiMDKJyRCjr34/TpDFSCSNntEV0y6s/pcgRhmdv+PpeIUYvCRLGJ0xiWNl+gWTeUaGMREYmcG0DWLzjExiIjAyg+llMSNy+/qpDGDqSpKdjCowTSb0/rYcMSYCI2BiKon5tSxg6uiwPIFR15gKjpj0n+fRKWmzB6MSTGs7MJFORgkY2VuZCIwMJLMAE4ERMGnBRK0ZxWDUBFM0VkzUmlEGIk0w5aWY/jLA1HIzh8CIAyaPAabjUeDctKQtGAFTe0mKUQRGwNRSEhgBkwZJYARMGiSBETBpkARGwKRBEhiZwLQbNqbHkrYBGBnBlOWfQ8ZEjxnFYGQo6ZAx/RdgAJe5QcJYNotCAAAAAElFTkSuQmCC">
            <img class="js-pic-img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAAA9CAIAAACfhUqUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2ODU1Y2VkNC03M2E5LWVmNGEtOGJiMC0yODkwOGYwZWIyMjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUFEQUVDNDFFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUFEQUVDNDBFRUYwMTFFOEI1N0JBMjkzQkJEQjMwMkMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODczQzAwNzdFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODczQzAwNzhFODA4MTFFOEJFNjFENTQwQzlFQ0ExRTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7LtWo0AAAA00lEQVR42uzbsQqDMBRAUfN0K0JRELr0/7+rS6GDix8QB8FFUNpCC+ac1S25vAjRlHOu4GthCVASSkJJoCSUhJJQEigJJaEkitbsP348R2vE6n7rzCScbigJJcGmlQglYSahJJQEb0v+CMBMQkkoCZSEklASSgIl8XMH30y+xskasagj+uvFTMLphpLwnvRpmJGs6Vml3c31LQBON5SEkkBJKAklUYoi7t2GrrXTZhJKQkmgJP7DvRtmEkpCSaAklISSUBIoCSWhJJQESkJJnMsswAAvhBWCbeilYwAAAABJRU5ErkJggg==">
            <div class="js-pic-cont content"></div>
          </div>
          <span class="title">贺卡</span>
        </div>
      </div>
    </div>
  </div>
  <script src="../js/jquery-2.1.1.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../i18n/zh-CN.js"></script>
  <script src="../js/plugins/layer/layer.js"></script>
  <script src="../js/plugins/validate/jquery.validate.custom.min.js"></script>
  <script src="../js/subindex.js"></script>
  <script>
    $(function () {
      // 复写上传组件
      function cusFileUpload(id, hide_id, option) {
        var $obj = $('#' + id);
        if (!$obj.length) {
          return false;
        }
        if ($obj.data('cusFileUpload') == 'inited') { //防止重复初始化
          return false;
        }
        var btn_img = $obj.is('button') ? 'btn' : $obj.is('img') ? 'img' : false; // dom对象判断
        var _t_H = 0;
        var f_path = ''; // 回显路径

        option = option || {};
        if (typeof hide_id == 'object') {
          option = hide_id
        }

        // dom 动态构造
        if ($obj.hasClass('js-dy-creation')) {
          var t_id = $obj.attr('id');
          var temp = $('<div class="js-temp-html"></div>'); // 替换用的占位符
          $obj.before(temp);
          if (btn_img == 'btn') {
            $obj.addClass('js-judge-dom');
            if ($obj.data('fpath')) {
              f_path = $obj.data('fpath');
              option.isname = true;
            }
            var obj_html = '<span class="js-replace-dom"></span>';
          } else if (btn_img == 'img') {
            _t_H = $obj.attr('height');
            var default_src =
              "data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMvaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhERUVCNjBFMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhERUVCNjBEMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2NEM3RjlCMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ2NEM3RjlDMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgICAgICAgICAgMCAgIDBAMCAgMEBQQEBAQEBQYFBQUFBQUGBgcHCAcHBgkJCgoJCQwMDAwMDAwMDAwMDAwMDAEDAwMFBAUJBgYJDQsJCw0PDg4ODg8PDAwMDAwPDwwMDAwMDA8MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAKABGAwERAAIRAQMRAf/EAHAAAAEEAgMAAAAAAAAAAAAAAAAFBgcIAgMBBAkBAQAAAAAAAAAAAAAAAAAAAAAQAAIBBAEDAgQEBgMAAAAAAAECAwARBAUGITESQWFRcRMHIkJiMzJy0xSkFVUWFxEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9FKAoNbTRI6xvKiyN1WMsAx+Q70GygKAoCgKAoCg7urwG2+21OnjlMD7XKTHGQACUUgs7C9xcIrW97UFtMPhvF8DX/6yHR4b4jL4zLNEsrS3Fi0juCzE+pJoK28647BxjkcuBgkjXZcCZeDCzFmiDMyPFc9Sqlbrf0NvSgaFAe1AUBQFAUGyKafGmx8vElMGXhypPiTgX8JIyGU29R0sR6jpQTxh/ejXHCDbDSZibNVs0OMY3hkb1KO7qQP5gD86CGd7vM7km3ytzsFWKbICRQYsZLJBBHfwjDEDyN2JJt1J+FqBHYsAAqNNI7LHFCnV5JHIVEUepZiAPegmXdfbKXX8HxMrHT+45Lqw2Zt/pC5yUcXmgWwuREP2/j42/MaCG1ZXVXQh0dQysOoIIuCPnQc0BQFAUCpptJtOQ5x1unxhk5Kx/VnZ28IoY+tmkcA+PkRZRa5PsCQCY6yxSzY2RC+NlYshiysWUeMkUi91Yeh7exHUdKCVvtRxc7PaPyTMjvr9M7RaxW7S5lrPJ7iEHxH6ifVaCyPf5UFS+f8AF/8Aq2/kGNH4abcmTJ1lh+GOS/lNj+3iT5L+k2H8NAy6AoCgzijE00ML5CYaTOEkzZFaRIVPeRkS7Nb4Dufh3oLFcZ5J9t+K6xNbrdsTc/Uy8uTGyDLkSkWaSVhELk+g7AWAAAoGrzyfgfK1TO13IU1e+jCxHOOJktHLBf8AEsqCL8RUElD3B6diRQPnUc1+3uj1mFqcDbGLDwIlihU4+SSQvdmP0urMepPqaBS/9K4T/wA1/jZP9Kga/MeTcE5VosvWPuxFlC0+tyji5J+jkx9Y3/a7flYeqkigrshZkRnX6bsoLx3vY+ouO9BnQf/Z";
            if ($obj.attr('src') && $obj.attr('src') != default_src) {
              f_path = $obj.attr('src');
            } else {
              $obj.attr('src', default_src);
            }

            var obj_html = '<div class="js-judge-dom show-mask">' +
              '<span class="js-replace-dom"></span>' +
              '<div class="cus-img-mask" style="line-height: ' + _t_H +
              'px;"><span class="glyphicon glyphicon-open"></span></div>' +
              '</div>';
          }
          var inp_h_id = (typeof hide_id != 'object' && hide_id) || id + '_hide';
          var $rep_html = $('<div id="' + ('js_is' + btn_img + '_' + t_id) + '" class="cus-single-upload">' +
            '<div class="main-area ' + ('is-' + btn_img) + '">' +
            '<input id="' + inp_h_id + '" name="' + inp_h_id + '" ' + (option.required == true ? 'required' :
              '') + ' class="hide-inp-validate" value="' + f_path + '" type="text"/>' +
            '<input class="js-inp-files hidden" type="file"/>' +
            obj_html +
            '</div>' +
            '<span class="file-name"></span>' +
            '</div>');

          $rep_html.find('.js-replace-dom').replaceWith($obj);
          temp.replaceWith($rep_html); // 注意

          // 回显时 btn 显示名称
          if (btn_img == 'btn' && f_path && option.isname) {
            var f_name = '';
            if (/targetName/.test(f_path)) {
              f_name = f_path.split('targetName=')[f_path.split('targetName=').length - 1];
            } else {
              f_name = f_path.split('/')[f_path.split('/').length - 1];
            }
            $rep_html.find('.file-name').attr('title', f_name).html('<a href="' + f_path + '">' + f_name + '</a>');
          }
          // 初始化完成钩子
        } else {
          console.error('dom结构错误，缺少 js-dy-creation 的class。');
          return false;
        }

        $obj.data('cusFileUpload', 'inited'); //添加初始化锁
        var option_ = $.extend({
          apitype: 'H5',
          serve_url: COM_DEFAULT._fileServeOpt.fileUploadUrl, // 接口
          serve_name: 'upload', // 对应字段
          isname: false, // 文件名显示
          uptype: '',
          filetype: [], // 格式类型
          filesize: ((btn_img == 'btn' ? COM_DEFAULT._fileServeOpt.defaultFileSize : COM_DEFAULT._fileServeOpt
            .imgFileSize) || 5 * 1024), // 文件大小,单位：KB
        }, option);

        // 类型判断
        if (!option_.filetype.length) {
          option_.filetype = btn_img == 'btn' ?
            COM_DEFAULT._fileServeOpt.fileType :
            btn_img == 'img' ? COM_DEFAULT._fileServeOpt.imgType : [];
        }

        var $main_div = $rep_html.find('.main-area'),
          $judgeDom = $rep_html.find('.js-judge-dom');

        // createObjectURL 资源链接
        function getObjectURL(file) {
          var url = null;
          if (window.createObjectURL != undefined) { // basic
            url = window.createObjectURL(file);
          } else if (window.URL != undefined) { // mozilla(firefox)
            url = window.URL.createObjectURL(file);
          } else if (window.webkitURL != undefined) { // webkit or chrome
            url = window.webkitURL.createObjectURL(file);
          }
          return url;
        }

        $rep_html.off("click.jude-dom change.inp-files").on('click.jude-dom', '.js-judge-dom', function () {
          // 基础配置判断
          if (!option_.serve_url || !option_.serve_name) {
            COM_TOOLS.alert2(TEDU_MESSAGE.get('platform.plugin.com_msg.opt_lack'));
            return false;
          }
          // 清除提示标
          if ($main_div.find('.tip-icon').length) {
            $main_div.find('.tip-icon').remove();
          }
          return $rep_html.find('.js-inp-files').click();
        }).on('change.inp-files', '.js-inp-files', function () {
          var t_files = this.files[0];
          this.value = ''; // 清除

          if (t_files) {
            // 文件格式、大小
            var filesize = option_.filesize * 1024, // KB
              filetype = t_files.name.split('.')[(t_files.name.split('.').length - 1)];
            // 提示 icon
            var $i_obj = $('<i class="cus-progress-bar"></i>'),
              $icon_success = $(
                '<span class="tip-icon success glyphicon glyphicon glyphicon-ok-circle"></span>'),
              $icon_error = $('<span class="tip-icon error glyphicon glyphicon-remove-circle"></span>');
            // 是否显示文件名
            option_.isname && $rep_html.find('.file-name').html('').html(t_files.name);

            // 错误判断
            if (filesize < t_files.size) {
              COM_TOOLS.alert2(TEDU_MESSAGE.get('platform.plugin.com_msg.size_exceed', option_.filesize));
              return false;
            } else if (!new RegExp('^(' + option_.filetype.join('|') + ')$', 'i').test(filetype)) {
              COM_TOOLS.alert2(TEDU_MESSAGE.get('platform.plugin.com_msg.type_err', option_.filetype.join('|')));
              return false;
            }

            var f_formData = new FormData();
            f_formData.append(option_.serve_name, t_files);
            // 上传的对应类型
            if (!$.isEmptyObject(option_.uptype)) {
              for (var k in option_.uptype) {
                f_formData.append(k, option_.uptype[k]);
              }
            }
            // 回显图片
            var temp_src = '';
            if (btn_img == 'img') {
              temp_src = getObjectURL(t_files);
              $judgeDom.find('img').attr('src', temp_src);
            }
            // 改变的钩子, temp_src 只的图片模式时有
            if (typeof option_.changeShowCallback == 'function') {
              option_.changeShowCallback(t_files, temp_src)
            }

            $.ajax({
              type: "post",
              dataType: "json",
              url: option_.serve_url,
              data: f_formData,
              processData: false,
              contentType: false,
              cache: false,
              xhr: function () {
                var xhr = $.ajaxSettings.xhr(); // 获取 JQ 中的 xhr 实例
                xhr.upload.onprogress = function (event) {
                  if (event.lengthComputable) {
                    var percent = Math.floor(event.loaded / event.total * 100);

                    if (btn_img == 'btn') {
                      if (!$judgeDom.find('.cus-progress-bar').length) {
                        COM_TOOLS.loadingBtn.open($judgeDom);
                        $judgeDom.append($i_obj);
                      }
                      $i_obj.css('width', percent + '%');
                    } else if (btn_img == 'img') {
                      if (!$judgeDom.parent().find('.cus-progress-bar').length) {
                        $i_obj.css('line-height', _t_H + 'px');
                        $judgeDom.parent().append($i_obj);
                      }
                      $i_obj.text(percent + '%').css('width', percent + '%');
                    }
                  }
                }
                return xhr; // 需要返回 xhr 对象
              },
              complete: function () {
                btn_img == 'btn' && COM_TOOLS.loadingBtn.close($judgeDom);
                $i_obj.remove();
                // 成功的钩子
                if (typeof option_.completeCallback == 'function') {
                  option_.completeCallback(res, $rep_html)
                }
              },
              success: function (res) {
                // res = {state: 1, patch: _url_} res = 'ERROR'
                if (res.state == 1) {
                  COM_TOOLS.alert(LOCAL_MESSAGE_DATA['platform.plugin.com_msg.up_success']);
                  $main_div.append($icon_success);
                  $rep_html.find('.hide-inp-validate').val(res.path);
                  if (option_.required) {
                    $.validator && $rep_html.find('.hide-inp-validate').trigger('focusout.validate').trigger(
                      'click.validate');
                  }
                } else if (res.state == 0) {
                  COM_TOOLS.alert(LOCAL_MESSAGE_DATA['platform.plugin.com_msg.up_error']);
                  $main_div.append($icon_error);
                }
                // 成功的钩子
                if (typeof option_.successCallback == 'function') {
                  option_.successCallback(res, $rep_html)
                }
              },
              error: function () {
                COM_TOOLS.alert(LOCAL_MESSAGE_DATA['platform.plugin.com_msg.up_error']);
                $main_div.append($icon_error);
                // 错误的钩子
                if (typeof option_.errorCallback == 'function') {
                  option_.errorCallback()
                }
              }
            });
          }
        });
      }
      // 上传组件初始化
      cusFileUpload('page_upload', 'page', {
        serve_url: '/abc',
        required: true,
        changeShowCallback: function (file_obj, imgSrc) {
          $('#js_picItem_digest').find('.js-pic-dom').attr('src', imgSrc);
        }
      });
      cusFileUpload('card_upload', 'card', {
        serve_url: '/abc',
        required: true,
        changeShowCallback: function (file_obj, imgSrc) {
          $('#js_picItem_bless').find('.js-pic-dom').attr('src', imgSrc);
        }
      });
      // 表单提交
      $('#js_subForm').validate({
        submitHandler: function (form) { //验证通过
          console.log('-submit-')
        }
      });
      // event bind
      $(document).on('click.save', '#btn_save', function () {
        $('#js_subForm').submit()
      }).on('input.txt', '#digest, #bless', function () {
        var t_ = $(this);
        var tar_ = $('#js_picItem_' + t_[0].name)
        var cont = $.trim(t_.val())
        if (cont.length > 0) {
          if (!tar_.data('edit')) {
            tar_.data('edit', true)
            tar_.find('.js-pic-img').hide()
              .end().find('.js-pic-cont').show()
          }
          tar_.find('.js-pic-cont').text(cont)
        } else {
          if (tar_.data('edit')) {
            tar_.data('edit', false)
            tar_.find('.js-pic-img').show()
              .end().find('.js-pic-cont').hide()
            tar_.find('.js-pic-cont').text('')
          }
        }
      })
    })
  </script>
  </script>
</body>

</html>