<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Test</title>
		<link href="../css/bootstrap.min.css" rel="stylesheet">
		
		<link href="../css/plugins/dataTables/datatables.min.css" rel="stylesheet">
		
	    <!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/dt-1.10.16/fc-3.2.3/rg-1.0.2/rr-1.2.3/sl-1.2.3/datatables.min.css"/>-->
    	<link rel="stylesheet" href="../css/style.css">
	</head> 
	<body>
		<div class="container" style="padding-top: 50px;">
		    <table id="t_table_01" class="table table-striped table-bordered" width="100%">
                <thead>
                    <tr>
                        <th style="vertical-align: middle; word-wrap: break-word;" rowspan="2">区域</th>
                        <th style="vertical-align: middle; word-wrap: break-word;" rowspan="2">城市</th>
                        <th style="vertical-align: middle; word-wrap: break-word;" rowspan="2">中心</th>
                        <th class="text-center" colspan="2">标题1</th>
                        <th class="text-center" colspan="2">标题2</th>
                        <th class="text-center" colspan="2">标题3</th>
                    </tr>
                    <tr>
                        <th class="text-center">内容1</th>
                        <th class="text-center">内容2</th>
                        <th class="text-center">内容3</th>
                        <th class="text-center">内容4</th>
                        <th class="text-center">内容5</th>
                        <th class="text-center">内容6</th>
                    </tr>
                </thead>
                <!--<tbody></tbody>-->
                <tfoot style="color: #f44336;">
                    <tr>
                        <th colspan="3" class="text-center">合计</th>
                        <th class="text-right">0</th>
                        <th class="text-right">0</th>
                        <th class="text-right">0</th>
                        <th class="text-right">0</th>
                        <th class="text-right">0</th>
                        <th class="text-right">0</th>
                    </tr>
                    <tr class="js-show-sum">
                        <th colspan="3" class="text-center">选中合计</th>
                        <th class="text-right js-data1">0</th>
                        <th class="text-right js-data2">0</th>
                        <th class="text-right js-data3">0</th>
                        <th class="text-right js-data4">0</th>
                        <th class="text-right js-data5">0</th>
                        <th class="text-right js-data6">0</th>
                    </tr>
                </tfoot>
            </table>
		</div>
		
	<script src="../js/jquery-2.1.1.js" type="text/javascript"></script>
	<script src="../js/bootstrap.min.js" type="text/javascript"></script>
	
	<!--<script src="../js/plugins/datatables/datatables.min.js"></script>-->
	<script type="text/javascript" src="https://cdn.datatables.net/v/bs/dt-1.10.16/fc-3.2.3/rg-1.0.2/rr-1.2.3/sl-1.2.3/datatables.min.js"></script>
	
	<script src="../i18n/zh-CN.js"></script>
	<script src="../js/subindex.js" type="text/javascript"></script>
	
	<script src="../js/jquery.mockjax.min.js"></script>
	<script type="text/javascript">
	    var sData = {
    	    "draw": 1,
            "recordsTotal": 6,
            "recordsFiltered": 6,
    	    "data": [{
                "area": "区域1",
                "ctiy": "城市1",
                "center": "中心1",
                "data1": "10",
                "data2": "0",
                "data3": "10",
                "data4": "0",
                "data5": "10",
                "data6": "10",
            },
            {
                "area": "区域2",
                "ctiy": "城市2",
                "center": "中心2",
                "data1": "0",
                "data2": "20",
                "data3": "0",
                "data4": "0",
                "data5": "0",
                "data6": "10",
            },
            {
                "area": "区域3",
                "ctiy": "城市3",
                "center": "中心3",
                "data1": "10",
                "data2": "0",
                "data3": "0",
                "data4": "10",
                "data5": "10",
                "data6": "10",
            },/*{
                "area": "区域4",
                "ctiy": "城市4",
                "center": "中心4",
                "data1": "10",
                "data2": "0",
                "data3": "0",
                "data4": "10",
                "data5": "10",
                "data6": "10",
            },{
                "area": "区域5",
                "ctiy": "城市5",
                "center": "中心5",
                "data1": "1",
                "data2": "0",
                "data3": "0",
                "data4": "10",
                "data5": "10",
                "data6": "10",
            },{
                "area": "区域6",
                "ctiy": "城市6",
                "center": "中心6",
                "data1": "0",
                "data2": "0",
                "data3": "0",
                "data4": "10",
                "data5": "10",
                "data6": "10",
            }*/]
	    };
	    
	    $.mockjax({
            url: "/dt/api",
            dataType: "json",
            response: function(settings) {
                sData['draw'] = settings.data['draw'];
                this.responseText = sData;
            }
        });
	    
	    $(function(){
	        var searchParemOBj_ = {};
            var DT_ = COM_TOOLS.DT_init('t_table_01', [{
                    "data": "area",
                    "className": "text-center"
                }, {
                    "data": "ctiy",
                    "className": "text-center"
                }, {
                    "data": "center",
                    "className": "text-center"
                }, {
                    "data": "data1",
                    "className": "text-right"
                }, {
                    "data": "data2",
                    "className": "text-right"
                }, {
                    "data": "data3",
                    "className": "text-right"
                }, {
                    "data": "data4",
                    "className": "text-right"
                }, {
                    "data": "data5",
                    "className": "text-right"
                }, {
                    "data": "data6",
                    "className": "text-right"
                }],
                '/dt/api',
                'get',
                searchParemOBj_,
                {
                    jsInitComplete: function(trdata, jqdom){
                        //COM_TOOLS.DT_getColumnSum(this, [3,4,5,6,7,8], true);
                    },
                    other: {
                        //autoWidth: false,
                        scrollX: true,
                        scrollY: '100px',
                        scrollCollapse: true,
                        fixedColumns: {
                            leftColumns: 3,
                        }
                    }
                }
            );
            // select.dt deselect.dt select组件API
            DT_.table.on('select.dt deselect.dt', function(){
                var checkData = DT_.getSelectRowsData();
                console.log(checkData);
                
                console.log(DT_.table.table().footer())
                
                //backfillsum('.js-show-sum', ['data1', 'data2', 'data3', 'data4', 'data5', 'data6'], checkData);
            });
            
            window.TABLE= DT_.table;
            
            function backfillsum(selector, arr, data){
                if($.type(arr) == 'array'){
                    var $obj = $(selector);
                    for(var i = 0, len = arr.length; i < len; i++){
                        var sum = 0;
                        $.each(data, function(i1, n){
                            if(n[arr[i]]){
                                sum += Number(n[arr[i]]);
                            }
                        });
                        $obj.find('.js-'+ arr[i]).text(sum);
                        console.log(sum);
                    }
                }
            }
	    });
	</script>
	</body>
</html>
