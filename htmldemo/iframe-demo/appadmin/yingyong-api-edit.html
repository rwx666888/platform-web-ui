<!doctype html>
<html>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>编辑注册接口</title>
    <link href="../../../css/plugins/iCheck/custom.css" rel="stylesheet">

    <link href="../../../css/bootstrap.min.css" rel="stylesheet">
    <!--<link href="../font-awesome/css/font-awesome.css" rel="stylesheet">-->
    <link href="../../../css/plugins/jsTree/style.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/iconfont.css" type="text/css" />
    <link href="../../../css/plugins/customScrollbar/jquery.mCustomScrollbar.min.css" rel="stylesheet">
    <link href="../../../css/animate.css" rel="stylesheet">
    <link href="../../../css/style.css" rel="stylesheet">
    <style>
        .md-2018113001-xxw .cus-item {
            background: #F9F9F9;
            padding: 5px 15px;
        }
        .md-2018113001-xxw .cus-item+.cus-item {
            margin-top: 6px;
        }
        .md-2018113001-xxw .del-btn-xxw {
            font-size: 16px;
            display: inline-block;
            vertical-align: middle;
            cursor: pointer;
            margin-left: 5px;
        }
        .md-2018113001-xxw .del-btn-xxw:hover {
            color: red;
            background: #EEEEEE;
        }
        .md-2018113001-xxw label {
            padding-top: 0 !important;
            margin-right: 5px;
        }
        .md-2018113001-xxw input.form-control {
            margin-right: 60px;
            width: 200px;
        }
        .md-2018113001-xxw .border-class {
            border: 1px solid #ddd;
            padding: 10px 10px;
        }
        .md-2018113001-xxw .icheck-boxx {
            cursor: pointer;
        }
    </style>

    <body>
        <div class="container-fluid">
            <div class="row" style="min-height: 50px;">
                <div class="p-sm col-xs-12 text-center affix-top" style="padding: 10px;" id="demoaffix1" data-spy="affix" data-offset-top="50">

                    <button id="save_btn_form" class="btn btn-primary btn-sm" type="button" onclick="saveService()">保存</button>
                    <button class="btn btn-danger btn-sm" type="button" id="js_delete_service">删除</button>

                </div>
            </div>
            <div class="row m-t-md">
                <div class="col-sm-12">
                    <form id="form_id" class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-2 control-label"><span class="text-danger">*</span>接口名称：</label>
                            <div class="col-sm-9">
                                <input type="hidden" name="id" id="serviceId" value="A1108542733557379072">
                                <input class="form-control input-sm " readonly type="text" name="name" required value="全量获取岗位数据">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2  control-label"><span class="text-danger">*</span>接口服务地址：</label>
                            <div class="col-sm-9 ">
                                <input class="form-control input-sm " readonly type="text" name="url" required placeholder="格式：/xxx/zzz（以“/”开头，不包含项目名称）" value="/rest-api/tmp/position/findAllPositions">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label"><span class="text-danger">*</span>接口调用频次：</label>
                            <div class="col-sm-2" style="padding-right: 5px">
                                <input class="form-control input-sm " type="text" name="useFrequency" required value="-1">
                            </div>
                            <div class="col-sm-2 ">
                                <select style="padding: 6px 1px;" class="form-control input-sm" type="text" required name="useUnit">

                                    <option value="0" selected="selected">次/天</option>
                                    <option value="1">次/小时</option>

                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">接口状态：</label>
                            <div class="col-sm-3">
                                <div class="switch-on-off switch-tigger-name visible-md-block" style="margin: 2.5px 15px 0 0;">

                                    <input type="checkbox" id="switch-checkbox" checked>

                                    <label class="switch-box" for="switch-checkbox">
                                <div class="track">
                                    <div class="knob"></div>
                                </div>
                            </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2  control-label">接口返回字段<a class="tedufont tedu-icon133 cushelpbtn js-helpmsg" data-helpmsg="com.zz.label.returndata"></a>：</label>
                            <div class="col-sm-10">
                                <div class="form-group form-inline md-2018113001-xxw">
                                    <div class="col-sm-12">
                                        <div class="inline" id="js-addlist-boxx"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-2"></div>
                            <div class="col-sm-10 md-2018113001-xxw ">

                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">接口说明文档：</label>
                            <div class="col-sm-9">
                                <textarea class="form-control" id="js_remarks" name="remarks"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <script src="../../../js/jquery-2.1.1.js"></script>
        <script src="../../../js/bootstrap.min.js"></script>

        <script src="../../../i18n/zh-CN.js" type="text/javascript"></script>

        <script src="../../../js/plugins/validate/jquery.validate.custom.min.js"></script>

        <script src="../../../js/plugins/jsTree/jstree.min.js"></script>
        <script src="../../../js/plugins/customScrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
        <!-- Custom and plugin javascript -->
        <script src="../../../js/plugins/layer/layer.js"></script>
        <script src="../../../i18n/zh-CN.js"></script>
        <script src="../../../js/plugins/iCheck/icheck.min.js"></script>
        <script src="../../../js/plugins/ckeditor/ckeditor.js"></script>

        <script src="../../../js/subindex.js"></script>

        <script>
            $(function () {
                var _CKE = COM_TOOLS.docEditor('js_remarks');

                $('#add_code_str').click(function () {
                    var t = COM_TOOLS.get_UID('a');
                    var flag = true;
                    $('.md-2018113001-xxw').find('.js-inputx').each(function () {
                        if (!$('#form_id').validate().element(this)) {
                            flag = false;
                            return false;
                        }
                    });
                    if (flag) {
                        $('.js-addlist-boxx').append('<div class="form-group">' +
                            '<label class=" control-label">字段标记</label>' +
                            ' <input name="name1' + t + '"  ck-numorletteroruline="true" required class="form-control input-sm js-inputx" type="text">' +
                            ' <label class="control-label">字段名称</label>' +
                            ' <input name="name2' + t + '" required class="form-control input-sm js-inputx" type="text">' +
                            ' <label class="icheck-boxx"><input class="i-checks" type="checkbox">必须包含</label>' +
                            ' <span class="js-del-btnx del-btn-xxw text-danger"><i class="glyphicon glyphicon-trash"></i></span>' +
                            '</div>');
                        $('.i-checks').iCheck({
                            checkboxClass: 'icheckbox_square-green',
                            radioClass: 'iradio_square-green',
                        });
                        addborderFun();
                    }
                    return false;
                });
                $('.md-2018113001-xxw').on('click', '.js-del-btnx', function () {
                    $(this).closest('.form-group').remove();
                    addborderFun()
                });

                function addborderFun() {
                    var $b = $('.js-addlist-boxx');
                    if ($('.js-addlist-boxx .form-group').length > 0) {
                        if (!$b.hasClass('border-class')) {
                            $b.addClass('border-class')
                        }
                    } else {
                        $b.removeClass('border-class')
                    }
                }
                addborderFun()
                $('#form_id').validate();

                loadParams();

                /**
                 * 加载返回参数配置
                 **/
                function loadParams() {
                    var params = [{
                        "select": "false",
                        "name": "首字母缩写",
                        "tag": "acronym",
                        "used": "false"
                    }, {
                        "select": "false",
                        "readonly": "on",
                        "name": "创建人",
                        "tag": "createId",
                        "used": "false"
                    }, {
                        "select": "false",
                        "readonly": "on",
                        "name": "创建时间",
                        "tag": "createTime",
                        "used": "false"
                    }, {
                        "select": "false",
                        "name": "拼音",
                        "tag": "fullPinyin",
                        "used": "false"
                    }, {
                        "select": "false",
                        "readonly": "on",
                        "name": "主键",
                        "tag": "id",
                        "used": "false"
                    }, {
                        "select": "false",
                        "name": "是否内部组织",
                        "tag": "isInner",
                        "used": "false"
                    }, {
                        "select": "false",
                        "name": "是否外部组织",
                        "tag": "isOuter",
                        "used": "false"
                    }, {
                        "select": "false",
                        "readonly": "on",
                        "name": "名称",
                        "tag": "name",
                        "used": "false"
                    }];

                    if (params == "") {
                        return false;
                    }
                    for (var i = 0; i < params.length; i++) {
                        var t = COM_TOOLS.get_UID('a');
                        var $readonly = params[i].readonly == 'on' ? 'disabled checked' : '';
                        var $checked = params[i].select == 'true' ? 'checked' : '';
                        $('#js-addlist-boxx').append('<div class="cus-item">' +
                            '<label class=" control-label">字段标记</label>' +
                            ' <input readonly name="itemTag' + t + '" value="' + params[i].tag +
                            '"  ck-numorletteroruline="true"  class="form-control input-sm js-inputx" type="text">' +
                            ' <label class="control-label">字段名称</label>' +
                            ' <input name="itemName' + t + '" value="' + params[i].name +
                            '" required class="form-control input-sm js-inputx" type="text">' +
                            ' <label class="icheck-boxx"><input class="i-checks js-check-item" type="checkbox"' + $checked + $readonly + ' name="itemSelect' + t +
                            '" value="true">&nbsp;必须包含</label>');
                        // ' <span class="js-del-btnx del-btn-xxw text-danger"><i class="glyphicon glyphicon-trash"></i></span>' +
                        // '</div>');
                    }
                    $('.i-checks').iCheck({
                        checkboxClass: 'icheckbox_square-green',
                        radioClass: 'iradio_square-green'
                    });
                }

            });
        </script>
    </body>

</html>