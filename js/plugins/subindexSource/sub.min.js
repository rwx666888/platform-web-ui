var cum_Modalindex_=0,cum_ModalValobj=null;function cumCurWinModal(a,c,b,d){var e=cumCheckPwin(b||window),f={area:["90%","80%"],scrollbar:!1,ismax:!1,callid:"",callback:{},cancel:null,end:null,helpBtn:!1,type:2,other:{},success:null};"undefined"!==typeof d&&$.extend(f,d);b=f.area;b[0]&&0<b[0].toLowerCase().indexOf("px")&&parseInt(b[0])>$(e).width()&&(b[0]="100%");b[1]&&0<b[1].toLowerCase().indexOf("px")&&parseInt(b[1])>$(e).height()&&(b[1]="100%");2==f.type&&COM_TOOLS.setCacheFnForChildWin();return e.layer.open($.extend({type:f.type,title:a,area:f.area,content:c,scrollbar:f.scrollbar&&!e.$("html").attr("layer-full")?!1:!0,maxmin:f.ismax,helpBtn:f.helpBtn,resize:!1,zIndex:e.layer.zIndex,success:function(a,b){if(2==f.type){var c=e[a.find("iframe")[0].name];f.callid&&(c.cum_ModalValobj=f.callid);$.isEmptyObject(f.callback)||"object"!=$.type(f.callback)||(f.callid||(c.cum_ModalValobj="no_nodeid"),c.COM_TOOLS.cache_obj._ptWinFnNames=f.callback);if(window.name&&"welPiframe"!=window.name&&0!=window.name.indexOf("mainPiframe")){var d=e.layer.getFrameIndex(window.name);d&&(c.cum_Modalindex_=d)}else c.cum_Modalindex_=-1}$.isFunction(f.success)&&f.success(a,b,c)},cancel:f.cancel,end:f.end},f.other))}function cumParentWinModal(a,c,b){return cumCurWinModal(a,c,parent,$.extend({ismax:!0},b))}function cumParentCallValue(a,c){if(!window.name)return!1;var b=cumCheckPwin(parent),d=b.layer.getFrameIndex(window.name);"function"===typeof a&&a();cumCloseWin(d,c,b)}function cumCloseWin(a,c,b){cumCheckPwin(b||window).layer.close(a,c)}function cumGetParentWinGlobel(a){return 0<cum_Modalindex_?cumCheckPwin(a).window["layui-layer-iframe"+cum_Modalindex_]:cumCheckPwin(a)==top&&0<top.$(".js-iframe-comwin").length?top.window[top.$(".js-iframe-comwin:visible").attr("name")]:cumCheckPwin(a)}function cumGetParentBodyGlobel(a){return 0<cum_Modalindex_?cumCheckPwin(a).layer.getChildFrame("body",cum_Modalindex_):cumCheckPwin(a)==top&&0<top.$(".js-iframe-comwin").length?top.window[top.$(".js-iframe-comwin:visible").attr("name")].document.body:cumCheckPwin(a).document.body}function cumResizeWin(a,c){var b=cumCheckPwin(c||window).$("#layui-layer"+a);if(!b.length)return!1;b.data("source_api").auto(a).offset()}function cumCheckPwin(a){a=a||parent;try{a.location.href}catch(c){a=self}return a}function resizeIframeHeight(){}function intValidateOption(){}function cus_dt_ajaxdata(a,c){var b={},d=a.columns;b.draw=a.draw;b.pageSize=a.length;b.start=a.start;d&&(b.sort=[],$.each(a.order,function(a,c){var e=d[c.column];b.sort.push({colData:e.data,colName:e.name,dir:c.dir})}));return $.isEmptyObject(c)?b:$.extend({},c,b)}function select_add(a,c,b,d){a=$("#"+a);a.empty();var e=[];$.each(c,function(a,c){e.push('\x3coption value\x3d"',c[b],'"\x3e',c[d],"\x3c/option\x3e")});a.append(e.join(""))}function select_option_init(a,c,b,d,e,f){$.ajax({type:"post",url:a,data:f,cache:!1,success:function(a,f){1==a.result?select_add(b,a[c],d,e):COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noData"])},error:function(){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.networkError"])}})}var TEDU_MESSAGE=function(){var a={format:function(a,b){if(void 0===b)return a;b.constructor!==Object&&b.constructor!==Array&&(b=[b]);$.each(b,function(b,c){a=a.replace(new RegExp("\\{"+b+"\\}","g"),function(){return c})});return a},get:function(c,b,d){return"undefined"!=typeof LOCAL_MESSAGE_DATA?LOCAL_MESSAGE_DATA[c]?a.format(LOCAL_MESSAGE_DATA[c],b)||"":"":""}};return a}(),TEDU_LANGUAGE={_dataTable:{"zh-CN":{processing:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.processing"],lengthMenu:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.lengthMenu"],zeroRecords:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.zeroRecords"],info:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.info"],infoEmpty:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.infoEmpty"],infoFiltered:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.infoFiltered"],infoPostFix:"",search:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.search"],url:"",emptyTable:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.emptyTable"],loadingRecords:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.loadingRecords"],infoThousands:",",paginate:{first:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_first"],previous:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_previous"],next:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_next"],last:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_last"],btnToPage:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_btnToPage"]||"\u8df3\u8f6c"},aria:{sortAscending:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.sortAscending"],sortDescending:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.sortDescending"]}}},_validate:function(){return $.validator&&{"zh-CN":{required:LOCAL_MESSAGE_DATA["platform.plugin.validate.required"],remote:LOCAL_MESSAGE_DATA["platform.plugin.validate.remote"],email:LOCAL_MESSAGE_DATA["platform.plugin.validate.email"],url:LOCAL_MESSAGE_DATA["platform.plugin.validate.url"],date:LOCAL_MESSAGE_DATA["platform.plugin.validate.date"],dateISO:LOCAL_MESSAGE_DATA["platform.plugin.validate.dateISO"],number:LOCAL_MESSAGE_DATA["platform.plugin.validate.number"],digits:LOCAL_MESSAGE_DATA["platform.plugin.validate.digits"],creditcard:LOCAL_MESSAGE_DATA["platform.plugin.validate.creditcard"],equalTo:LOCAL_MESSAGE_DATA["platform.plugin.validate.equalTo"],extension:LOCAL_MESSAGE_DATA["platform.plugin.validate.extension"],maxlength:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.maxlength"]),minlength:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.minlength"]),rangelength:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.rangelength"]),range:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.range"]),max:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.max"]),min:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.min"])}}},_select2:function(){if(jQuery.fn.select2&&jQuery.fn.select2.amd){var a=jQuery.fn.select2.amd;return a.define("select2/i18n/zh-CN",[],function(){return{errorLoading:function(){return LOCAL_MESSAGE_DATA["platform.plugin.select2.errorLoading"]},inputTooLong:function(a){return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA["platform.plugin.select2.inputTooLong"],[a.input.length-a.maximum])},inputTooShort:function(a){return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA["platform.plugin.select2.inputTooShort"],[a.minimum-a.input.length])},loadingMore:function(){return LOCAL_MESSAGE_DATA["platform.plugin.select2.loadingMore"]},maximumSelected:function(a){return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA["platform.plugin.select2.maximumSelected"],[a.maximum])},noResults:function(){return LOCAL_MESSAGE_DATA["platform.plugin.select2.noResults"]},searching:function(){return LOCAL_MESSAGE_DATA["platform.plugin.select2.searching"]}}}),{define:a.define,require:a.require}}},_datetimepicker:function(){return{"zh-CN":{days:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sunday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.monday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.tuesday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.wednesday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.thursday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.friday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.saturday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sunday"]],daysShort:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.mon"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.tue"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.wed"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.thu"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.fri"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sat"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sun"]],daysMin:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.s"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.m"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.t"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.w"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.th"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.f"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sa"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.s"]],months:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jan"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.feb"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.mar"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.apr"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.may"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jul"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.aug"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sep"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.oct"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.nov"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.dec"]],monthsShort:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_jan"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_feb"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_mar"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_apr"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_may"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_jun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_jul"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_aug"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_sep"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_oct"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_nov"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_dec"]],today:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.today"],clear:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.clear"],suffix:[],meridiem:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.am"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.pm"]],format:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.format"],weekStart:1}}}(),_daterangepicker:function(){return{firstDay:1,separator:" - ",applyLabel:LOCAL_MESSAGE_DATA["platform.plugin.com_btn.confirm"],cancelLabel:LOCAL_MESSAGE_DATA["platform.plugin.com_btn.cancel"],customRangeLabel:"\u81ea\u5b9a\u4e49",weekLabel:"W",daysOfWeek:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.s"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.m"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.t"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.w"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.th"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.f"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sa"]],monthNames:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jan"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.feb"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.mar"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.apr"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.may"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jul"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.aug"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sep"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.oct"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.nov"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.dec"]],format:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.format"].replace("yyyy","YYYY").replace("mm","MM").replace("dd","DD").replace("hh","HH").replace("ii","mm")}}},CUS_PLUGINS={_DT_:{_numbers_nototal:function(a,c){var b=[],b=$.fn.DataTable.ext.pager.numbers_length,d=Math.floor(b/2),e=function(a,b){var c;"undefined"===typeof b?(b=0,c=a):(c=b,b=a);for(var d=[],e=b;e<c;e++)d.push(e);return d};c<=b?b=e(0,c):a<=d?(b=e(0,b-1),b.push("ellipsis")):(a>=c-1-d?b=e(c-(b-2),c):(b=e(a-d+2,a+d),b.push("ellipsis")),b.splice(0,0,"ellipsis"),b.splice(0,0,0));b.DT_el="span";return b},init:function(){var a=this;$.fn.DataTable.ext.pager.simple_numbers_no_totalpage=function(c,b){return["previous",a._numbers_nototal(c,b),"next"]};$.fn.DataTable.ext.pager.simple_numbers_input=function(a,b){return["previous",$.fn.DataTable.ext.pager._numbers(a,b),"next","cusPageInput"]};$.fn.DataTable.ext.pager.simple_numbers_inputAndPages=function(a,b){return["previous",$.fn.DataTable.ext.pager._numbers(a,b),"next","cusPageInputAndPages"]};$.fn.DataTable.ext.pager.simple_inputAndPages=function(a,b){return["previous","next","cusPageInputAndPages"]}}},_VALID_:{applyTooltipOptions:function(a,c){var b=$.fn.tooltip.Constructor.DEFAULTS,b={animation:a.data("animation")||!1,html:a.data("html")||b.html,placement:a.data("placement")||b.placement,selector:a.data("selector")||b.selector,trigger:$.trim("manual "+(a.data("trigger")||"")),delay:a.data("delay")||b.delay,container:a.data("container")||b.container,template:'\x3cdiv class\x3d"tooltip cus-tooltip-error" role\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e'};c&&c._all_&&$.extend(b,c._all_);c&&c[a.attr("name")]&&$.extend(b,c[a.attr("name")]);return b},init:function(){var a=this;$.validator.setDefaults({normalizer:function(a){return $.trim(a)},success:function(a,b){$(b).tooltip("destroy")},errorPlacement:function(c,b){var d=$(b),e=a.applyTooltipOptions(d,this.settings.tooltip_options);e.title=e.html?c.html():c.text();void 0!==d.data("bs.tooltip")?d.data("bs.tooltip").options.title=e.title:d.tooltip(e);d.tooltip("show")}})}}};(function(a,c,b){var d=function(b,c,d){this.$element_=a(b);c.showRanges&&(c.ranges=c.ranges?c.ranges:{"\u4eca\u5929":[moment(),moment()],"\u6628\u5929":[moment().subtract(1,"days"),moment().subtract(1,"days")],"\u8fd1\u4e00\u5468":[moment().subtract(6,"days"),moment()],"\u8fd1\u4e00\u6708":[moment().subtract(29,"days"),moment()],"\u672c\u6708":[moment().startOf("month"),moment().endOf("month")],"\u4e0a\u6708":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]});this.option_=a.extend(!0,{},a.fn.daterangepicker.defaultOptions,c);this.$element_.daterangepicker(this.option_,d);this.$element_.on("apply.daterangepicker",function(a,b){b.updateElement(!0)}).on("cancel.daterangepicker",function(a,b){1==b.$input_.length&&(b.setStartDate(moment().startOf("minute")),b.setEndDate(moment().endOf("minute")),b.$input_.val("").trigger("focusout.validate"))})};d.VERSION="1.1.0";a.fn.cusdaterangepicker=function(c,f){return this.each(function(){var e=a(this).data("daterangepicker"),h="object"==typeof c&&c;if(e||!/remove/.test(c))if(e||(b.moment?new d(this,h,f):console.error("\u4f7f\u7528\u8be5\u7ec4\u4ef6\u9700\u63d0\u524d\u5f15\u5165 moment.js \u7ec4\u4ef6!")),"string"==typeof c)e[c](f)})};a.fn.cusdaterangepicker.Constructor=d})(jQuery,document,window);(function(a){var c=function(a,c){this.init("cuspanel",a,c)};c.VERSION="1.0.0";c.DEFAULTS={overlay:'\x3cdiv class\x3d"panel-overlay"\x3e\x3cdiv class\x3d"panel-overlay-loading"\x3e\x3ci class\x3d"glyphicon glyphicon-refresh cus-animation-spin"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e',btn:{fullscreen:{iconClass:["glyphicon glyphicon-resize-full","glyphicon glyphicon-resize-small"]},reload:{iconClass:["glyphicon glyphicon-refresh"]},collapse:{iconClass:["glyphicon glyphicon-chevron-up","glyphicon glyphicon-chevron-down"]},close:{iconClass:["glyphicon glyphicon-remove"]}},height:!1,iframesrc:!1};c.prototype.init=function(b,c,e){var d=this;this.type=b;this.$element=a(c);this.options=this.getOptions(e);this.$btnbox=this.$element.find(".cus-panel-btn-box");this.$body=this.$element.children(".cus-panel-body");this.$overlay=a(this.options.overlay);this.options.iframesrc&&(this.$body.addClass("iframe-panel"),this.$iframe=a("\x3ciframe/\x3e"),this.overlay("open"),this.$iframe.on("load",function(){d.overlay("close")}).attr({allowtransparency:"yes",frameborder:0,height:"100%",width:"100%",src:this.options.iframesrc}),this.$body.html(this.$iframe));this.options.height&&this.$body.height(this.options.height);this.btns()};c.prototype.btns=function(){var b=this,c=this.$btnbox;if(0==c.length)return!1;var e=[],f=this.options.btn;f&&!a.isEmptyObject(f)?(a.each(f,function(d,h){if(h&&h.iconClass){"string"==a.type(h.iconClass)&&(f[d].iconClass=[h.iconClass]);if("reload"==d&&!b.options.iframesrc)return!0;e.push('\x3cspan class\x3d"c-p-btn js-evt-btnbar" data-active\x3d"',d,'"\x3e');e.push('\x3ci class\x3d"',h.iconClass[0],'"\x3e\x3c/i\x3e');e.push("\x3c/span\x3e");if(/^(fullscreen|reload|collapse|close)$/.test(d))c.on("click.com."+b.type+".data-api",'.js-evt-btnbar[data-active\x3d"'+d+'"]',a.proxy(b[d],b));else c.on("click.com."+b.type+".data-api",'.js-evt-btnbar[data-active\x3d"'+d+'"]',a.proxy(function(b){b=a(b.currentTarget);this.$element.trigger(a.Event(d+".com."+this.type,{relatedTarget:b[0]}))},b))}}),c.html(e.join(""))):c.hide()};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.getOptions=function(b){var c=a.extend({},this.$element.data());c&&c.btn&&"{"==a.trim(c.btn).substring(0,1)&&(c.btn=(new Function("return "+a.trim(c.btn)))());return b=a.extend(!0,{},this.getDefaults(),c,b)};c.prototype.fullscreen=function(b){var c=this.options.btn.fullscreen,c=c.iconClass&&1<c.iconClass.length?c.iconClass:!1;b=b instanceof a.Event?a(b.currentTarget):this.$btnbox.children('.js-evt-btnbar[data-active\x3d"fullscreen"]');this.$element.toggleClass("fullscreen");c&&b.children("i").toggleClass(this.ckeckIcon(c[0])).toggleClass(this.ckeckIcon(c[1]));this.$element.trigger(a.Event("fullscreen.com."+this.type,{relatedTarget:b[0],actionType:this.$element.hasClass("fullscreen")?"isfullscreen":"nofullscreen"}))};c.prototype.reload=function(b){this.options.iframesrc&&(this.$iframe.attr("src",this.$iframe.attr("src")),this.overlay("open"));b=b instanceof a.Event?a(b.currentTarget):this.$btnbox.children('.js-evt-btnbar[data-active\x3d"reload"]');this.$element.trigger(a.Event("reload.com."+this.type,{relatedTarget:b[0]}))};c.prototype.collapse=function(b){var c=this,e=this.options.btn.collapse,e=e.iconClass&&1<e.iconClass.length?e.iconClass:!1,f=b instanceof a.Event?a(b.currentTarget):this.$btnbox.children('.js-evt-btnbar[data-active\x3d"collapse"]'),g=function(){c.$element.trigger(a.Event("collapse.com."+c.type,{relatedTarget:f[0],actionType:c.$body.is(":hidden")?"hidden":"show"}))};"up"==b?this.$body.is(":hidden")||(this.$body.slideToggle("fast",g),e&&f.children("i").toggleClass(this.ckeckIcon(e[0])).toggleClass(this.ckeckIcon(e[1]))):"down"==b?this.$body.is(":hidden")&&(this.$body.slideToggle("fast",g),e&&f.children("i").toggleClass(this.ckeckIcon(e[0])).toggleClass(this.ckeckIcon(e[1]))):(this.$body.slideToggle("fast",g),e&&f.children("i").toggleClass(this.ckeckIcon(e[0])).toggleClass(this.ckeckIcon(e[1])))};c.prototype.close=function(b){this.$element.remove();b=b instanceof a.Event?a(b.currentTarget):this.$btnbox.children('.js-evt-btnbar[data-active\x3d"close"]');this.$element.trigger(a.Event("close.com."+this.type,{relatedTarget:b[0]}))};c.prototype.ckeckIcon=function(b){return a.trim(b.replace(/glyphicon |tedufont /g,""))};c.prototype.overlay=function(a){"open"==a&&(this.$element.find(this.$overlay).length||this.$element.append(this.$overlay));"close"==a&&this.$overlay.detach()};a.fn.cuspanel=function(b,d){return this.each(function(){var e=a(this),f=e.data("com.cuspanel"),g="object"==typeof b&&b;if(f||!/destroy|hide/.test(b))if(f||e.data("com.cuspanel",f=new c(this,g)),"string"==typeof b)f[b](d)})};a.fn.cuspanel.Constructor=c})(jQuery);(function(a,c,b){var d=function(a,b){this.init("delayPopover",a,b);this.initDelayPopover()};d.DEFAULTS=a.extend({},a.fn.popover.Constructor.DEFAULTS,{trigger:"hover",delay:{hide:160}});d.prototype=a.extend({},a.fn.popover.Constructor.prototype);d.prototype.constructor=d;d.prototype.getDefaults=function(){return d.DEFAULTS};d.prototype.delayPopoverEnter=function(){this.hoverState="in"};d.prototype.delayPopoverLeave=function(){this.hoverState="out";this.leave(this)};d.prototype.initDelayPopover=function(){this.tip().on("mouseenter."+this.type,a.proxy(this.delayPopoverEnter,this)).on("mouseleave."+this.type,a.proxy(this.delayPopoverLeave,this))};var e=a.fn.delayPopover;a.fn.delayPopover=function(b){return this.each(function(){var c=a(this),e=c.data("bs.delayPopover"),f="object"==typeof b&&b;if(e||!/destroy|hide/.test(b))if(e||c.data("bs.delayPopover",e=new d(this,f)),"string"==typeof b)e[b]()})};a.fn.delayPopover.Constructor=d;a.fn.delayPopover.noConflict=function(){a.fn.delayPopover=e;return this}})(jQuery,document,window);var COM_TOOLS={version:"6.1.1",_language:"zh-CN",_jsFileList:{jstree:{js:"plugins/jsTree/jstree.min.js",css:"plugins/jsTree/style.min.css"},validator:{js:"plugins/validate/jquery.validate.custom.min.js",css:""},datetimepicker:{js:"plugins/datetimepicker/bootstrap-datetimepicker.min.js",css:"plugins/datetimepicker/bootstrap-datetimepicker.min.css"},select2:{js:"plugins/select2/select2.full.min.js",css:"plugins/select2/select2.min.css"},cropper:{js:"plugins/cropper/cropper.min.js",css:"plugins/cropper/cropper.min.css"},quicksearch:{js:"plugins/lou-multi-select/js/jquery.quicksearch.js",css:""},multiSelect:{js:"plugins/lou-multi-select/js/jquery.multi-select.js",css:""},jqueryZoom:{js:"plugins/jquery-zoom/jquery.zoom.min.js",css:""},echarts:{js:"plugins/echarts/echarts.min.js",css:""},icheck:{js:"plugins/iCheck/icheck.min.js",css:"plugins/iCheck/custom.css"},cusPinYin:{js:"pinyin.js",css:""},datatable:{js:"plugins/datatables/datatables.min.js",css:"plugins/dataTables/datatables.min.css"},mCustomScrollbar:{js:"plugins/customScrollbar/jquery.mCustomScrollbar.concat.min.js",css:"plugins/customScrollbar/jquery.mCustomScrollbar.min.css"}},initjSDefaultOpt:function(a){if(!a)return!1;("ALL"==a||-1!==$.inArray("DTmain",a))&&$.fn.dataTable&&(CUS_PLUGINS._DT_.init(),$.extend($.fn.dataTable.defaults,COM_DEFAULT._dataTableOpt,{language:TEDU_LANGUAGE._dataTable[COM_TOOLS._language],fnPreDrawCallback:function(a){$(a.nTableWrapper).find(".cus-checkbox-all").removeClass("cus-checked")}}),$.fn.dataTable.ext.errMode=function(a,b,d){a="\u6570\u636e\u8868\u683c\u9519\u8bef: "+(a?"table id\x3d"+a.sTableId+" - ":"");if(b){switch(b){case 1:a+="\u65e0\u6548\u7684JSON\u6570\u636e\u683c\u5f0f";break;case 2:a+="\u975etable\u8282\u70b9\u521d\u59cb\u5316";break;case 3:a+="\u65e0\u6cd5\u91cd\u590d\u521d\u59cb\u5316DataTable\uff1b\u53ef\u80fd\u539f\u56e0\uff1a\u8868\u683cID\u91cd\u590d\uff0c\u6216\u672a\u9500\u6bc1\u4e4b\u524d\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff08\u7279\u6b8a\u573a\u666f\uff09\uff1b";break;case 4:a+="\u6570\u636e\u6e90\u4e2d\u7f3a\u5c11\u5bf9\u8c61\uff0c\u6216\u5176\u5b83\u6570\u636e\u683c\u5f0f\u9519\u8bef\uff1a"+d;break;case 5:a+="\u5206\u9875\u64cd\u4f5c\u8d8a\u754c\uff0c\u53ef\u80fd\u539f\u56e0\uff1a\u5206\u9875\u53c2\u6570\u9519\u8bef\uff0c\u6570\u636e\u8d8a\u754c\uff1b";break;case 6:a+="\u8868\u683c\u6e32\u67d3\u5f02\u5e38\uff0c\u8868\u683c\u5e03\u5c40\u9519\u8bef\uff0c\u53ef\u80fd\u539f\u56e0\uff1a\u8868\u683c\u521d\u59cb\u5316\u5bb9\u5668\u8fc7\u5c0f";break;case 7:a+="Ajax\u9519\u8bef,\u53ef\u80fd\u539f\u56e0\uff1a\u5e94\u7528\u54cd\u5e94\u5f02\u5e38\uff1b";break;default:a+=d}a+="#Code:"+b}window.console&&console.error&&console.error(a)});("ALL"==a||-1!==$.inArray("jstree",a))&&$.jstree&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"jstree"),$.jstree.root=COM_DEFAULT._jsTreeOpt.root);("ALL"==a||-1!==$.inArray("validator",a))&&$.validator&&(CUS_PLUGINS._VALID_.init(),$.extend($.validator.messages,TEDU_LANGUAGE._validate()[COM_TOOLS._language]),COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"validator"));("ALL"==a||-1!==$.inArray("datetimepicker",a))&&$.fn.datetimepicker&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"datetimepicker"),$.fn.datetimepicker.dates["cus-lang"]=TEDU_LANGUAGE._datetimepicker[COM_TOOLS._language],$.extend($.fn.datetimepicker.defaults,COM_DEFAULT._dateTimePickerOpt,{language:"cus-lang"}));("ALL"==a||-1!==$.inArray("daterangepicker",a))&&$.fn.daterangepicker&&($.fn.daterangepicker.defaultOptions={})&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"daterangepicker"),$.extend($.fn.daterangepicker.defaultOptions,COM_DEFAULT._dateRangePickerOpt,{locale:TEDU_LANGUAGE._daterangepicker()}));("ALL"==a||-1!==$.inArray("select2",a))&&$.fn.select2&&(TEDU_LANGUAGE._select2(),$.fn.select2.defaults.set("language",COM_TOOLS._language),$.fn.select2.defaults.set("width","style"),COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"select2"))},_data:{WEEKDAYS_:[],PLAYDAYS_:[]},private_obj_:{},cache_obj:{_jsfileArr:[],_ptWinFnNames:{},_ptWinFnList:{},_cus_jstree_cache:{}},_jsPath:function(){var a;if(document.currentScript)a=document.currentScript.src;else{a=document.scripts;for(var c=a.length-1,b,d=c;0<d;d--)if("interactive"===a[d].readyState){b=a[d].src;break}a=b||a[c].src}return a.substring(0,a.lastIndexOf("/")+1)}(),localStorageSupport:function(){return"localStorage"in window&&null!==window.localStorage},save_toLocal:function(a,c){localStorage.setItem(a,"object"==typeof c?JSON.stringify(c):c)},get_fromLocal:function(a){return localStorage.getItem(a)},sessionStorageSupport:function(){return"sessionStorage"in window&&null!==window.sessionStorage},save_toSession:function(a,c){sessionStorage.setItem(a,"object"==typeof c?JSON.stringify(c):c)},get_fromSession:function(a){return sessionStorage.getItem(a)},requestParam:function(a){var c=location.search,b=c.indexOf("?");if(-1===b)return"";for(var b=c.substr(b+1).split("\x26"),d=0;d<b.length;d++)if(c=b[d].split("\x3d"),c[0].toUpperCase()==a.toUpperCase())return d===b.length-1&&(a=c[1].indexOf("#"),-1!==a&&(c[1]=c[1].substring(0,a))),c[1];return""},serializeObject:function(a){var c={};a=$(a).serializeArray();$.each(a,function(a,d){c[d.name]=c[d.name]?c[d.name]+","+$.trim(d.value):$.trim(d.value)});return c},get_random_fun:function(a){for(var c="",b=0;b<a;b++)c+=Math.floor(10*Math.random());return c},get_UID:function(a){do a+=~~(1E6*Math.random());while(document.getElementById(a));return a},get_GUID:function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()).replace(/-/g,"")},is_playerDay:function(a){var c=moment(a).day();return(0==c||6==c||-1!=$.inArray(a,COM_TOOLS._data.PLAYDAYS_))&&-1==$.inArray(a,COM_TOOLS._data.WEEKDAYS_)},get_nextWeekDay:function(a){return COM_TOOLS.is_playerDay(a)?(a=moment(a).add(1,"days").format("YYYY-MM-DD"),arguments.callee(a)):moment(a).format("YYYY-MM-DD")},getPosition:function(a){var c=a[0],b="BODY"==c.tagName,c=c.getBoundingClientRect();null==c.width&&(c=$.extend({},c,{width:c.right-c.left,height:c.bottom-c.top}));var d=b?{top:0,left:0}:a.offset();a={scrollTop:b?document.documentElement.scrollTop||document.body.scrollTop:a.scrollTop(),scrollLeft:b?document.documentElement.scrollLeft||document.body.scrollLeft:a.scrollLeft()};b=b?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},c,a,b,d)},_ajax_jumpToLogin:function(a,c){if(COM_DEFAULT._forcedExit&&!0===COM_DEFAULT._forcedExit.ajaxForm){var b=cumCheckPwin(c||window);a&&-1!==a.indexOf('"code":"8001"')&&(b.location.href=COM_DEFAULT._contextPath||"/")}},formatMoney:function(a,c,b,d,e){a=a||0;c=isNaN(c=Math.abs(c))?2:c;b=void 0!==b?b:"\uffe5";d=d||",";e=e||".";var f=0>a?"-":"",g=parseInt(a=Math.abs(+a||0).toFixed(c),10)+"",h=3<(h=g.length)?h%3:0;return b+f+(h?g.substr(0,h)+d:"")+g.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+d)+(c?e+Math.abs(a-g).toFixed(c).slice(2):"")},fnFloatSum:function(a,c){var b,d;try{b=a.toString().split(".")[1].length}catch(e){b=0}try{d=c.toString().split(".")[1].length}catch(e){d=0}b=Math.pow(10,Math.max(b,d));return(a*b+c*b)/b},fnInitInputHelpVal:function(a){COM_DEFAULT._isOpenHelpMsg.helpMsgDefVal&&window.setTimeout(function(){$('.js-helpmsg:text[data-titlemsg!\x3d"true"]:not([placeholder])').attr("placeholder",function(a,b){var c=$(this).data("helpdata"),c=c?c.toString().split(","):[];return TEDU_MESSAGE.get($(this).data("helpmsg"),c)||b})},"number"===jQuery.type(a)?a:300)},callParentWinFn:function(a,c){if(a&&COM_TOOLS.cache_obj._ptWinFnNames[a]){var b=cumGetParentWinGlobel();if(b.COM_TOOLS.private_obj_[COM_TOOLS.cache_obj._ptWinFnNames[a]])b.COM_TOOLS.private_obj_[COM_TOOLS.cache_obj._ptWinFnNames[a]](c)}},callParentWinCacheFn:function(a,c){if(a&&COM_TOOLS.cache_obj._ptWinFnNames[a])if("function"==$.type(COM_TOOLS.cache_obj._ptWinFnNames[a]))COM_TOOLS.cache_obj._ptWinFnNames[a](c);else{var b=cumGetParentWinGlobel();if(b.COM_TOOLS.cache_obj._ptWinFnList[COM_TOOLS.cache_obj._ptWinFnNames[a]])b.COM_TOOLS.cache_obj._ptWinFnList[COM_TOOLS.cache_obj._ptWinFnNames[a]](c)}},setCacheFnForChildWin:function(a){$.isEmptyObject(a)?COM_TOOLS.cache_obj._ptWinFnList={}:COM_TOOLS.cache_obj._ptWinFnList=a},loadingShade:{open:function(a,c){layer.load(1,{time:1E3*(a||0),shade:c||[.5],zIndex:layer.zIndex})},close:function(){layer.closeAll("loading")}},loadingBtn:{createLabel:function(a){a.wrapInner('\x3cspan class\x3d"cus-spinner-label"\x3e\x3c/span\x3e')},createSpinner:function(a){var c=[];c.push('\x3cdiv class\x3d"cus-spinner cus-spinner-fading-circle"\x3e');for(var b=1;12>=b;b++)c.push('\x3cdiv class\x3d"cus-circle',b,' cus-circle"\x3e\x3c/div\x3e');c.push("\x3c/div\x3e");a.append(c.join(""))},open:function(a){a="string"==$.type(a)?$("#"+a):a;a.addClass("cus-spinner-box").attr("data-loading","").prop("disabled",!0);0==a.children(".cus-spinner-label").length&&this.createLabel(a);0==a.children(".cus-spinner").length&&this.createSpinner(a)},close:function(a){("string"==$.type(a)?$("#"+a):a).each(function(){var a=$(this);a.removeAttr("data-loading").prop("disabled",function(){return a.is("[must_disabled]")||!1})})}},loadingOverlay:{open:function(a){a="string"==$.type(a)?$("#"+a):a;a.is(":button")?COM_TOOLS.loadingBtn.open(a):a.addClass("model-overlay")},close:function(a){a="string"==$.type(a)?$("#"+a):a;a.is(":button")?COM_TOOLS.loadingBtn.close(a):a.removeClass("model-overlay")}},customValid:{specialChars:function(a,c){var b=/[\-\_\,\!\|\~\`\(\)\#\$\%\^\&\*\{\}\:\;\"\<\>\?]/g;void 0!=c&&(b=new RegExp("[\\"+c.join("\\")+"]","g"));return b.test(a)}},arrayUniqueFn:function(a){var c=[],b,d,e={};b=0;for(d=a.length;b<d;b++)void 0===e[a[b]]&&(c.push(a[b]),e[a[b]]=!0);return c},arrayUniquePushFn:function(a,c){return-1===$.inArray(c,a)&&a.push(c)},arrayObjectSortBy:function(a,c,b){b=b||1;a.sort(function(a,e){a=a[c];e=e[c];return a<e?-1*b:a>e?1*b:0})},parseOjects:function(a){var c={};if(a=$.trim(a))"{"!=a.substring(0,1)&&(a="{"+a+"}"),c=(new Function("return "+a))();return c},parseArray:function(a){var c=[];a=$.trim(a);""!=a&&("["!=a.substring(0,1)&&(a="["+a+"]"),c=(new Function("return "+a))());return c},docEditor:function(a,c,b){b=b||{};if(!window.CKEDITOR||!window.CKEDITOR.dom||!$("#"+a).length)return!1;"object"==typeof c&&(b=c,c="");var d=$.extend({imageUploadUrl:COM_DEFAULT._fileServeOpt.fileUploadUrl,filebrowserImageUploadUrl:COM_DEFAULT._fileServeOpt.fileUploadUrl,fileUploadMaxSize:COM_DEFAULT._fileServeOpt.defaultFileSize,imgUploadMaxSize:COM_DEFAULT._fileServeOpt.imgFileSize,fileUploadType:COM_DEFAULT._fileServeOpt.fileType,imgUploadType:COM_DEFAULT._fileServeOpt.imgType},b);d.imageUploadUrl=d.imageUploadUrl+"?type\x3d1"+(c?"\x26"+c:"");d.filebrowserImageUploadUrl=d.filebrowserImageUploadUrl+"?type\x3d2"+(c?"\x26"+c:"");return CKEDITOR[b.is_inline_init?"inline":"replace"](a,d)},sel_make_optionFn:function(a){var c=$('\x3coption value\x3d""\x3e\u8bf7\u9009\u62e9\x3c/option\x3e');$.each(a,function(a,d){var b=$('\x3coption value\x3d"'+d.id+'"\x3e'+d.text+"\x3c/option\x3e");b.data("data",d);c=c.add(b)});return c},ajaxFn:function(a,c,b){var d={dataType:"json",cache:!1};$.extend(!0,d,a,{beforeSend:function(d){1==c?COM_TOOLS.loadingShade.open(0,b):2==c?COM_TOOLS.loadingBtn.open(b):3==c&&COM_TOOLS.loadingOverlay.open(b);"function"==$.type(a.beforeSend)&&a.beforeSend(d)},complete:function(d,f){setTimeout(function(){1==c?COM_TOOLS.loadingShade.close():2==c?COM_TOOLS.loadingBtn.close(b):3==c&&COM_TOOLS.loadingOverlay.close(b)},300);"function"==$.type(a.complete)&&a.complete(d,f)}});return $.ajax(d)},cus_mult_choice:function(a,c,b,d,e){a=$("#"+a);var f=a.children(".cus-mult-choice"),g=d?$("#"+d):[],h=e?$("#"+e):[];a.on("click",".js-mult-remove",function(){$(this).closest(".mult-item").remove();g.length&&g.val(k.setHiddenValue("code"));h.length&&h.val(k.setHiddenValue("text"))}).on("click",".cus-mult-btn",function(){c&&c()});var k={addItem:function(a,c){if("-1"!=b&&f.find("span").length>=b)return COM_TOOLS.alert("\u6700\u591a\u6dfb\u52a0"+b+"\u4e2a"),!1;if(f.children("span").is("[data-code\x3d"+a+"]"))return!1;f.append('\x3cspan data-text\x3d"'+c+'" data-code\x3d"'+a+'" class\x3d"mult-item"\x3e'+c+' \x3ci class\x3d"glyphicon glyphicon-remove js-mult-remove"\x3e\x3c/i\x3e\x3c/span\x3e');g.length&&g.val(k.setHiddenValue("code")).trigger("focusout.validate");h.length&&h.val(k.setHiddenValue("text"))},removeAll:function(){f.html("");g.length&&g.val("");h.length&&h.val("")},backfill:function(a,b){if(null!=a&&a.length){var c=a.split(","),d=b.split(",");$.each(c,function(a,b){k.addItem(b,d[a])})}},getMultItem:function(a){var b=[];a=a||0;$.each(f.find("span"),function(c,d){b.push(a?$(d).data():$(d).data("code"))});return b},setHiddenValue:function(a){var b=[];$.each(f.find("span"),function(c,d){b.push($(d).data(a))});return b.join(",")}};return k},DT_init:function(a,c,b,d,e,f){var g={},h={},h="string"==$.type(b),k="object"==$.type(e)?e:{};h?h={ajax:{url:b,type:d||"get",dataSrc:function(a){return a&&0==a.isFilterTag?(a.recordsTotal=0,a.recordsFiltered=0,[]):a.data},data:function(a){return cus_dt_ajaxdata(a,k)}}}:(h={data:b,serverSide:!1,processing:!1},f=d);f="object"==$.type(f)?f:{};f.other="object"==$.type(f.other)?f.other:{};var l=$("#"+a).DataTable($.extend(!0,{columns:c,initComplete:function(a,b){var c=this.api();a._select&&"mutil"==a._select.style&&($(a.nTableWrapper).off("click.dtcus",".cus-checkbox-all").on("click.dtcus",".cus-checkbox-all",function(){$(this).hasClass("cus-checked")?($(this).removeClass("cus-checked"),c.rows().deselect()):($(this).addClass("cus-checked"),c.rows().select())}),c.off("select.dt.dtcus deselect.dt.dtcus").on("select.dt.dtcus deselect.dt.dtcus",function(b,c,d,e){c&&$(a.nTableWrapper).find(".cus-checkbox-all").toggleClass("cus-checked",c.rows({selected:!0}).count()==c.rows().count())}));if($.isFunction(f.jsTrDblclick)){var d=null,e,g;$(a.nTBody).off("dblclick.dtcus touchstart.dtcus touchmove.dtcus touchend.dtcus","tr").on({"dblclick.dtcus":function(){f.jsTrDblclick(COM_TOOLS.DT_getRowsSourceData(c,this)[0],$(this))},"touchstart.dtcus":function(a){a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(e=a.originalEvent.changedTouches[0].clientX,g=a.originalEvent.changedTouches[0].clientY,d=setTimeout(function(){$(a.currentTarget).trigger("dblclick.dtcus")},750))},"touchmove.dtcus":function(a){d&&a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(50<Math.abs(e-a.originalEvent.changedTouches[0].clientX)||50<Math.abs(g-a.originalEvent.changedTouches[0].clientY))&&clearTimeout(d)},"touchend.dtcus":function(a){d&&clearTimeout(d)}},"tr").off("dblclick.dtcus",".select-checkbox, :input, .no-Sel-obj").on("dblclick.dtcus",".select-checkbox, :input, .no-Sel-obj",function(){return!1})}$.isFunction(f.jsInitComplete)&&f.jsInitComplete.call(c,a,b)},drawCallback:function(a){$.isFunction(f.jsDrawCallback)&&f.jsDrawCallback.call(this.api(),a)},select:{style:f.selectStyle||"mutil",selector:"td:not(td:has(:input))",info:!1}},h,f.other));g.table=l;g.setAjaxData=function(a,b,c){"object"==$.type(a)&&(k=a,c||COM_TOOLS.DT_ajaxReload(l,!0,b))};g.getAjaxData=function(){return k};g.getSelectRowsData=function(a){return COM_TOOLS.DT_getSelectRowsSourceData(l,a)};return g},DT_getSelectRows:function(a){return COM_TOOLS.DT_getSelectRowsData(a,"itemid")},DT_getSelectRowsData:function(a,c){var b=[];"string"===$.type(c)?a.rows(".selected").nodes().to$().each(function(){b.push($(this).data(c))}):a.rows(".selected").nodes().to$().each(function(){b.push($(this).data())});return b},DT_getSelectRowsSourceData:function(a,c,b){return COM_TOOLS.DT_getRowsSourceData(a,!0===b?"":".selected",c)},DT_getRowsSourceData:function(a,c,b){var d=[];"string"===$.type(b)?a.rows(c||"").every(function(){d.push(this.data()[b])}):a.rows(c||"").every(function(){d.push(this.data())});return d},DT_getColumnSum:function(a,c,b){var d=[];a.columns(c).every(function(c){var e=this.data().reduce(function(a,b){return COM_TOOLS.fnFloatSum(a,b)},0);b&&$(this.footer()).html(e);var g={};g[a.column(c).dataSrc()]=e;d.push(g)});return d},DT_getSelectRowsInputData:function(a,c){var b=[];a.rows(!0===c?"":".selected").nodes().to$().each(function(){var a={};a.id=$(this).data("itemid");$(this).find(".js-getval").each(function(b){$(this).attr("name")&&(a[$(this).attr("name")]=$(this).val())});b.push(a)});return b},DT_tdToinpEdit:function(a,c){if(!a.rows(".selected").nodes().to$().length)return COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noSelrows"]),!1;a.columns(c).nodes().to$().each(function(a,d){$(this).filter(function(a,b){return $(this).parent().hasClass("selected")}).each(function(b,d){if(!$(this).children().is("input.js-getval")){var e=$(this).text(),f=$("\x3cinput name\x3d'"+c[a].split(":")[0]+"' class\x3d'input-sm js-getval no-Sel-obj' type\x3d'text'\x3e");f.val(e);$(this).html(f)}})})},DT_inpTotdSave:function(a,c,b){var d="";a.rows(".selected").nodes().to$().find("input[name\x3d"+c[0].split(":")[0]+"]").length?(d=COM_TOOLS.DT_getSelectRowsInputData(a),0!=b&&a.columns(c).nodes().to$().each(function(b,c){$(this).filter(function(a,b){return $(this).parent().hasClass("selected")}).each(function(b,c){if($(this).children().is("input.js-getval")){var d=$(this).children().val();a.cell(c).data(d)}})})):COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noSelrows"]);return d},DT_getInputSum:function(a,c,b){var d=0;a.columns(c).nodes().to$().each(function(a,c){$(this).filter(function(a,c){return b||$(this).parent().hasClass("selected")}).each(function(a,b){$(this).children().is("input[type\x3dtext]")&&(d=COM_TOOLS.fnFloatSum(d,$(this).children().val()))})});return d},DT_getCurPageIndex:function(a,c){var b=a.page()||0;c&&(COM_TOOLS.private_obj_.pageIndex=b);return b},DT_setCurPageIndex:function(a,c){a.page(parseInt(c||COM_TOOLS.private_obj_.pageIndex||0)).draw(!1);COM_TOOLS.private_obj_.pageIndex=0},DT_ajaxReload:function(a,c,b){var d={cb:null,rp:!0};"boolean"==typeof c&&(d.rp=c);"function"==typeof b&&(d.cb=b);a.ajax.reload(d.cb,d.rp)},DT_checkboxReset:function(a){$(a.table().container()).find(".cus-checkbox-all").removeClass("cus-checked")},DT_getNode:function(a,c){return/body|footer|header|node|container/.test(c)?a.table()[c]():""}};COM_TOOLS.eChartsTools=function(){function a(a,b,c,g){var d={dnames:[],series:[],legends:[]};c=c||a.data("js_fopt")||{};g=g||a.data("js_dopt")||{};var e=!0;$.each(b||[],function(a,b){var f=$.extend(!0,{},b,{}).data;$.each(f||[],function(a,b){var c=g[b.name]?g[b.name]:b.name;f[a].name=c;e&&d.dnames.push(c)});e=!1;var h=$.extend(!0,{},c[b.cname],{})||{};h.data=f;d.series.push(h);d.legends.push(h.name)});return d}function c(b,c,f,g,h,k){var d={};f=a(b,f,g,h);d.series=f.series;c=c||b.data("js_type");if("bar"==c||"line"==c)d.yAxis={type:"value"},d.xAxis={data:f.dnames},d.tooltip={trigger:"axis"},d.legend={data:f.legends};else if("pie"==c||"funnel"==c)d.tooltip={trigger:"item"},d.legend={data:f.dnames};return $.extend(!0,d,k||b.data("js_opt")||{})}function b(a,b,f,g,h,k,l){var d={};"array"==$.type(g)?(d=c(a,f,g,h,k,l),b.setOption(d)):"string"==$.type(g)?(b.showLoading(),$.ajax({type:g.split("||")[1]||"get",url:g.split("||")[0],async:!0,cache:!1,dataType:"json",success:function(e){b.hideLoading();d=c(a,f,e,h,k,l);b.setOption(d)}})):"object"==$.type(g)?(b.showLoading(),$.ajax({type:g.type||"get",url:g.url,data:g.data||{},async:!0,cache:!1,dataType:"json",success:function(e){b.hideLoading();d=c(a,f,e,h,k,l);b.setOption(d)}})):console.log("error")}return{initOpt:function(a,c,f,g,h,k){a=$(a);var d=echarts.init(a[0]);a.data({js_type:c,js_fopt:g,js_dopt:h,js_opt:k});b(a,d,c,f,g,h,k);return d},updateData:function(a,c){var d=$(a);b(d,echarts.getInstanceByDom(d[0]),!1,c,!1,!1,!1)}}}();COM_TOOLS.infoTipsFn=function(a,c,b,d){var e={hideTime_:300,showTime_:400,html:!0,imageZoom:!1,placement:"left",trigger:"manual",container:"body",maxHeight:"",maxWidth:"276px",height:"",title:"",content:function(){var a=b?b($(this)):"";/<img[^>]*/.test(a)&&(e.height=e.maxHeight?e.maxHeight:$(window).height()*(/left|right/.test(e.placement)?.5:.4)+"px");return a}};$.extend(e,d||{});e.template='\x3cdiv class\x3d"popover cus-popover-box" role\x3d"tooltip" style\x3d"max-width:'+e.maxWidth+";"+(e.imageZoom?"width:"+e.maxWidth+";":"")+'"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3ch3 class\x3d"popover-title"\x3e\x3c/h3\x3e\x3cdiv class\x3d"popover-content" style\x3d"'+(e.maxHeight?"max-height:"+e.maxHeight+";":"")+'"\x3e\x3c/div\x3e\x3c/div\x3e';e.imageZoom&&COM_TOOLS.requireJsFn(["jqueryZoom"],[],!1);$(a).on("mouseleave",c,function(a){var b=$(this);(a=b.data("show_timer"))&&window.clearTimeout(a);a=window.setTimeout(function(){b.popover("destroy").removeClass("js-mouseove").off("shown.bs.popover")},e.hideTime_);b.data("hide_timer",a);return!1}).on("mouseenter",c,function(a){var b=$(this);(a=b.data("hide_timer"))&&window.clearTimeout(a);b.hasClass("js-mouseove")||(a=window.setTimeout(function(){b.on("inserted.bs.popover",function(){$("#"+b.attr("aria-describedby")).children(".popover-content").css({height:e.height,"max-height":"auto"})}).on("shown.bs.popover",function(){e.imageZoom&&$("#"+b.attr("aria-describedby")).find("img").wrap('\x3cspan class\x3d"img-zoom-box"\x3e\x3c/span\x3e').css("display","block").parent().zoom()});var a=b.addClass("js-mouseove").popover(e).popover("show").attr("aria-describedby");$("#"+a).on("mouseenter",function(a){(a=b.data("hide_timer"))&&window.clearTimeout(a);return!1}).on("mouseleave",function(a){b.popover("destroy").removeClass("js-mouseove").off("shown.bs.popover");return!1})},e.showTime_),b.data("show_timer",a));return!1})};COM_TOOLS.jstree_init=function(a,c){var b="string"==$.type(a)?$("#"+a):a;if(b.data("jstree_init"))return b.data("jstree_init");c="object"==$.type(c)?c:{};var d={},e={core:{dblclick_toggle:!1},themes:{icons:!1}},f={groupName:"",url:!1,ajaxData:!1,ids:[],input_val_obj:$(),input_text_obj:$(),input_val_name:"",input_text_name:"",initCallback:function(){},dataFilter:"",other:{}};$.extend(!0,f,c);var g,h;g=f.input_val_obj.length?f.input_val_obj:"string"==$.type(a)?$("#"+a+"_val"):b.nextAll("input.jstree_init_val:hidden");h=f.input_text_obj.length?f.input_text_obj:"string"==$.type(a)?$("#"+a+"_text"):b.nextAll("input.jstree_init_text:hidden");f.input_val_name&&0==g.length&&(g=$('\x3cinput type\x3d"hidden" name\x3d"'+f.input_val_name+'" /\x3e'),b.after(g));f.input_text_name&&0==h.length&&(h=$('\x3cinput type\x3d"hidden" name\x3d"'+f.input_text_name+'" /\x3e'),b.after(h));"array"==$.type(f.url)?$.extend(!0,e,{core:{data:data}}):f.url&&"string"==$.type(f.url)&&$.extend(!0,e,{core:{data:{url:f.url,data:f.ajaxData,cache:!1}}});$.extend(!0,e,f.other);"object"==$.type(e.core.data)&&e.core.data.url&&(f.groupName&&COM_TOOLS.cache_obj._cus_jstree_cache[f.groupName]&&COM_TOOLS.cache_obj._cus_jstree_cache[f.groupName].length?$.extend(!0,e,{core:{data:COM_TOOLS.cache_obj._cus_jstree_cache[f.groupName]}}):$.extend(!0,e,{core:{data:{url:e.core.data.url,data:e.core.data.data,cache:!1,dataFilter:function(a,b){COM_TOOLS._ajax_jumpToLogin(a);return f.dataFilter&&"function"==$.type(f.dataFilter)?f.dataFilter(a,b):a?0==jQuery.parseJSON(a).isFilterTag?"[]":a:a},success:function(a){f.groupName&&a&&a.length&&(COM_TOOLS.cache_obj._cus_jstree_cache[f.groupName]=a)}}}}));var k=$.Callbacks();$.jstree.reference(b)||(b.jstree(e).on("ready.jstree",function(){var a=$(this).jstree(!0),b=[];"array"==$.type(f.ids)&&f.ids.length?b=f.ids:g.length&&""!=$.trim(g.val())&&(b=g.val().split(","));b.length&&a.select_node(b,!0,!1);"function"==$.type(f.initCallback)&&f.initCallback()}).on("changed.jstree",function(a,b){var c=d.get_selected(!0),e=[],f=[];$.each(c,function(a,b){e.push(b.id);f.push(b.text)});g.length&&g.val(e.join(","));h.length&&h.val(f.join(","));k.fire(e,f,c)}),b.data("jstree_init",d));d.jstree=b.jstree(!0);d.select_node=function(a,b,c){d.jstree.select_node(a,b,c)};d.get_selected=function(a){return d.jstree.get_selected(a)};d.destroy=function(a){d.jstree.destroy(a);b.removeData("jstree_init")};d.changeCallback=function(a){"function"==$.type(a)&&k.add(a)};d.deselect_all=function(a){d.jstree.deselect_all(a)};d.target=b;return d};COM_TOOLS.alert=function(a,c){return layer.msg(a||"",$.extend({zIndex:layer.zIndex},c))};COM_TOOLS.alert2=function(a,c){return layer.msg(a||"",$.extend({zIndex:layer.zIndex},{time:0,btn:[LOCAL_MESSAGE_DATA["platform.plugin.com_btn.confirm"]],btnAlign:"c",shade:.3,shadeClose:!1},c))};COM_TOOLS.confirm=function(a,c,b,d){var e="function"==typeof c;return e&&(d=b,b=c),layer.confirm(a||"",$.extend({zIndex:layer.zIndex,btn:[LOCAL_MESSAGE_DATA["platform.plugin.com_btn.confirm"],LOCAL_MESSAGE_DATA["platform.plugin.com_btn.cancel"]],title:LOCAL_MESSAGE_DATA["platform.plugin.com_label.message"]},e?{}:c),b,d)};COM_TOOLS.requireJsFn=function(a,c,b){var d={loadFile:function(a,b){COM_TOOLS._jsFileList[a].js&&(COM_TOOLS.cache_obj._jsfileArr.push(a),$.ajax({type:"get",url:COM_TOOLS._jsPath+COM_TOOLS._jsFileList[a].js,dataType:"script",cache:!0,success:function(){b&&b()},error:function(){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.1102"])}}));if(COM_TOOLS._jsFileList[a].css&&!d.checkCssIsLoad(COM_TOOLS._jsFileList[a].css)){var c=$("#cus_app_link");0==c.length&&(c=$('head link[rel\x3d"stylesheet"]').filter(function(){return-1!=$(this).attr("href").indexOf("css/style.css")}));c.before($('\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+COM_TOOLS._jsPath.replace("/js/","/css/")+COM_TOOLS._jsFileList[a].css+'"/\x3e'))}},checkCssIsLoad:function(a){return!!$('head link[rel\x3d"stylesheet"]').filter(function(){return a.substring(a.indexOf("css/"))==$(this).attr("href").substring($(this).attr("href").indexOf("css/"))}).length},forCheck:function(a,b){for(var c=0,d=a.length;c<d;c++)COM_TOOLS._jsFileList[a[c]]&&-1===$.inArray(a[c],COM_TOOLS.cache_obj._jsfileArr)&&b&&b(a[c])},ready_check:function(a){for(var b=0,c=a.length;b<c;b++)if(COM_TOOLS._jsFileList[a[b]]&&-1===$.inArray(a[b],COM_TOOLS.cache_obj._jsfileArr))return!1;return!0},fn1:function(){d.forCheck(a,function(e){d.loadFile(e,function(){d.ready_check(a)&&b&&window.setTimeout(function(){COM_TOOLS.initjSDefaultOpt(a.concat(c)||"ALL");b()},4)})})}};"array"===jQuery.type(c)&&0<c.length&&!d.ready_check(c)?d.forCheck(c,function(e){d.loadFile(e,function(){d.ready_check(c)&&("array"===jQuery.type(a)&&0<a.length&&!d.ready_check(a)?d.fn1():b&&b())})}):"array"===jQuery.type(a)&&0<a.length&&!d.ready_check(a)?d.fn1():b&&b()};COM_TOOLS.select2_init=function(a,c,b,d,e){function f(a,b){return void 0!=b.toPinYin?0<=b.toPinYin().indexOf(a.toUpperCase())?!0:0<=b.toUpperCase().indexOf(a.toUpperCase()):0<=b.toUpperCase().indexOf(a.toUpperCase())}var g={};g.select2=$("#"+a);if(g.select2.data("select2_init"))return g.select2.data("select2_init");var h={iscache:!0,multiple:g.select2.prop("multiple")||!1,ispinyin:!1,initValue:g.select2.attr("selectedvalue")||"",drawCallBack:function(){},other:{}};a=g.select2.data()||{};e=$.extend(!0,{},"object"==$.type(c)?c:"array"==$.type(c)&&"object"==$.type(b)?b:"object"==$.type(e)?e:{});e.hasOwnProperty("ispinyi")&&(e.ispinyin=e.ispinyi,delete e.ispinyi);$.extend(!0,h,e);a.opt_url&&(c=a.opt_url,d=b="");a.opt_ajaxtype&&(b=a.opt_ajaxtype);a.opt_ajaxdata&&(d=a.opt_ajaxdata);var k=$.Callbacks(),l=$.Callbacks();g.select2.on("change",function(a){$(this).trigger("focusout.validate").trigger("click.validate");k.fire(a)}).on("select2:select select2:unselect",function(a){l.fire(a.params.data,a)});g.setVal=function(a,b){g.select2.val(a).trigger("change");b?g.select2.trigger("change.select2").trigger("focusout.validate").trigger("click.validate"):g.select2.trigger("change")};g.getVal=function(){return g.select2.val()};g.getSelectedData=function(){return g.select2.select2("data")||[]};g.updateOption=function(a){g.select2.html(a).trigger("change.select2");g.select2.trigger("focusout.validate").trigger("click.validate")};g.changeCallback=function(a){"function"==$.type(a)&&k.add(a)};g.changeCallbackByitem=function(a){"function"==$.type(a)&&l.add(a)};g.destroy=function(){g.select2.select2("destroy");g.select2.removeData("select2_init")};h.ispinyin&&COM_TOOLS.requireJsFn(["cusPinYin"],[],function(){});"string"==$.type(c)&&""!=$.trim(c)?h.iscache?$.ajax({type:b||"get",url:c,data:"function"==$.type(d)?d("",""):"object"==$.type(d)?d:{},cache:!1,dataType:"json",success:function(a){a&&(h.ispinyin?$.fn.select2.amd.require(["select2/compat/matcher"],function(b){g.select2.select2($.extend(!0,{multiple:h.multiple,data:0==a.isFilterTag?[]:a.results,matcher:b(f)},h.other));""!=h.initValue&&g.setVal(h.initValue);h.drawCallBack(!0)}):(g.select2.select2($.extend(!0,{multiple:h.multiple,data:0==a.isFilterTag?[]:a.results},h.other)),""!=h.initValue&&g.setVal(h.initValue),h.drawCallBack()))}}):g.select2.select2($.extend(!0,{multiple:h.multiple,ajax:{url:c,dataType:"json",cache:!1,delay:250,processResults:function(a){return a&&0==a.isFilterTag?{results:[]}:a},data:function(a){return"function"==$.type(d)?d(a.term,a):{q:a.term}}},minimumInputLength:1,placeholder:LOCAL_MESSAGE_DATA["platform.plugin.msg.enterSearch"]},h.other)):"array"==$.type(c)?h.ispinyin?$.fn.select2.amd.require(["select2/compat/matcher"],function(a){g.select2.select2($.extend(!0,{multiple:h.multiple,data:c,matcher:a(f)},h.other));""!=h.initValue&&g.setVal(h.initValue);h.drawCallBack(!0)}):(g.select2.select2($.extend(!0,{multiple:h.multiple,data:c},h.other)),""!=h.initValue&&g.setVal(h.initValue),h.drawCallBack()):h.ispinyin?$.fn.select2.amd.require(["select2/compat/matcher"],function(a){g.select2.select2($.extend(!0,{multiple:h.multiple,matcher:a(f)},h.other));""!=h.initValue&&g.setVal(h.initValue);h.drawCallBack(!0)}):(g.select2.select2($.extend(!0,{multiple:h.multiple},h.other)),""!=h.initValue&&g.setVal(h.initValue),h.drawCallBack());g.select2.data("select2_init",g);return g};COM_TOOLS.fnTabPage=function(a,c,b){var d={};if("string"===jQuery.type(a)&&$("#"+a).length){var e=$("#"+a);if(e.data("inited"))return e.data("inited");var f=e.is("[isiframe]");f&&($("body").addClass("flex-tabpage"),$('\x3cstyle type\x3d"text/css"\x3ehtml, body{height: 100%;} .flex-tabpage .cus-tabmodel-box{padding-right:0;position: absolute;left: 0;top: 0;height: 42px; width: 100%;}.flex-tabpage .tab-content{height: 100%;padding-top: 42px;}.flex-tabpage .tab-content .tab-pane{height:100%;}\x3c/style\x3e').appendTo("head"));var g=e.find('a[data-toggle\x3d"tab"]').on("shown.bs.tab",function(a,d){var e=$(a.target),h=e.attr("aria-controls")||t.attr("href").replace("#",""),g=$.trim(e.data("itemurl")),k=$("#"+h),p=e.data("itemcallback");console.log("##-",1);if(g){if(0<k.length)if(f){console.log("##-",2);var n=k.children("iframe");n.length?e.is("[data-isreload\x3dtrue]")&&(COM_TOOLS.loadingOverlay.open(k),n.addClass("layui-layer-load").attr("src",n.attr("dsrc"))):(COM_TOOLS.loadingOverlay.open(k),n=$('\x3ciframe scrolling\x3d"auto" allowtransparency\x3d"true" style\x3d"height:100%;width:100%;display:block;" id\x3d"tabmodl_'+h+'" name\x3d"tabmodl_'+h+'" frameborder\x3d"0" src\x3d"'+g+'" dsrc\x3d"'+g+'"\x3e\x3c/iframe\x3e'),n.on("load",function(){COM_TOOLS.loadingOverlay.close(k);p&&p()}),k.html(n));console.log("##-",3)}else if(e.is("[data-isreload\x3dtrue]")||"API"==d||10>$.trim(k.html()).length)COM_TOOLS.private_obj_._curTabPageid=h,c&&c(),k.load(g,function(){p&&COM_TOOLS.private_obj_[p]();b&&b();COM_TOOLS.fnInitInputHelpVal()})}else p&&COM_TOOLS.private_obj_[p]();!f&&$(window).trigger("resize")});$.trim(g.eq(0).data("itemurl"))&&g.eq(0).trigger("shown.bs.tab",["API"]);d.reloadOneTab=function(b,c){if(b){var d=$("#"+a+' a[data-toggle\x3d"tab"][href\x3d"'+b+'"]');c?(d.tab("show"),d.is("[data-isreload\x3dtrue]")||$.trim(d.data("itemurl"))&&d.trigger("shown.bs.tab",["API"])):$.trim(d.data("itemurl"))&&d.trigger("shown.bs.tab",["API"])}};e.data("inited",d)}return d};COM_TOOLS._view={cusHighSearch:function(a){$("#"+a).on("click",".js-highsearch-btn",function(){var a=$(this);a.data("isload")||a.siblings(".js-moreSearchBox").load(a.data("itemurl"),function(){a.data("isload",!0)})}).find(".js-moreSearchBox").click(function(){return!1})},noviceGuide:'\x3cdiv class\x3d"popover cus-step-popover-box" role\x3d"tooltip"\x3e \x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e \x3ch3 class\x3d"popover-title"\x3e\x3c/h3\x3e \x3cdiv class\x3d"popover-content"\x3e\x3c/div\x3e\x3cdiv class\x3d"popover-navigation"\x3e \x3cdiv class\x3d"btn-group"\x3e \x3cbutton class\x3d"btn btn-sm btn-default" data-role\x3d"prev"\x3e\x26laquo; '+LOCAL_MESSAGE_DATA["platform.plugin.msg.prevStep"]+'\x3c/button\x3e \x3cbutton class\x3d"btn btn-sm btn-default" data-role\x3d"next"\x3e'+LOCAL_MESSAGE_DATA["platform.plugin.msg.nextStep"]+' \x26raquo;\x3c/button\x3e\x3cbutton class\x3d"btn btn-sm btn-default" data-role\x3d"pause-resume" data-pause-text\x3d"Pause" data-resume-text\x3d"Resume"\x3e'+LOCAL_MESSAGE_DATA["platform.plugin.msg.pause"]+'\x3c/button\x3e \x3c/div\x3e \x3cbutton class\x3d"btn btn-sm btn-default" data-role\x3d"end"\x3e'+LOCAL_MESSAGE_DATA["platform.plugin.msg.end"]+"\x3c/button\x3e \x3c/div\x3e \x3c/div\x3e",DT_colShowBar:function(a,c){var b=$("#"+c);!b.length||b.hasClass("dropdown-toggle")||b.is("[data-toggle]")||($('\x3cdiv class\x3d"btn-group md-dropdown-ll0328"\x3e\x3c/div\x3e'),b.addClass("dropdown-toggle").attr("data-toggle",dropdown))},cusPWD:function(a,c){var b=$("#"+a);if(b.length){if(0!=c){var d=$('\x3cdiv class\x3d"js-temp-html"\x3e\x3c/div\x3e');b.before(d);var e=$('\x3cdiv class\x3d"input-group input-group-sm js-pwd-parent"\x3e \r\n                \x3cspan class\x3d"js-replace-dom"\x3e\x3c/span\x3e \r\n                \x3cspan class\x3d"input-group-btn"\x3e\x3cbutton class\x3d"btn btn-primary js-pwd-btn" type\x3d"button"\x3e\x3ci class\x3d"glyphicon glyphicon-eye-close"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/span\x3e \r\n                \x3c/div\x3e');b.attr("type","password");e.find(".js-replace-dom").replaceWith(b);d.replaceWith(e)}var f=b.closest(".js-pwd-parent");f.on("click.pwd",".js-pwd-btn",function(a){a=f.find(".glyphicon");b.is("[type\x3dpassword]")?(b.attr("type","text"),a.removeClass("glyphicon-eye-close").addClass("glyphicon-eye-open")):(b.attr("type","password"),a.removeClass("glyphicon-eye-open").addClass("glyphicon-eye-close"))})}}};COM_TOOLS._view.cus_dropdown=function(a,c){c=c||{};c=$.extend(!0,{placement:"bottom",container:"body",autoPlace:"auto",pull:"left",height:"auto",width:"",autoDestroy:!1,maxWidth:"none",maxHeight:parseInt(.4*($(window).height()||500)),content:"",template:'\x3cdiv class\x3d"cus-dropdown-plugin"\x3e\x3cdiv class\x3d"drop-cbox"\x3e\x3cdiv class\x3d"drop-cbox-overflow"\x3e\x3cdiv class\x3d"drop-cbox-cont"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'},c);var b={},d="string"==$.type(a)?$("#"+a):a.selector?a:$(),e=$(c.template);if(0==d.length)return console.error("\u672a\u627e\u5230\u64cd\u4f5c\u5bf9\u8c61"),!1;if(d.data("cus_dropdown"))return d.data("cus_dropdown");b.show=function(){if(d.attr("cus-cus_dropdown"))return d.trigger("inserted.cus_dropdown"),e.show(),d.trigger("shown.cus_dropdown"),!1;var a=c.placement,b=COM_TOOLS.get_UID("cus_dropdown"),h=COM_TOOLS.getPosition(d);e.attr("id",b).find(".drop-cbox-cont").html(c.content);d.attr("cus-cus_dropdown",b);e.detach().css({top:0,left:0,height:c.height||"auto",width:c.width||h.width||"auto",maxWidth:c.maxWidth||"none",display:"block"}).addClass(a);c.container?e.appendTo(c.container):e.insertAfter(d);d.trigger("inserted.cus_dropdown");var b=e.outerWidth(),k=e.outerHeight();if(c.autoPlace){var l=a,r=COM_TOOLS.getPosition($("body")),a="bottom"==a&&h.bottom+k>r.bottom?a.replace("bottom","top"):"top"==a&&h.top-k<r.top?a.replace("top","bottom"):a;e.removeClass(l).addClass(a)}e.css({top:Math.round("top"==a?h.top-k:h.top+h.height),left:Math.round("left"==c.pull?h.left:h.right-b)});d.trigger("shown.cus_dropdown")};b.hide=function(a,b){a?((b?$("#"+b.attr("cus-cus_dropdown")):e).detach(),(b||d).removeAttr("cus-cus_dropdown").trigger("hidden.cus_dropdown")):(b?$("#"+b.attr("cus-cus_dropdown")):e).hide()};b.getdropbox=function(){return e};b.autoDestroy=c.autoDestroy;d.data("cus_dropdown",b);d.on("click.cus_dropdown",function(a){e.is(":hidden")?($(document).one("mouseup.cus_dropdown_api",function(a){a=$(a.target);if(a.closest(d).length||a.closest(e).length)return!1;b.hide(c.autoDestroy)}),b.show()):($(document).off("mouseup.cus_dropdown_api"),b.hide(c.autoDestroy))});e.on("mouseup.cus_dropdown_api",function(){return!1});return b};COM_TOOLS._view.cus_drop_jstree=function(a,c,b){b=b||{};b=$.extend(!0,{wrapBoxId:"",hasSearch:!0,hasPinyin:!1,url:!1,data:!1,groupName:"",jstree:{},dropdown:{autoDestroy:!0}},b);var d="string"==$.type(a)?$("#"+a):a.selector?a:$(),e="string"==$.type(c)?$("#"+c):c.selector?c:$();if(!d.length||!e.length)return console.error("\u672a\u627e\u5230\u64cd\u4f5c\u5bf9\u8c61"),!1;var f={};a=b.wrapBoxId?"string"==$.type(b.wrapBoxId)?$("#"+b.wrapBoxId):b.wrapBoxId.selector?b.wrapBoxId:d:d;if(a.data("cus_drop_jstree"))return console.error("\u4e0d\u80fd\u91cd\u590d\u521d\u59cb\u5316"),a.data("cus_drop_jstree");b.hasPinyin&&COM_TOOLS.requireJsFn(["cusPinYin"]);var g=COM_TOOLS._view.cus_dropdown(a,$.extend(!0,{},b.dropdown,{content:(b.hasSearch?'\x3cinput class\x3d"jstree-searchbox form-control input-sm"/\x3e':"")+'\x3cdiv class\x3d"js-dy-jstree"\x3e\x3c/div\x3e'}));a.on("shown.cus_dropdown",function(){var a={checkbox:{three_state:!1},core:{dblclick_toggle:!1,themes:{icons:!1},data:{url:b.url||!1,data:b.data||!1}},search:{show_only_matches:!0,show_only_matches_children:!0,search_callback:function(a,c){var d;d=c.text;d=b.hasPinyin&&void 0!=d.toPinYin?0<=d.toPinYin().indexOf(a.toUpperCase())?!0:0<=d.toUpperCase().indexOf(a.toUpperCase()):0<=d.toUpperCase().indexOf(a.toUpperCase());return d}},plugins:["checkbox","search"]};$.extend(!0,a,b.jstree);var c=g.getdropbox(),l=COM_TOOLS.jstree_init(c.find(".js-dy-jstree"),{groupName:b.groupName,input_text_obj:d,input_val_obj:e,other:a,initCallback:function(){if(b.hasSearch){var a=!1,d=c.find(".jstree-searchbox");d.keyup(function(){a&&clearTimeout(a);a=setTimeout(function(){var a=$.trim(d.val());l.jstree.search(a)},250)})}}});f.jstree_api=l});f.show=g.show;f.hide=function(){g.hide(!0)};f.target=a;a.data("cus_drop_jstree",f);return f};COM_TOOLS._view.cusFileUpload=function(a,c,b){function d(a){var b=null;void 0!=window.createObjectURL?b=window.createObjectURL(a):void 0!=window.URL?b=window.URL.createObjectURL(a):void 0!=window.webkitURL&&(b=window.webkitURL.createObjectURL(a));return b}var e=$("#"+a);if(!e.length||"inited"==e.data("cusFileUpload"))return!1;var f=e.is("button")?"btn":e.is("img")?"img":!1,g=0,h="";b=b||{};"object"==typeof c&&(b=c);if(e.hasClass("js-dy-creation")){var k=e.attr("id"),l=$('\x3cdiv class\x3d"js-temp-html"\x3e\x3c/div\x3e');e.before(l);if("btn"==f){e.addClass("js-judge-dom");e.data("fpath")&&(h=e.data("fpath"),b.isname=!0);var r='\x3cspan class\x3d"js-replace-dom"\x3e\x3c/span\x3e'}else"img"==f&&(g=e.attr("height"),e.attr("src")&&"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMvaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhERUVCNjBFMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhERUVCNjBEMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2NEM3RjlCMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ2NEM3RjlDMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgICAgICAgICAgMCAgIDBAMCAgMEBQQEBAQEBQYFBQUFBQUGBgcHCAcHBgkJCgoJCQwMDAwMDAwMDAwMDAwMDAEDAwMFBAUJBgYJDQsJCw0PDg4ODg8PDAwMDAwPDwwMDAwMDA8MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAKABGAwERAAIRAQMRAf/EAHAAAAEEAgMAAAAAAAAAAAAAAAAFBgcIAgMBBAkBAQAAAAAAAAAAAAAAAAAAAAAQAAIBBAEDAgQEBgMAAAAAAAECAwARBAUGITESQWFRcRMHIkJiMzJy0xSkFVUWFxEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9FKAoNbTRI6xvKiyN1WMsAx+Q70GygKAoCgKAoCg7urwG2+21OnjlMD7XKTHGQACUUgs7C9xcIrW97UFtMPhvF8DX/6yHR4b4jL4zLNEsrS3Fi0juCzE+pJoK28647BxjkcuBgkjXZcCZeDCzFmiDMyPFc9Sqlbrf0NvSgaFAe1AUBQFAUGyKafGmx8vElMGXhypPiTgX8JIyGU29R0sR6jpQTxh/ejXHCDbDSZibNVs0OMY3hkb1KO7qQP5gD86CGd7vM7km3ytzsFWKbICRQYsZLJBBHfwjDEDyN2JJt1J+FqBHYsAAqNNI7LHFCnV5JHIVEUepZiAPegmXdfbKXX8HxMrHT+45Lqw2Zt/pC5yUcXmgWwuREP2/j42/MaCG1ZXVXQh0dQysOoIIuCPnQc0BQFAUCpptJtOQ5x1unxhk5Kx/VnZ28IoY+tmkcA+PkRZRa5PsCQCY6yxSzY2RC+NlYshiysWUeMkUi91Yeh7exHUdKCVvtRxc7PaPyTMjvr9M7RaxW7S5lrPJ7iEHxH6ifVaCyPf5UFS+f8AF/8Aq2/kGNH4abcmTJ1lh+GOS/lNj+3iT5L+k2H8NAy6AoCgzijE00ML5CYaTOEkzZFaRIVPeRkS7Nb4Dufh3oLFcZ5J9t+K6xNbrdsTc/Uy8uTGyDLkSkWaSVhELk+g7AWAAAoGrzyfgfK1TO13IU1e+jCxHOOJktHLBf8AEsqCL8RUElD3B6diRQPnUc1+3uj1mFqcDbGLDwIlihU4+SSQvdmP0urMepPqaBS/9K4T/wA1/jZP9Kga/MeTcE5VosvWPuxFlC0+tyji5J+jkx9Y3/a7flYeqkigrshZkRnX6bsoLx3vY+ouO9BnQf/Z"!=e.attr("src")?h=e.attr("src"):e.attr("src","data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMvaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhERUVCNjBFMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhERUVCNjBEMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2NEM3RjlCMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ2NEM3RjlDMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgICAgICAgICAgMCAgIDBAMCAgMEBQQEBAQEBQYFBQUFBQUGBgcHCAcHBgkJCgoJCQwMDAwMDAwMDAwMDAwMDAEDAwMFBAUJBgYJDQsJCw0PDg4ODg8PDAwMDAwPDwwMDAwMDA8MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAKABGAwERAAIRAQMRAf/EAHAAAAEEAgMAAAAAAAAAAAAAAAAFBgcIAgMBBAkBAQAAAAAAAAAAAAAAAAAAAAAQAAIBBAEDAgQEBgMAAAAAAAECAwARBAUGITESQWFRcRMHIkJiMzJy0xSkFVUWFxEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9FKAoNbTRI6xvKiyN1WMsAx+Q70GygKAoCgKAoCg7urwG2+21OnjlMD7XKTHGQACUUgs7C9xcIrW97UFtMPhvF8DX/6yHR4b4jL4zLNEsrS3Fi0juCzE+pJoK28647BxjkcuBgkjXZcCZeDCzFmiDMyPFc9Sqlbrf0NvSgaFAe1AUBQFAUGyKafGmx8vElMGXhypPiTgX8JIyGU29R0sR6jpQTxh/ejXHCDbDSZibNVs0OMY3hkb1KO7qQP5gD86CGd7vM7km3ytzsFWKbICRQYsZLJBBHfwjDEDyN2JJt1J+FqBHYsAAqNNI7LHFCnV5JHIVEUepZiAPegmXdfbKXX8HxMrHT+45Lqw2Zt/pC5yUcXmgWwuREP2/j42/MaCG1ZXVXQh0dQysOoIIuCPnQc0BQFAUCpptJtOQ5x1unxhk5Kx/VnZ28IoY+tmkcA+PkRZRa5PsCQCY6yxSzY2RC+NlYshiysWUeMkUi91Yeh7exHUdKCVvtRxc7PaPyTMjvr9M7RaxW7S5lrPJ7iEHxH6ifVaCyPf5UFS+f8AF/8Aq2/kGNH4abcmTJ1lh+GOS/lNj+3iT5L+k2H8NAy6AoCgzijE00ML5CYaTOEkzZFaRIVPeRkS7Nb4Dufh3oLFcZ5J9t+K6xNbrdsTc/Uy8uTGyDLkSkWaSVhELk+g7AWAAAoGrzyfgfK1TO13IU1e+jCxHOOJktHLBf8AEsqCL8RUElD3B6diRQPnUc1+3uj1mFqcDbGLDwIlihU4+SSQvdmP0urMepPqaBS/9K4T/wA1/jZP9Kga/MeTcE5VosvWPuxFlC0+tyji5J+jkx9Y3/a7flYeqkigrshZkRnX6bsoLx3vY+ouO9BnQf/Z"),r='\x3cdiv class\x3d"js-judge-dom show-mask"\x3e\x3cspan class\x3d"js-replace-dom"\x3e\x3c/span\x3e\x3cdiv class\x3d"cus-img-mask" style\x3d"line-height: '+g+'px;"\x3e\x3cspan class\x3d"glyphicon glyphicon-open"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e');a="object"!=typeof c&&c||a+"_hide";var q=$('\x3cdiv id\x3d"'+("js_is"+f+"_"+k)+'" class\x3d"cus-single-upload"\x3e\x3cdiv class\x3d"main-area '+("is-"+f)+'"\x3e\x3cinput id\x3d"'+a+'" name\x3d"'+a+'" '+(1==b.required?"required":"")+' class\x3d"hide-inp-validate" value\x3d"'+h+'" type\x3d"text"/\x3e\x3cinput class\x3d"js-inp-files hidden" type\x3d"file"/\x3e'+r+'\x3c/div\x3e\x3cspan class\x3d"file-name"\x3e\x3c/span\x3e\x3c/div\x3e');q.find(".js-replace-dom").replaceWith(e);l.replaceWith(q);"btn"==f&&h&&b.isname&&(k="",k=/targetName/.test(h)?h.split("targetName\x3d")[h.split("targetName\x3d").length-1]:h.split("/")[h.split("/").length-1],q.find(".file-name").attr("title",k).html('\x3ca href\x3d"'+h+'"\x3e'+k+"\x3c/a\x3e"))}else return console.error("dom\u7ed3\u6784\u9519\u8bef\uff0c\u7f3a\u5c11 js-dy-creation \u7684class\u3002"),!1;e.data("cusFileUpload","inited");var m=$.extend({apitype:"H5",serve_url:COM_DEFAULT._fileServeOpt.fileUploadUrl,serve_name:"upload",isname:!1,uptype:"",filetype:[],filesize:("btn"==f?COM_DEFAULT._fileServeOpt.defaultFileSize:COM_DEFAULT._fileServeOpt.imgFileSize)||5120},b);m.filetype.length||(m.filetype="btn"==f?COM_DEFAULT._fileServeOpt.fileType:"img"==f?COM_DEFAULT._fileServeOpt.imgType:[]);var p=q.find(".main-area"),n=q.find(".js-judge-dom");q.off("click.jude-dom change.inp-files").on("click.jude-dom",".js-judge-dom",function(){if(!m.serve_url||!m.serve_name)return COM_TOOLS.alert2(TEDU_MESSAGE.get("platform.plugin.com_msg.opt_lack")),!1;p.find(".tip-icon").length&&p.find(".tip-icon").remove();return q.find(".js-inp-files").click()}).on("change.inp-files",".js-inp-files",function(){var a=this.files[0];this.value="";if(a){var b=1024*m.filesize,c=a.name.split(".")[a.name.split(".").length-1],e=$('\x3ci class\x3d"cus-progress-bar"\x3e\x3c/i\x3e'),h=$('\x3cspan class\x3d"tip-icon success glyphicon glyphicon glyphicon-ok-circle"\x3e\x3c/span\x3e'),k=$('\x3cspan class\x3d"tip-icon error glyphicon glyphicon-remove-circle"\x3e\x3c/span\x3e');m.isname&&q.find(".file-name").html("").html(a.name);if(b<a.size)return COM_TOOLS.alert2(TEDU_MESSAGE.get("platform.plugin.com_msg.size_exceed",m.filesize)),!1;if(!(new RegExp("^("+m.filetype.join("|")+")$","i")).test(c))return COM_TOOLS.alert2(TEDU_MESSAGE.get("platform.plugin.com_msg.type_err",m.filetype.join("|"))),!1;b=new FormData;b.append(m.serve_name,a);if(!$.isEmptyObject(m.uptype))for(var l in m.uptype)b.append(l,m.uptype[l]);"img"==f&&n.find("img").attr("src",d(a));$.ajax({type:"post",dataType:"json",url:m.serve_url,data:b,processData:!1,contentType:!1,cache:!1,xhr:function(){var a=$.ajaxSettings.xhr();a.upload.onprogress=function(a){a.lengthComputable&&(a=Math.floor(a.loaded/a.total*100),"btn"==f?(n.find(".cus-progress-bar").length||(COM_TOOLS.loadingBtn.open(n),n.append(e)),e.css("width",a+"%")):"img"==f&&(n.parent().find(".cus-progress-bar").length||(e.css("line-height",g+"px"),n.parent().append(e)),e.text(a+"%").css("width",a+"%")))};return a},complete:function(){"btn"==f&&COM_TOOLS.loadingBtn.close(n);e.remove()},success:function(a){1==a.state?(COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.up_success"]),p.append(h),q.find(".hide-inp-validate").val(a.path),m.required&&$.validator&&q.find(".hide-inp-validate").trigger("focusout.validate").trigger("click.validate")):0==a.state&&(COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.up_error"]),p.append(k));m.success&&m.success(a,q)},error:function(){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.up_error"]);p.append(k)}})}})};COM_TOOLS._view.cusPopover=function(a,c,b,d){var e={container:"body",placement:"bottom",content:"",trigger:"click",width:"",html:!0,title:'\x3cbutton type\x3d"btn" class\x3d"btn btn-warning btn-sm cus-pop-close" onclick\x3d"javascript:$(\'#'+a+"').trigger('click')\"\x3e\x3ci class\x3d\"glyphicon glyphicon-chevron-up\"\x3e\x3c/i\x3e\x3c/button\x3e"},f="",g="";"object"==$.type(c)&&(f=$(c.content),c.content=f.html(),$.extend(e,c));$("#"+a).popover({html:e.html,container:e.container,placement:e.placement,content:e.content,trigger:e.trigger,title:e.title,template:'\x3cdiv class\x3d"popover cus-popover-box2" role\x3d"tooltip"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3ch3 class\x3d"popover-title text-right"\x3e\x3c/h3\x3e\x3cdiv class\x3d"popover-content"\x3e\x3c/div\x3e\x3c/div\x3e'}).on("show.bs.popover",function(){$(this).find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up");g=$("\x3cdiv\x3e").hide().insertBefore(f);f.remove()}).on("shown.bs.popover",function(){"function"==typeof b&&b(a)}).on("hidden.bs.popover",function(){$(this).find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down");g.replaceWith(f);"function"==typeof d&&d(a)}).on("inserted.bs.popover",function(){e.width&&$("#"+$(this).attr("aria-describedby")).css({width:e.width,"max-width":"none"})})};COM_TOOLS._view.setInputStatus=function(a,c,b){if(a&&(a="string"===typeof a?$(a):a,0<a.length)){var d=a.parent(),e=d.hasClass("input-group"),f=e?d.next(".form-control-feedback"):a.next(".form-control-feedback"),g=e?d.parent():d;g.removeClass("has-success has-warning has-error has-feedback");f.length&&f.remove();f="";switch(c){case "success":g.addClass("has-feedback has-success");f='\x3cspan class\x3d"glyphicon glyphicon-ok form-control-feedback "\x3e\x3c/span\x3e';break;case "warning":g.addClass("has-feedback has-warning");f='\x3cspan class\x3d"glyphicon glyphicon-warning-sign form-control-feedback "\x3e\x3c/span\x3e';break;case "error":g.addClass("has-feedback has-error");f='\x3cspan class\x3d"glyphicon glyphicon-remove form-control-feedback "\x3e\x3c/span\x3e';break;default:f=""}b&&(f="");if(f)if(e){c=$(f);a=a.nextAll(".input-group-btn, .input-group-addon");if(a.length){var h=0;$.each(a,function(a,b){h+=$(b).outerWidth()});c.css("right",h+15+"px")}d.after(c)}else a.after($(f))}};COM_TOOLS._view.tabScrollFn={dom_:{ul_:$(),overBox_:$()},sumWidth:function(a){var c=0;$(a).each(function(){c+=$(this).outerWidth()});return c},scrollTabLeft:function(){var a=Math.abs(parseInt(this.dom_.ul_.css("margin-left"))),c=this.dom_.overBox_.width(),b=0;if(this.dom_.ul_.width()<c)return!1;for(var d=this.dom_.ul_.find("li:first"),e=0;e+$(d).outerWidth()<=a;)e+=$(d).outerWidth(),d=$(d).next();e=0;if(this.sumWidth($(d).prevAll())>c){for(;e+$(d).outerWidth()<c&&0<d.length;)e+=$(d).outerWidth(),d=$(d).prev();b=this.sumWidth($(d).prevAll())}this.dom_.ul_.animate({marginLeft:0-b+"px"},"fast")},scrollTabRight:function(){var a=Math.abs(parseInt(this.dom_.ul_.css("margin-left"))),c=this.dom_.overBox_.width();if(this.dom_.ul_.width()<c)return!1;for(var b=this.dom_.ul_.find("li:first"),d=0;d+$(b).outerWidth()<=a;)d+=$(b).outerWidth(),b=$(b).next();if(d<this.dom_.ul_.outerWidth()-c)for(d=0;d+$(b).outerWidth()<c&&0<b.length;)d+=$(b).outerWidth(),b=$(b).next();a=this.sumWidth($(b).prevAll());0<a&&this.dom_.ul_.animate({marginLeft:0-a+"px"},"fast")},scrollToTab:function(a){var c=this.sumWidth($(a).prevAll()),b=this.sumWidth($(a).nextAll()),d=this.dom_.overBox_.width(),e=0;if(this.dom_.ul_.outerWidth()<d)e=0;else if(b<=d-($(a).outerWidth()+$(a).next().outerWidth())){if(d-$(a).next().outerWidth()>b)for(e=c;e-$(a).outerWidth()>=this.dom_.ul_.outerWidth()-d;)e-=$(a).prev().outerWidth(),a=$(a).prev()}else c>d-($(a).outerWidth()+$(a).prev().outerWidth())&&(e=c-$(a).prev().outerWidth());this.dom_.ul_.animate({marginLeft:0-e+"px"},"fast")},init:function(a){a=$(a);var c=this;this.dom_={ul_:a.find(".tab-list-ul"),overBox_:a.find(".tab-list-overflow")};a.on("click",".tab-list-ul li",function(){c.scrollToTab($(this))}).on("click",".tab-left-btn",function(){c.scrollTabLeft()}).on("click",".tab-right-btn",function(){c.scrollTabRight()})}};COM_TOOLS._model={};COM_TOOLS._model._orgModel_=function(a){var c={};a="object"==$.type(a)?a:{};var b={tree_url:COM_DEFAULT._orgTreeOpt.treeUrl,search_url:COM_DEFAULT._orgTreeOpt.searchUrl,type:"1",only_sel_people:!1,cb:null,max_num:-1};$.extend(!0,b,a);c._openModel=function(a,c){function d(a){return $('\x3cdiv title\x3d"'+a.path+'" data-id_\x3d"'+a.id+'" class\x3d"item-xxw1121 '+("0"==a.hasauth?"nohasauth":"0"==a.dtype&&"2"==a.isexternal?"this-outer-org":"")+' clearfix"\x3e\x3cspan class\x3d"iconx"\x3e\x3ci class\x3d"'+("1"==a.dtype?"glyphicon glyphicon-user":"glyphicon glyphicon-folder-close")+'"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"name-xxw"\x3e'+a.text+'\x3c/span\x3e\x3cspan class\x3d"pull-right del-node-xxw"\x3e\x3ci class\x3d"glyphicon glyphicon-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e').data(a)}function e(){q.jstree({checkbox:{visible:!1,three_state:!1},core:{themes:{dots:!1},dblclick_toggle:!1,check_callback:!0,data:{url:b.tree_url,data:function(a){return{parentId:a.id,type:b.type}},dataFilter:function(c){COM_TOOLS._ajax_jumpToLogin(c);c=$.parseJSON(c);$.each(c,function(c,d){var e={};d.type=String(d.type);d.dtype=d.type;"0"==d.type&&"2"==d.isexternal&&(d.type="2");e.disabled=0==d.hasauth?!0:!1;!0===b.only_sel_people&&"1"==b.type&&"1"!=d.type&&(e.disabled=!0);$.each(a,function(a,b){if(d.code===b.code)return e.selected=!0,!1});d.state=e});return JSON.stringify(c)}}},types:{1:{icon:"glyphicon glyphicon-user"},0:{icon:"glyphicon glyphicon-folder-close"},2:{icon:"glyphicon glyphicon-folder-close this-outer-org"}},plugins:["checkbox","types","wholerow"]}).on("ready.jstree",function(){k=$(this).jstree(!0);if(k.get_node(0)){var a=k.get_node(0).children[0];a&&k.open_node(a)}}).on("load_node.jstree",function(a,b){}).on("changed.jstree",function(b,c){var e=$(this).jstree(!0);if("deselect_node"==c.action||"select_node"==c.action){var f=c.node;e.is_selected(f.id)?(e={},$.extend(!0,e,f.original),r.append(d(e)),a.push(e)):r.find(".item-xxw1121[data-id_\x3d"+f.id+"] .del-node-xxw").trigger("click")}})}a=a||[];var h=COM_TOOLS.get_UID("orgjtree_"),k,l=$('\x3cdiv style\x3d"display: none;" class\x3d"cus-orgjtree-wrap" id\x3d"'+h+'"\x3e\x3cdiv class\x3d"select-treelist-xxw"\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cdiv class\x3d"left-cont pull-left"\x3e\x3cdiv class\x3d"search-box-xxw form-inline"\x3e\x3ci class\x3d"glyphicon glyphicon-search icon1"\x3e\x3c/i\x3e\x3cinput type\x3d"text" class\x3d"form-control input-sm js-orgtree-searchbtn" placeholder\x3d"\u641c\u7d22\uff1a\u540d\u79f0\u3001\u62fc\u97f3\u3001\u90ae\u7bb1"\x3e\x3ci class\x3d"glyphicon glyphicon-remove-circle icon2 js-delinp"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"tree-cont js-tree-cont-xxw"\x3e\x3cdiv class\x3d"js-orgtree-box"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right-cont pull-left"\x3e\x3cdiv class\x3d"tit"\x3e\u5df2\u9009\u90e8\u95e8\u3001\u6210\u5458\x3c/div\x3e\x3cdiv class\x3d"sel-boxpar-xxw"\x3e\x3cdiv class\x3d"sel-box-xxw"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"search-list-xxw"\x3e\x3cdiv class\x3d"search-cont"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-box-xxw clearfix"\x3e\x3cdiv class\x3d"pull-left t-org-style"\x3e\x3ci class\x3d"glyphicon glyphicon-info-sign"\x3e\x3c/i\x3e \x3cspan\x3e\u5185\u90e8\u7ec4\u7ec7\uff08\x3ci class\x3d"glyphicon glyphicon-folder-close"\x3e\x3c/i\x3e\uff09\x3c/span\x3e\x3cspan\x3e\u5916\u90e8\u7ec4\u7ec7\uff08\x3ci class\x3d"glyphicon glyphicon-folder-close this-outer-org"\x3e\x3c/i\x3e\uff09\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"pull-right"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-success btn-sm js-submitbtn" style\x3d"margin-right: 20px;"\x3e\u786e\u8ba4\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-sm btn-default js-canelbtn"\x3e\u53d6\u6d88\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),r=l.find(".sel-box-xxw"),q=l.find(".js-orgtree-box"),m=l.find(".js-orgtree-searchbtn"),h=l.find(".js-submitbtn"),p=l.find(".js-canelbtn");cumCheckPwin(parent).$("body").append(l);var n=cumParentWinModal("\u8bbe\u7f6e\u8303\u56f4",l,{type:1,ismax:!1,area:["640px","530px"],end:function(){l.remove()},success:function(b,c){m.val("");r.html("");q.jstree(!0)||e();0<a.length&&COM_TOOLS.ajaxFn({url:COM_DEFAULT._orgTreeOpt.getDataUrl,type:"get",data:{param:JSON.stringify(a)},success:function(b){b&&1==b.code&&(a=b=b.data,$.each(b,function(a,b){b.dtype=b.type;r.append(d(b))}))}})}});l.on("click",".del-node-xxw",function(){var b=$(this).closest(".item-xxw1121"),c=b.data("id_"),d=-1;$.each(a,function(a,b){if(b.id==c)return d=a,!1});0<=d&&a.splice(d,1);b.remove();k.get_node(c)&&k.deselect_node(c,!0)});l.on("click",".js-search-item",function(){var a=$(this),b=a.data("id");0< !r.find(".item-xxw1121[data-id_\x3d"+b+"]").length&&(r.append(d(a.data()||{})),k.get_node(b)&&k.select_node(b,!0,!1));l.find(".search-list-xxw").hide();m.val("")});m.keypress(function(a){13==a.keyCode&&(a=$.trim($(this).val()),1<=a.length&&$.get(b.search_url,{keyword:a,type:b.type},function(a){if(a){var b="";a.person&&0<a.person.length&&(b+='\x3cdiv class\x3d"search-list-box"\x3e\x3cdiv class\x3d"tit"\x3e\u4eba\u5458\x3c/div\x3e\x3cdiv class\x3d"cont js-person"\x3e',$.each(a.person,function(a,c){b+='\x3cp class\x3d"search-item clearfix js-search-item" title\x3d"'+c.path+'" data-code\x3d"'+c.code+'" data-path\x3d"'+c.path+'" data-isexternal\x3d"'+c.isexternal+'" data-dtype\x3d"'+c.type+'" data-text\x3d"'+c.text+'" data-id\x3d"'+c.id+'"\x3e\x3cspan\x3e'+c.text+'\x3c/span\x3e\x3cspan class\x3d"pull-right"\x3e'+c.department+"\x3c/span\x3e\x3c/p\x3e"}),b+="\x3c/div\x3e\x3c/div\x3e");a.department&&0<a.department.length&&(b+='\x3cdiv class\x3d"search-list-box"\x3e\x3cdiv class\x3d"tit"\x3e\u90e8\u95e8\x3c/div\x3e\x3cdiv class\x3d"cont"\x3e',$.each(a.department,function(a,c){b+='\x3cp class\x3d"search-item clearfix js-search-item '+("2"==c.isexternal?"this-outer-org":"")+'" title\x3d"'+c.path+'" data-code\x3d"'+c.code+'" data-path\x3d"'+c.path+'" data-isexternal\x3d"'+c.isexternal+'" data-dtype\x3d"'+c.type+'" data-text\x3d"'+c.text+'" data-id\x3d"'+c.id+'"\x3e\x3ci class\x3d"iconx  glyphicon glyphicon-folder-close"\x3e\x3c/i\x3e\x3cspan\x3e'+c.text+"\x3c/span\x3e\x3c/p\x3e"}),b+="\x3c/div\x3e\x3c/div\x3e");b?l.find(".search-cont").html(b):l.find(".search-cont").html('\x3cdiv class\x3d"tit"\x3e\u65e0\u7ed3\u679c\x3c/div\x3e');l.find(".search-list-xxw").show()}}))});h.click(function(){var a=[],d=[];r.find(".item-xxw1121").each(function(b,c){var e=$(this).data();a.push({code:e.code,type:e.dtype});d.push({code:e.code,type:e.dtype,path:e.path,isexternal:e.isexternal,text:e.text})});if(0<b.max_num&&a.length>b.max_num)return cumCheckPwin(parent).COM_TOOLS.alert("\u6700\u591a\u9009\u62e9"+b.max_num+"\u4e2a"),!1;"function"==$.type(b.cb)&&b.cb(a);"function"==$.type(c)&&c(a,d);cumCloseWin(n,!1,parent)});p.click(function(){cumCloseWin(n,!1,parent)});l.find(".js-delinp").click(function(){m.val("");l.find(".search-list-xxw").hide()})};c._makeSelWrap=function(){return $('\x3cdiv class\x3d"orgtree-selectedlist-box"\x3e\x3cul class\x3d"orgtree-item-list clearfix"\x3e\x3c/ul\x3e\x3c/div\x3e')};c._updateSelItem=function(a,b){if(0==b.length)return!1;var c="";$.each(a,function(a,b){c+='\x3cli class\x3d"orgtree-item '+("0"==b.type&&"2"==b.isexternal?"this-outer-org":"")+'" data-code\x3d"'+b.code+'" data-type\x3d"'+b.type+'"'+(b.path?'title\x3d"'+b.path+'"':"")+'\x3e\x3ci class\x3d"the-icon glyphicon '+("1"==b.type?"glyphicon-user":"glyphicon-folder-close")+'"\x3e\x3c/i\x3e'+b.text+"\x3c/li\x3e"});b.find(".orgtree-item-list").html(c)};c._getFormatData=function(a,b){a.length&&COM_TOOLS.ajaxFn({url:COM_DEFAULT._orgTreeOpt.getDataUrl,type:"get",data:{param:JSON.stringify(a)},success:function(a){a&&1==a.code&&b(a.data)}})};c._initSelBox=function(a){var b=$();a.length&&(b=c._makeSelWrap(),a.before(b).addClass("hidden"),a=JSON.parse($.trim(a.val())||"[]"),c._getFormatData(a,function(a){c._updateSelItem(a,b)}));return b};return c};COM_TOOLS._model.orgModel=function(a,c,b){var d="string"==$.type(c)?$("#"+c):c;a="string"==$.type(a)?$("#"+a):a;if(0==a.length||0==d.length||a.data("orgmodel"))return!1;var e=COM_TOOLS._model._orgModel_(b),f=e._initSelBox(d);a.click(function(){e._openModel(JSON.parse($.trim(d.val())||"[]"),function(a,b){e._updateSelItem(b,f);d.val(JSON.stringify(a))})});a.data("orgmodel","inited")};COM_TOOLS._model.msg_fn=function(a,c){var b=[];c=c||{};var d={type:1,area:["280px","auto"],other:{offset:"rb",cusOffsetLeft:-10,shade:0,skin:"layui-skin-msg",move:!1,maxHeight:400,id:"cus_msg_wid_"+(a.id||"")}};$.extend(!0,d,c);d.other.skin+=" ";d.other.skin="1"==a.type?d.other.skin+"layui-skin-warning":d.other.skin+"layui-skin-primary";b.push("\x3ch3\x3e",a.title,"\x3c/h3\x3e");b.push('\x3cdiv class\x3d"ind-msg-cont"\x3e',a.msg,"\x3c/div\x3e");cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),b.join(""),top,d)};COM_TOOLS._model.msg_fn2=function(a,c){function b(b){var c=[];$.each(a,function(a,d){if(-1!==$.inArray(d.id,b))return!0;c.push('\x3cdiv class\x3d"cus-msg-item clearfix" data-itemid\x3d"',d.id,'"\x3e');c.push('\x3cdiv class\x3d"cus-msg-lbox"\x3e');c.push('\x3ci class\x3d"glyphicon ',"1"==d.type?"glyphicon-bell":"glyphicon-bullhorn",'"\x3e\x3c/i\x3e');c.push("\x3c/div\x3e");c.push('\x3cdiv class\x3d"cus-msg-rbox"\x3e');c.push("\x3ch3\x3e",d.title,"\x3c/h3\x3e");c.push('\x3cdiv class\x3d"t-btn-box clearfix"\x3e');c.push('\x3cspan class\x3d"t-time pull-left"\x3e',d.date,"\x3c/span\x3e");c.push("\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")});return c}function d(){var a=[];g.find(".cus-msg-item").each(function(){a.push($(this).data("itemid"))});return a}if("array"!=$.type(a)||!a.length)return!1;c=c||{};var e={type:1,area:["300px","auto"],other:{offset:"rb",cusOffsetLeft:-20,shade:0,skin:"layui-skin-msg layui-skin-primary",move:!1,maxHeight:280,id:"cus_msg_wid_0",btnAlign:"c",btnStyleArr:["btn-primary"],btn:["\u5168\u90e8\u5df2\u8bfb","\u67e5\u770b\u5168\u90e8"],btn2:function(a,b){cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),COM_DEFAULT._isOpenNotice.infoListUrl,top,{ismax:!0});cumCloseWin(a,!0,top);return!1}},success:function(a,b){$.mCustomScrollbar&&a.find(".cus-msg-overflow").mCustomScrollbar({theme:"minimal-dark"});a.find(".cus-msg-contbox").on("click",".cus-msg-item",function(){var a=$(this);cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),COM_DEFAULT._isOpenNotice.infoPageUrl+"?id\x3d"+$(this).data("itemid"),top,{ismax:!0,success:function(c,d){0==a.siblings().length?cumCloseWin(b,!0,top):a.remove()}})})},end:function(){var a=d();COM_DEFAULT._isOpenNotice.seturl&&0<a.length&&$.ajax({type:"get",url:COM_DEFAULT._isOpenNotice.seturl,data:{id:a.join(",")},async:!0,cache:!1,timeout:3E3,dataType:"json",success:function(a){g=$(!1)}})}};$.extend(!0,e,c);var f=e.other.id,g=$("#"+f);g.length?(e=b(d()),0<e.length&&(g.find(".cus-msg-contbox").append(e.join("")),e=g.parent(".layui-layer"),e.length&&cumResizeWin(e.attr("times"),top))):(cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),'\x3cdiv class\x3d"cus-msg-overflow"\x3e\x3cdiv class\x3d"cus-msg-contbox"\x3e'+b().join("")+"\x3c/div\x3e\x3c/div\x3e",top,e),g=$("#"+f))};COM_TOOLS._model.panel={makePanelStyle:function(){var a={styleCache:{},addStyle:function(b,d){if(!b||!d)return!1;var e={};$.each(d,function(a,d){var f=c[a];if(f){var g=f.classAttr(d),f=f.className.replace(/\.cus-panel( |$)/g,'.cus-panel[data-itemid\x3d"'+b+'"] ');g&&(e[f]?$.extend(!0,e[f],g):e[f]=g)}});a.styleCache[b]=e},getStyle:function(){return a.styleCache},formatStyle:function(){var b=[];$.each(a.styleCache,function(a,c){$.each(c,function(a,c){var d="";$.each(c,function(a,b){d+=a+":"+b+";\n"});b.push(a+"{\n"+d+"}")})});return b.join("\n")||""},useStyle:function(){var b=$("#cuspanel_stylebox");b.length||(b=$('\x3cstyle type\x3d"text/css" id\x3d"cuspanel_stylebox"\x3e\x3c/style\x3e').appendTo("head"));b.html(a.formatStyle())}},c={panelBorder:{className:".cus-panel",classAttr:function(a){return $.isNumeric(a)?{"border-width":parseInt(a)+"px"}:a?{border:a}:!1}},height:{className:".cus-panel \x3e .cus-panel-body",classAttr:function(a){return $.isNumeric(a)?{height:a+"px"}:a?{height:a}:!1}},headHidden:{className:".cus-panel \x3e .cus-panel-heading",classAttr:function(a){return"true"==a?{display:"none"}:!1}},headBorder:{className:".cus-panel \x3e .cus-panel-heading",classAttr:function(a){return $.isNumeric(a)?{"border-bottom-width":parseInt(a)+"px"}:a?{"border-bottom":a}:!1}}};return a},add_one_panel:function(a,c,b){var d=[];d.push('\x3cdiv class\x3d"cus-panel ',a.skin&&a.skin.className?a.skin.className:"cus-panel-default",'" data-itemid\x3d"',a.id,'" data-iframesrc\x3d"',a.url,'"\x3e');d.push('\x3cdiv class\x3d"cus-panel-heading"\x3e\x3cspan class\x3d"cus-panel-title"\x3e',a.name,"\x3c/span\x3e");d.push('\x3cdiv class\x3d"cus-panel-btn-box"\x3e\x3c/div\x3e\x3c/div\x3e');d.push('\x3cdiv class\x3d"cus-panel-body"\x3e\x3cp class\x3d"panel-no-permission"\x3e\x3ci class\x3d"glyphicon glyphicon-exclamation-sign"\x3e\x3c/i\x3e\x3cspan\x3e\u60a8\u8fd8\u6ca1\u6709[',a.name,"]\u6a21\u5757\u7684\u8bbf\u95ee\u6743\u9650\uff01\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e");"makeAndCache"==b||"makeOne"==b?(("makeAndCache"==b?c.find("#"+a.parent):c).children(".cus-col-box").append(COM_TOOLS._model.panel.model_wrap(d.join(""),a.id,a.modelid,a.parent,3).data("skin",a.skin)),"makeOne"==b&&$('.cus-panel[data-itemid\x3d"'+a.id+'"]').cuspanel()):"onlyShow"==b&&c.find("#"+a.parent).append(d.join(""))},model_wrap:function(a,c,b,d,e){c=$('\x3cdiv class\x3d"js-model-item" data-wrapitem_id\x3d"'+c+'"  data-model_id\x3d"'+b+'" data-parent_id\x3d"'+d+'" data-model_type\x3d"'+e+'"\x3e\x3cdiv class\x3d"js-code-box"\x3e\x3c/div\x3e\x3cdiv class\x3d"js-btn-box"\x3e'+(1!=e?'\x3cspan class\x3d"label label-info js-evt-btnbar" data-active\x3d"config"\x3e\x3ci class\x3d"glyphicon glyphicon-cog"\x3e\x3c/i\x3e\u8bbe\u7f6e\x3c/span\x3e':"")+'\x3cspan class\x3d"label label-danger js-evt-btnbar" data-active\x3d"del"\x3e\x3ci class\x3d"glyphicon glyphicon-remove"\x3e\x3c/i\x3e\u5220\u9664\x3c/span\x3e\x3cspan class\x3d"label label-warning js-evt-btnbar" data-active\x3d"move"\x3e\x3ci class\x3d"glyphicon glyphicon-move"\x3e\x3c/i\x3e\u62d6\u52a8\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e');c.children(".js-code-box").html(a);return c}};COM_TOOLS._model.set_i18n_fn=function(a,c,b){function d(){COM_TOOLS.ajaxFn({url:c,type:"GET",success:function(a){a&&"array"==$.type(a)&&($.each(a,function(a,b){var c=b.pid.replace(/\./g,"_"),d='\x3cli role\x3d"presentation" class\x3d"'+(0==a?"active":"")+'"\x3e\x3ca href\x3d"#js_tab_'+c+'" role\x3d"tab" data-toggle\x3d"tab"\x3e'+b.name+"\x3c/a\x3e\x3c/li\x3e",c='\x3cdiv role\x3d"tabpanel" class\x3d"tab-pane '+(0==a?"active":"")+'" id\x3d"js_tab_'+c+'" data-pid\x3d"'+b.pid+'"\x3e'+e(b.child)+"\x3c/div\x3e";k.append(d);l.append(c)}),f())}},2,h.find(".js-cus-btn-refresh"))}function e(a){if("array"==$.type(a)&&0<a.length){var b=[];b.push('\x3cdiv class\x3d"form-horizontal"\x3e');$.each(a,function(a,c){b.push('\x3cdiv class\x3d"form-group" data-dcode\x3d"',c.code,'"\x3e');b.push('\x3clabel class\x3d"col-sm-2 col-md-offset-2 control-label"\x3e',"1"==c.required?'\x3cspan class\x3d"text-danger"\x3e*\x3c/span\x3e ':"",c.name,"\x3c/label\x3e");b.push('\x3cdiv class\x3d"col-sm-5"\x3e\x3cinput class\x3d"form-control input-sm js-input-val" type\x3d"text" value\x3d"',c.value,'" ',"1"==c.required?'required\x3d"required"':"","/\x3e\x3c/div\x3e");b.push("\x3c/div\x3e")});b.push("\x3c/div\x3e");return b.join("")}return""}function f(){l.find("input.js-input-val[required]").on("blur",function(){""==$.trim($(this).val())?COM_TOOLS._view.setInputStatus($(this),"error"):COM_TOOLS._view.setInputStatus($(this),"")})}if(!a||!c||!b)return!1;var g='\x3cdiv class\x3d"js-cus-tabmodel-box" id\x3d"js_cus_tabmodel_box"\x3e\x3cdiv class\x3d"cus-tabmodel-box"\x3e\x3cdiv class\x3d"tab-list-box js-tab-list-box"\x3e\x3cbutton class\x3d"roll-nav roll-left tab-roll-btn tab-left-btn btn-primary"\x3e\x3ci class\x3d"fa fa-backward"\x3e\x3c/i\x3e\x3c/button\x3e\x3cdiv class\x3d"tab-list-overflow"\x3e\x3cdiv class\x3d"tab-list-bar"\x3e\x3cul class\x3d"nav nav-tabs tab-list-ul pull-left js-create-tab" role\x3d"tablist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cbutton class\x3d"roll-nav roll-right tab-roll-btn tab-right-btn btn-primary"\x3e\x3ci class\x3d"fa fa-forward"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"cus-tabmodel-btns"\x3e\x3cbutton class\x3d"btn btn-primary btn-sm js-cus-btn-save js-helpmsg" type\x3d"button" data-helpmsg\x3d"platform.plugin.com_msg.tab_this" data-helpdata\x3d"'+TEDU_MESSAGE.get("platform.plugin.com_btn.save")+'"\x3e\x3ci class\x3d"glyphicon glyphicon-floppy-disk"\x3e\x3c/i\x3e '+TEDU_MESSAGE.get("platform.plugin.com_btn.save")+'\x3c/button\x3e\x3cbutton class\x3d"btn btn-warning btn-sm js-cus-btn-refresh" type\x3d"button"\x3e\x3ci class\x3d"glyphicon glyphicon-refresh"\x3e\x3c/i\x3e '+TEDU_MESSAGE.get("platform.plugin.com_btn.fresh")+'\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tab-content cus-tabmodel-contbox js-create-content"\x3e\x3c/div\x3e\x3c/div\x3e';$("#"+a).html(g);var h=$("#js_cus_tabmodel_box"),k=h.find(".js-create-tab"),l=h.find(".js-create-content");d();h.find(".js-cus-btn-save").click(function(){var a=$(this);COM_TOOLS.confirm(TEDU_MESSAGE.get("platform.plugin.com_msg.tab_separate"),function(c){layer.close(c);c=h.find(".js-create-content .tab-pane.active");var d=c.data("pid")||"",e=[],f=!1;c.find(".form-group").each(function(){var a=$(this),b=a.find("input.js-input-val");b.prop("required")&&""==$.trim(b.val())&&(f=!0);e.push({cCode:a.data("dcode"),lCode:d,name:$.trim(b.val())})});f?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.defeated")):COM_TOOLS.ajaxFn({url:b,type:"POST",data:{data:JSON.stringify(e)},success:function(a){"1"==a.code?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.success")):"-2"==a.code?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.china_notnull")):COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.defeated"))}},2,a)})}).end().find(".js-cus-btn-refresh").click(function(){k.html("");l.html("");d()});COM_TOOLS._view.tabScrollFn.init("#js_cus_tabmodel_box .js-tab-list-box")};COM_TOOLS._model.set_i18n_fn2=function(a,c,b){function d(){var a=[];u.find('[js-i18n-key]:not([js-i18n-key\x3d""])').each(function(){var b=$(this),c=$.trim(b.attr("js-i18n-key")),d=c,b=b.attr("js-i18n-label"),e=c.match(/\{([\w\.]+)\}/);if(e&&1<e.length){var f=u.find('[name\x3d"'+e[1]+'"]');if(0<f.length){var g=$.trim(f.val());g&&(d=c.replace(new RegExp("\\{"+e[1]+"\\}"),function(){return g}));a.push({code:d,oldcode:c,label:b});u.data("validator")?"required"in(f.rules()||{})||f.rules("add",{required:!0,"ck-i18n-key":!0}):f.attr("required")||f.attr({required:"required","ck-i18n-key":!0})}}!0===COM_DEFAULT._debug&&console.error("asd")});COM_TOOLS.ajaxFn({url:r,type:"GET",data:{data:JSON.stringify(a)},success:function(a){a&&"array"==$.type(a)&&($.each(a,function(a,b){var c=n.children("li").length,d=b.pid.replace(/\./g,"_").replace(/[\{\}]/g,""),e='\x3cli role\x3d"presentation" class\x3d"'+(0==c?"active":"")+'"\x3e\x3ca href\x3d"#js_tab_'+d+'" role\x3d"tab" data-toggle\x3d"tab"\x3e'+b.name+"\x3c/a\x3e\x3c/li\x3e",c='\x3cdiv role\x3d"tabpanel" class\x3d"tab-pane '+(0==c?"active":"")+'" id\x3d"js_tab_'+d+'" data-pid\x3d"'+b.pid+'"\x3e'+g(b.child,b.oldpid)+"\x3c/div\x3e";n.append(e);v.append(c);f(b)}),v.find("input.js-input-val[required]").off("blur.i18n.check").on("blur.i18n.check",function(){h($(this))}))}},2,p.find(".js-cus-btn-refresh").add(w))}function e(a){a=String(a||"");return a.toLowerCase().replace(/\{([\w\.-]+)\}/i,(a.match(/\{([\w\.-]+)\}/)||[])[0]||"")}function f(a){var b=e(a.oldpid),c=v.find('[js-i18n-target\x3d"'+b+"_"+COM_DEFAULT._language+'"]'),d=c.data("i18n_isedit");c.off("blur.i18n.evt focus.i18n.evt").on("focus.i18n.evt",function(){c.data("cur_value",$.trim(c.val()))}).on("blur.i18n.evt",function(){c.data("cur_value")!=$.trim(c.val())&&c.data("user_changed",!0)});a=b.match(/\{([\w\.]+)\}/);var f="";a&&1<a.length&&(f='[name]:not([name\x3d"'+a[1]+'"])');u.find("[js-i18n-key]").filter(function(){var a=$(this);return e(a.attr("js-i18n-key"))==b&&(f?a.is(f):!0)}).off("keyup.i18n.evt").on("keyup.i18n.evt",function(){d||c.data("user_changed")||c.val($(this).val())})}function g(a,b){if("array"==$.type(a)&&0<a.length){var c=[];c.push('\x3cform class\x3d"form-horizontal" novalidate\x3d"novalidate" onsubmit\x3d"return false;"\x3e');$.each(a,function(a,d){c.push('\x3cdiv class\x3d"form-group" data-dcode\x3d"',d.code,'"\x3e');c.push('\x3clabel class\x3d"col-sm-2 col-md-offset-2 control-label"\x3e',"1"==d.required?'\x3cspan class\x3d"text-danger"\x3e*\x3c/span\x3e ':"",d.name,"\x3c/label\x3e");c.push('\x3cdiv class\x3d"col-sm-5"\x3e\x3cinput class\x3d"form-control input-sm js-input-val" type\x3d"text" value\x3d"',d.value,'" ',"1"==d.required?'required\x3d"required"':"",'js-i18n-target\x3d"',e(b),"_",d.code,'" data-i18n_isedit\x3d"',!!d.value,'" /\x3e\x3c/div\x3e');c.push("\x3c/div\x3e")});c.push("\x3c/form\x3e");return c.join("")}return""}function h(a){if(""==$.trim(a.val()))return COM_TOOLS._view.setInputStatus(a,"error"),!0;COM_TOOLS._view.setInputStatus(a,"");return!1}function k(a){a?p.find(".js-cus-btn-save").show():p.find(".js-cus-btn-save").hide()}function l(a,b,c){var d=[],e=!1,f=!1;2==a&&(f=!b.is(".js-cus-btn-save")||!1);if(f){var g=b.clone().removeAttr("id").addClass("disabled");g.insertBefore(b);b.attr("must_disabled",!0).prop("disabled",!0).hide();g.addClass("js-helpmsg").data("helpmsg","platform.plugin.help.save_i18n_only")}v.find(".tab-pane").each(function(){var a=$(this),b=String(a.data("pid")||""),a=a.find(".form-group"),c=b.match(/\{([\w\.]+)\}/);if(c&&1<c.length){var g=u.find('[name\x3d"'+c[1]+'"]');if(0<g.length){var k=$.trim(g.val());k&&(b=b.replace(new RegExp("\\{"+c[1]+"\\}"),function(){return k}));f&&g.prop("readonly",!0)}}e||a.each(function(){var a=$(this),c=a.find("input.js-input-val");c.prop("required")&&(e=h(c));if(e)return n.find('a[href\x3d"#'+a.closest(".tab-pane").attr("id")+'"]').tab("show"),!1;d.push({cCode:a.data("dcode"),lCode:b,name:$.trim(c.val())})})});e?(k(!0),COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.defeated"))):COM_TOOLS.ajaxFn({url:q,type:"POST",data:{data:JSON.stringify(d)},success:function(a){"1"==a.code?(cumCheckPwin(parent).COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.success")),"function"==$.type(c)?c():cumParentCallValue()):"-2"==a.code?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.china_notnull")):COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.defeated"));k(!0)},error:function(){k(!0);COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.defeated"))}},a,b)}if(!a||!c||!b)return!1;var r=COM_DEFAULT._modelI18nOpt.geturl,q=COM_DEFAULT._modelI18nOpt.seturl;if(!r||!q)return!1;var m='\x3cdiv class\x3d"js-cus-tabmodel-box" id\x3d"js_cus_tabmodel_box"\x3e\x3cdiv class\x3d"cus-tabmodel-box"\x3e\x3cdiv class\x3d"tab-list-box js-tab-list-box"\x3e\x3cbutton class\x3d"roll-nav roll-left tab-roll-btn tab-left-btn btn-primary"\x3e\x3ci class\x3d"glyphicon glyphicon-backward"\x3e\x3c/i\x3e\x3c/button\x3e\x3cdiv class\x3d"tab-list-overflow"\x3e\x3cdiv class\x3d"tab-list-bar"\x3e\x3cul class\x3d"nav nav-tabs tab-list-ul pull-left js-create-tab" role\x3d"tablist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cbutton class\x3d"roll-nav roll-right tab-roll-btn tab-right-btn btn-primary"\x3e\x3ci class\x3d"glyphicon glyphicon-forward"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"cus-tabmodel-btns"\x3e\x3cbutton class\x3d"btn btn-primary btn-sm js-cus-btn-save js-helpmsg" type\x3d"button" data-helpmsg\x3d"platform.plugin.help.save_i18n" style\x3d"display:none;" \x3e\x3ci class\x3d"glyphicon glyphicon-floppy-disk"\x3e\x3c/i\x3e '+TEDU_MESSAGE.get("platform.plugin.com_btn.save")+'\x3c/button\x3e\x26nbsp;\x3cbutton class\x3d"btn btn-warning btn-sm js-cus-btn-refresh" type\x3d"button"\x3e\x3ci class\x3d"glyphicon glyphicon-refresh"\x3e\x3c/i\x3e '+TEDU_MESSAGE.get("platform.plugin.com_btn.fresh")+'\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tab-content cus-tabmodel-contbox js-create-content"\x3e\x3c/div\x3e\x3c/div\x3e';$(a).html(m);var p=$("#js_cus_tabmodel_box"),n=p.find(".js-create-tab"),v=p.find(".js-create-content"),u=$(c),w=$(b);d();p.find(".js-cus-btn-save").click(function(){l(2,$(this))}).end().find(".js-cus-btn-refresh").click(function(){n.html("");v.html("");d()});COM_TOOLS._view.tabScrollFn.init("#js_cus_tabmodel_box .js-tab-list-box");return{save:function(a){l(2,w,a)}}};var COM_DEFAULT={_debug:!1,_customMenus:6,_tabSingle:3,_contextPath:"",_tabHomePage:"index_default.html",_404Page:"404.html",_helpPage:"help.html",_language:"zh-CN",_isOpenHelpMsg:{helpBtn:!0,helpMsgTips:!0,helpMsgDefVal:!0},_isOpenNotice:{geturl:"",seturl:"",infoPageUrl:"help.html",infoListUrl:"",isDisplay:!1,delayTime:5,requestTime:300,isNew:!0},_modelI18nOpt:{geturl:"",seturl:""},_isOpenSwitch:!0,_dataTableOpt:{scrollX:!0,paging:!0,pageLength:11,lengthChange:!1,ordering:!1,searching:!1,serverSide:!0,processing:!0},_dateTimePickerOpt:{minView:2,todayBtn:!0,autoclose:!0,pickerPosition:"bottom-left",clearBtn:!0,forceParse:!1},_dateRangePickerOpt:{opens:"left",singleDatePicker:!0,showDropdowns:!1,minYear:(new Date((new Date).setFullYear((new Date).getFullYear()-5))).getFullYear(),maxYear:(new Date((new Date).setFullYear((new Date).getFullYear()+5))).getFullYear(),timePicker:!1,timePickerIncrement:5,timePicker24Hour:!0,autoUpdateInput:!1,linkedCalendars:!0},_jsTreeOpt:{root:"0"},_fileServeOpt:{fileUploadUrl:"",defaultFileSize:40960,imgFileSize:10240,fileType:"doc docx xls xlsx ppt pptx txt pdf jpg jpeg png gif rar zip".split(" "),imgType:["jpg","jpeg","png","gif"]},_orgTreeOpt:{treeUrl:"",searchUrl:"",getDataUrl:""},_forcedExit:{time:"-1",ajaxForm:!1}};(function(){if(window.cus_default_&&"object"==$.type(window.cus_default_))$.extend(!0,COM_DEFAULT,window.cus_default_),COM_TOOLS.localStorageSupport()&&COM_TOOLS.save_toLocal("cus_default",window.cus_default_);else if(COM_TOOLS.localStorageSupport()){var a={},c=COM_TOOLS.get_fromLocal("cus_default");if(c){try{a=$.parseJSON(c)}catch(b){console.error("\u4fee\u6539\u9ed8\u8ba4\u914d\u7f6e\u53c2\u6570\u51fa\u9519\uff01")}$.extend(!0,COM_DEFAULT,a)}}$.ajaxSetup({dataFilter:function(a,c){COM_TOOLS._ajax_jumpToLogin(a);return a}})})();COM_TOOLS.initjSDefaultOpt("ALL");$(function(){COM_DEFAULT._isOpenHelpMsg.helpBtn&&$(document).on("click",".js-helpbtn",function(a){var c=$(this),b=c.data("helpbtn");c.is("#js_cushelpbtn")&&(b="#"+($("#t_tabBox \x3e li.active \x3e a").data("itemid")||""));if(b)c.attr({href:/^#\w+/.test(b)?COM_DEFAULT._helpPage+b.replace(/^#{1}/,"#help_"):b,target:"cushelppage"});else return!1;a.stopPropagation()});COM_DEFAULT._isOpenHelpMsg.helpMsgTips&&$(document).delayPopover({selector:'.js-helpmsg[data-titlemsg\x3d"true"],.js-helpmsg:not(:text)',placement:"auto",trigger:"hover",html:!0,container:"body",content:function(){var a=$(this).data("helpdata"),a=a?a.toString().split(","):[];return TEDU_MESSAGE.get($(this).data("helpmsg"),a)}});COM_TOOLS.fnInitInputHelpVal()});