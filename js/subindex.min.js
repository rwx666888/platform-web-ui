var cum_Modalindex_=0,cum_ModalValobj=null;function cumCurWinModal(e,a,i,l){var s=cumCheckPwin(i||window),n={area:["90%","80%"],scrollbar:!1,ismax:!1,callid:"",callback:{},cancel:null,end:null,helpBtn:!1,type:2,other:{},success:null};"undefined"!=typeof l&&$.extend(n,l);var o=n.area;o[0]&&0<o[0].toLowerCase().indexOf("px")&&parseInt(o[0])>$(s).width()&&(o[0]="100%"),o[1]&&0<o[1].toLowerCase().indexOf("px")&&parseInt(o[1])>$(s).height()&&(o[1]="100%"),2==n.type&&COM_TOOLS.setCacheFnForChildWin();var r=s.layer.open($.extend({type:n.type,title:e,area:n.area,content:a,scrollbar:!n.scrollbar||s.$("html").attr("layer-full"),maxmin:n.ismax,helpBtn:n.helpBtn,resize:!1,zIndex:s.layer.zIndex,success:function(e,a){if(2==n.type){var i=s[e.find("iframe")[0].name];if(n.callid&&(i.cum_ModalValobj=n.callid),$.isEmptyObject(n.callback)||"object"!=$.type(n.callback)||(!n.callid&&(i.cum_ModalValobj="no_nodeid"),i.COM_TOOLS.cache_obj._ptWinFnNames=n.callback),window.name&&"welPiframe"!=window.name&&0!=window.name.indexOf("mainPiframe")){var l=s.layer.getFrameIndex(window.name);l&&(i.cum_Modalindex_=l)}else i.cum_Modalindex_=-1}$.isFunction(n.success)&&n.success(e,a,i)},cancel:n.cancel,end:n.end},n.other));return r}function cumParentWinModal(e,a,i){return cumCurWinModal(e,a,parent,$.extend({ismax:!0},i))}function cumParentCallValue(e,a){if(!window.name)return!1;var i=cumCheckPwin(parent),l=i.layer.getFrameIndex(window.name);"function"==typeof e&&e(),cumCloseWin(l,a,i)}function cumCloseWin(e,a,i){cumCheckPwin(i||window).layer.close(e,a)}function cumGetParentWinGlobel(e){return 0<window.cum_Modalindex_?cumCheckPwin(e).window["layui-layer-iframe"+window.cum_Modalindex_]:cumCheckPwin(e)==top&&0<top.$(".js-iframe-comwin").length?top.window[top.$(".js-iframe-comwin:visible").attr("name")]:cumCheckPwin(e)}function cumGetParentBodyGlobel(e){return 0<window.cum_Modalindex_?cumCheckPwin(e).layer.getChildFrame("body",window.cum_Modalindex_):cumCheckPwin(e)==top&&0<top.$(".js-iframe-comwin").length?top.window[top.$(".js-iframe-comwin:visible").attr("name")].document.body:cumCheckPwin(e).document.body}function cumResizeWin(e,a){var i=cumCheckPwin(a||window),l=i.$("#layui-layer"+e);if(!l.length)return!1;var s=l.data("source_api");s.auto(e).offset()}function cumCheckPwin(e){var a=e||parent;try{a.location.href}catch(i){a=self}return a}function resizeIframeHeight(){}function intValidateOption(){}function cus_dt_ajaxdata(e,a){var l={},s=e.columns;return l.draw=e.draw,l.pageSize=e.length,l.start=e.start,s&&(l.sort=[],$.each(e.order,function(e,a){var i=s[a.column];l.sort.push({colData:i.data,colName:i.name,dir:a.dir})})),$.isEmptyObject(a)?l:$.extend({},a,l)}function select_add(e,a,l,s){var i=$("#"+e);i.empty();var n=[];$.each(a,function(e,a){n.push("<option value=\"",a[l],"\">",a[s],"</option>")}),i.append(n.join(""))}function select_option_init(e,a,i,l,s,n){$.ajax({type:"post",url:e,data:n,cache:!1,success:function(e){1==e.result?select_add(i,e[a],l,s):COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noData"])},error:function(){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.networkError"])}})}var TEDU_MESSAGE=function(){var e={};return e.format=function(e,a){return void 0===a?e:(a.constructor!==Object&&a.constructor!==Array&&(a=[a]),$.each(a,function(a,i){e=e.replace(new RegExp("\\{"+a+"\\}","g"),function(){return i})}),e)},e.get=function(a,i,l){return l="zh-CN","undefined"==typeof LOCAL_MESSAGE_DATA?"":LOCAL_MESSAGE_DATA[a]?e.format(LOCAL_MESSAGE_DATA[a],i)||"":""},e}(),TEDU_LANGUAGE={_dataTable:{"zh-CN":{processing:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.processing"],lengthMenu:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.lengthMenu"],zeroRecords:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.zeroRecords"],info:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.info"],infoEmpty:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.infoEmpty"],infoFiltered:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.infoFiltered"],infoPostFix:"",search:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.search"],url:"",emptyTable:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.emptyTable"],loadingRecords:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.loadingRecords"],infoThousands:",",paginate:{first:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_first"],previous:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_previous"],next:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_next"],last:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_last"],btnToPage:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_btnToPage"]||"\u8DF3\u8F6C"},aria:{sortAscending:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.sortAscending"],sortDescending:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.sortDescending"]}}},_validate:function(){return $.validator&&{"zh-CN":{required:LOCAL_MESSAGE_DATA["platform.plugin.validate.required"],remote:LOCAL_MESSAGE_DATA["platform.plugin.validate.remote"],email:LOCAL_MESSAGE_DATA["platform.plugin.validate.email"],url:LOCAL_MESSAGE_DATA["platform.plugin.validate.url"],date:LOCAL_MESSAGE_DATA["platform.plugin.validate.date"],dateISO:LOCAL_MESSAGE_DATA["platform.plugin.validate.dateISO"],number:LOCAL_MESSAGE_DATA["platform.plugin.validate.number"],digits:LOCAL_MESSAGE_DATA["platform.plugin.validate.digits"],creditcard:LOCAL_MESSAGE_DATA["platform.plugin.validate.creditcard"],equalTo:LOCAL_MESSAGE_DATA["platform.plugin.validate.equalTo"],extension:LOCAL_MESSAGE_DATA["platform.plugin.validate.extension"],maxlength:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.maxlength"]),minlength:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.minlength"]),rangelength:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.rangelength"]),range:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.range"]),max:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.max"]),min:$.validator.format(LOCAL_MESSAGE_DATA["platform.plugin.validate.min"])}}},_select2:function(){if(jQuery.fn.select2&&jQuery.fn.select2.amd){var a=jQuery.fn.select2.amd,i="platform.plugin.select2.";return a.define("select2/i18n/zh-CN",[],function(){return{errorLoading:function(){return LOCAL_MESSAGE_DATA[i+"errorLoading"]},inputTooLong:function(a){var e=a.input.length-a.maximum;return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA[i+"inputTooLong"],[e])},inputTooShort:function(a){var e=a.minimum-a.input.length;return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA[i+"inputTooShort"],[e])},loadingMore:function(){return LOCAL_MESSAGE_DATA[i+"loadingMore"]},maximumSelected:function(a){return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA[i+"maximumSelected"],[a.maximum])},noResults:function(){return LOCAL_MESSAGE_DATA[i+"noResults"]},searching:function(){return LOCAL_MESSAGE_DATA[i+"searching"]}}}),{define:a.define,require:a.require}}},_datetimepicker:function(){return{"zh-CN":{days:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sunday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.monday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.tuesday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.wednesday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.thursday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.friday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.saturday"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sunday"]],daysShort:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.mon"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.tue"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.wed"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.thu"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.fri"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sat"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sun"]],daysMin:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.s"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.m"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.t"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.w"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.th"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.f"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sa"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.s"]],months:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jan"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.feb"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.mar"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.apr"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.may"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jul"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.aug"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sep"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.oct"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.nov"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.dec"]],monthsShort:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_jan"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_feb"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_mar"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_apr"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_may"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_jun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_jul"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_aug"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_sep"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_oct"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_nov"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.short_dec"]],today:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.today"],clear:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.clear"],suffix:[],meridiem:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.am"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.pm"]],format:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.format"],weekStart:1}}}(),_daterangepicker:function(){return{firstDay:1,separator:" - ",applyLabel:LOCAL_MESSAGE_DATA["platform.plugin.com_btn.confirm"],cancelLabel:LOCAL_MESSAGE_DATA["platform.plugin.com_btn.cancel"],customRangeLabel:"\u81EA\u5B9A\u4E49",weekLabel:"W",daysOfWeek:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.s"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.m"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.t"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.w"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.th"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.f"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sa"]],monthNames:[LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jan"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.feb"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.mar"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.apr"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.may"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jun"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.jul"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.aug"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.sep"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.oct"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.nov"],LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.dec"]],format:LOCAL_MESSAGE_DATA["platform.plugin.datetimepicker.format"].replace("yyyy","YYYY").replace("mm","MM").replace("dd","DD").replace("hh","HH").replace("ii","mm")}}},CUS_PLUGINS={_DT_:{_numbers_nototal:function(e,a){var i=[],l=$.fn.DataTable.ext.pager.numbers_length,s=Math.floor(l/2),n=function(e,a){var l;"undefined"==typeof a?(a=0,l=e):(l=a,a=e);for(var s=[],n=a;n<l;n++)s.push(n);return s};return a<=l?i=n(0,a):e<=s?(i=n(0,l-1),i.push("ellipsis")):e>=a-1-s?(i=n(a-(l-2),a),i.splice(0,0,"ellipsis"),i.splice(0,0,0)):(i=n(e-s+2,e+s),i.push("ellipsis"),i.splice(0,0,"ellipsis"),i.splice(0,0,0)),i.DT_el="span",i},init:function(){var e=this;$.fn.DataTable.ext.pager.simple_numbers_no_totalpage=function(a,i){return["previous",e._numbers_nototal(a,i),"next"]},$.fn.DataTable.ext.pager.simple_numbers_input=function(e,a){return["previous",$.fn.DataTable.ext.pager._numbers(e,a),"next","cusPageInput"]},$.fn.DataTable.ext.pager.simple_numbers_inputAndPages=function(e,a){return["previous",$.fn.DataTable.ext.pager._numbers(e,a),"next","cusPageInputAndPages"]},$.fn.DataTable.ext.pager.simple_inputAndPages=function(){return["previous","next","cusPageInputAndPages"]}}},_VALID_:{applyTooltipOptions:function(e,a){var i=$.fn.tooltip.Constructor.DEFAULTS,l={animation:e.data("animation")||!1,html:e.data("html")||i.html,placement:e.data("placement")||i.placement,selector:e.data("selector")||i.selector,trigger:$.trim("manual "+(e.data("trigger")||"")),delay:e.data("delay")||i.delay,container:e.data("container")||i.container,template:"<div class=\"tooltip cus-tooltip-error\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>"};return a&&a._all_&&$.extend(l,a._all_),a&&a[e.attr("name")]&&$.extend(l,a[e.attr("name")]),l},init:function(){var e=this;$.validator.setDefaults({normalizer:function(e){return $.trim(e)},success:function(e,a){$(a).tooltip("destroy")},errorPlacement:function(a,i){var l=$(i),s=e.applyTooltipOptions(l,this.settings.tooltip_options);s.title=s.html?a.html():a.text(),l.data("bs.tooltip")===void 0?l.tooltip(s):l.data("bs.tooltip").options.title=s.title,l.tooltip("show")}})}},_DELAYPOPOVER_:function(e){var a=function(e,a){this.init("delayPopover",e,a),this.initDelayPopover()};a.DEFAULTS=e.extend({},e.fn.popover.Constructor.DEFAULTS,{trigger:"hover",delay:{hide:160}}),a.prototype=e.extend({},e.fn.popover.Constructor.prototype),a.prototype.constructor=a,a.prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.delayPopoverEnter=function(){this.hoverState="in"},a.prototype.delayPopoverLeave=function(){this.hoverState="out",this.leave(this)},a.prototype.initDelayPopover=function(){this.tip().on("mouseenter."+this.type,e.proxy(this.delayPopoverEnter,this)).on("mouseleave."+this.type,e.proxy(this.delayPopoverLeave,this))};var i=e.fn.delayPopover;e.fn.delayPopover=function(i){return this.each(function(){var l=e(this),s=l.data("bs.delayPopover");!s&&/destroy|hide/.test(i)||(!s&&l.data("bs.delayPopover",s=new a(this,"object"==typeof i&&i)),"string"==typeof i&&s[i]())})},e.fn.delayPopover.Constructor=a,e.fn.delayPopover.noConflict=function(){return e.fn.delayPopover=i,this}}(jQuery),_CUSPANEL_:function(a){var e=function(e,a){this.init("cuspanel",e,a)};e.VERSION="1.0.0",e.DEFAULTS={overlay:"<div class=\"panel-overlay\"><div class=\"panel-overlay-loading\"><i class=\"glyphicon glyphicon-refresh cus-animation-spin\"></i></div></div>",btn:{fullscreen:{iconClass:["glyphicon glyphicon-resize-full","glyphicon glyphicon-resize-small"]},reload:{iconClass:["glyphicon glyphicon-refresh"]},collapse:{iconClass:["glyphicon glyphicon-chevron-up","glyphicon glyphicon-chevron-down"]},close:{iconClass:["glyphicon glyphicon-remove"]}},height:!1,iframesrc:!1},e.prototype.init=function(e,i,l){var s=this;this.type=e,this.$element=a(i),this.options=this.getOptions(l),this.$btnbox=this.$element.find(".cus-panel-btn-box"),this.$body=this.$element.children(".cus-panel-body"),this.$overlay=a(this.options.overlay),this.options.iframesrc&&(this.$body.addClass("iframe-panel"),this.$iframe=a("<iframe/>"),this.overlay("open"),this.$iframe.on("load",function(){s.overlay("close")}).attr({allowtransparency:"yes",frameborder:0,height:"100%",width:"100%",src:this.options.iframesrc}),this.$body.html(this.$iframe)),this.options.height&&this.$body.height(this.options.height),this.btns()},e.prototype.btns=function(){var e=this,i=this.$btnbox;if(0==i.length)return!1;var l=[],s=this.options.btn;s&&!a.isEmptyObject(s)?(a.each(s,function(o,r){if(r&&r.iconClass){if("string"==a.type(r.iconClass)&&(s[o].iconClass=[r.iconClass]),"reload"==o&&!e.options.iframesrc)return!0;l.push("<span class=\"c-p-btn js-evt-btnbar\" data-active=\"",o,"\">"),l.push("<i class=\"",r.iconClass[0],"\"></i>"),l.push("</span>"),/^(fullscreen|reload|collapse|close)$/.test(o)?i.on("click.com."+e.type+".data-api",".js-evt-btnbar[data-active=\""+o+"\"]",a.proxy(e[o],e)):i.on("click.com."+e.type+".data-api",".js-evt-btnbar[data-active=\""+o+"\"]",a.proxy(function(i){var e=a(i.currentTarget);this.$element.trigger(a.Event(o+".com."+this.type,{relatedTarget:e[0]}))},e))}}),i.html(l.join(""))):i.hide()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){var i=a.extend({},this.$element.data());return i&&i.btn&&"{"==a.trim(i.btn).substring(0,1)&&(i.btn=new Function("return "+a.trim(i.btn))()),e=a.extend(!0,{},this.getDefaults(),i,e),e},e.prototype.fullscreen=function(e){var i=this.options.btn.fullscreen,l=!!(i.iconClass&&1<i.iconClass.length)&&i.iconClass,s=e instanceof a.Event?a(e.currentTarget):this.$btnbox.children(".js-evt-btnbar[data-active=\"fullscreen\"]");this.$element.toggleClass("fullscreen"),l&&s.children("i").toggleClass(this.ckeckIcon(l[0])).toggleClass(this.ckeckIcon(l[1])),this.$element.trigger(a.Event("fullscreen.com."+this.type,{relatedTarget:s[0],actionType:this.$element.hasClass("fullscreen")?"isfullscreen":"nofullscreen"}))},e.prototype.reload=function(e){this.options.btn.reload;this.options.iframesrc&&(this.$iframe.attr("src",this.$iframe.attr("src")),this.overlay("open"));var i=e instanceof a.Event?a(e.currentTarget):this.$btnbox.children(".js-evt-btnbar[data-active=\"reload\"]");this.$element.trigger(a.Event("reload.com."+this.type,{relatedTarget:i[0]}))},e.prototype.collapse=function(e){var i=this,l=this.options.btn.collapse,s=!!(l.iconClass&&1<l.iconClass.length)&&l.iconClass,n=e instanceof a.Event?a(e.currentTarget):this.$btnbox.children(".js-evt-btnbar[data-active=\"collapse\"]"),o=function(){i.$element.trigger(a.Event("collapse.com."+i.type,{relatedTarget:n[0],actionType:i.$body.is(":hidden")?"hidden":"show"}))};"up"==e?!this.$body.is(":hidden")&&(this.$body.slideToggle("fast",o),s&&n.children("i").toggleClass(this.ckeckIcon(s[0])).toggleClass(this.ckeckIcon(s[1]))):"down"==e?this.$body.is(":hidden")&&(this.$body.slideToggle("fast",o),s&&n.children("i").toggleClass(this.ckeckIcon(s[0])).toggleClass(this.ckeckIcon(s[1]))):(this.$body.slideToggle("fast",o),s&&n.children("i").toggleClass(this.ckeckIcon(s[0])).toggleClass(this.ckeckIcon(s[1])))},e.prototype.close=function(e){this.options.btn.close;this.$element.remove();var i=e instanceof a.Event?a(e.currentTarget):this.$btnbox.children(".js-evt-btnbar[data-active=\"close\"]");this.$element.trigger(a.Event("close.com."+this.type,{relatedTarget:i[0]}))},e.prototype.ckeckIcon=function(e){return a.trim(e.replace(/glyphicon |tedufont /g,""))},e.prototype.overlay=function(e){"open"!=e||this.$element.find(this.$overlay).length||this.$element.append(this.$overlay),"close"==e&&this.$overlay.detach()},a.fn.cuspanel=function(i,l){return this.each(function(){var s=a(this),n=s.data("com.cuspanel");!n&&/destroy|hide/.test(i)||(!n&&s.data("com.cuspanel",n=new e(this,"object"==typeof i&&i)),"string"==typeof i&&n[i](l))})},a.fn.cuspanel.Constructor=e}(jQuery),_CUSDATERANGEPICKER_:function(e){var a=function(a,i,l){this.$element_=e(a),i.showRanges&&(i.ranges=i.ranges?i.ranges:{今天:[moment(),moment()],昨天:[moment().subtract(1,"days"),moment().subtract(1,"days")],近一周:[moment().subtract(6,"days"),moment()],近一月:[moment().subtract(29,"days"),moment()],本月:[moment().startOf("month"),moment().endOf("month")],上月:[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]}),this.option_=e.extend(!0,{},e.fn.daterangepicker.defaultOptions,i),this.$element_.daterangepicker(this.option_,l),this.$element_.on("apply.daterangepicker",function(e,a){a.updateElement(!0)}).on("cancel.daterangepicker",function(e,a){1==a.$input_.length&&(a.setStartDate(moment().startOf("minute")),a.setEndDate(moment().endOf("minute")),a.$input_.val("").trigger("focusout.validate"))})};a.VERSION="1.1.0",e.fn.cusdaterangepicker=function(i,l){return this.each(function(){var s=e(this).data("daterangepicker");!s&&/remove/.test(i)||(!s&&(window.moment?new a(this,"object"==typeof i&&i,l):console.error("\u4F7F\u7528\u8BE5\u7EC4\u4EF6\u9700\u63D0\u524D\u5F15\u5165 moment.js \u7EC4\u4EF6!")),"string"==typeof i&&s[i](l))})},e.fn.cusdaterangepicker.Constructor=a}(jQuery)},COM_TOOLS={version:"6.3.1",_language:"zh-CN",_jsFileList:{jstree:{js:"plugins/jsTree/jstree.min.js",css:"plugins/jsTree/style.min.css"},validator:{js:"plugins/validate/jquery.validate.custom.min.js",css:""},datetimepicker:{js:"plugins/datetimepicker/bootstrap-datetimepicker.min.js",css:"plugins/datetimepicker/bootstrap-datetimepicker.min.css"},select2:{js:"plugins/select2/select2.full.min.js",css:"plugins/select2/select2.min.css"},cropper:{js:"plugins/cropper/cropper.min.js",css:"plugins/cropper/cropper.min.css"},quicksearch:{js:"plugins/lou-multi-select/js/jquery.quicksearch.js",css:""},multiSelect:{js:"plugins/lou-multi-select/js/jquery.multi-select.js",css:""},jqueryZoom:{js:"plugins/jquery-zoom/jquery.zoom.min.js",css:""},echarts:{js:"plugins/echarts/echarts.min.js",css:""},icheck:{js:"plugins/iCheck/icheck.min.js",css:"plugins/iCheck/custom.css"},cusPinYin:{js:"pinyin.js",css:""},datatable:{js:"plugins/datatables/datatables.min.js",css:"plugins/dataTables/datatables.min.css"},mCustomScrollbar:{js:"plugins/customScrollbar/jquery.mCustomScrollbar.concat.min.js",css:"plugins/customScrollbar/jquery.mCustomScrollbar.min.css"}},initjSDefaultOpt:function(e){return!!e&&void(("ALL"==e||-1!==$.inArray("DTmain",e))&&$.fn.dataTable&&(CUS_PLUGINS._DT_.init(),$.extend($.fn.dataTable.defaults,COM_DEFAULT._dataTableOpt,{language:TEDU_LANGUAGE._dataTable[COM_TOOLS._language],fnPreDrawCallback:function(e){$(e.nTableWrapper).find(".cus-checkbox-all").removeClass("cus-checked")}}),$.fn.dataTable.ext.errMode=function(e,a,i){var l="\u6570\u636E\u8868\u683C\u9519\u8BEF: "+(e?"table id="+e.sTableId+" - ":"");a&&(l+=1===a?"\u65E0\u6548\u7684JSON\u6570\u636E\u683C\u5F0F":2===a?"\u975Etable\u8282\u70B9\u521D\u59CB\u5316":3===a?"\u65E0\u6CD5\u91CD\u590D\u521D\u59CB\u5316DataTable\uFF1B\u53EF\u80FD\u539F\u56E0\uFF1A\u8868\u683CID\u91CD\u590D\uFF0C\u6216\u672A\u9500\u6BC1\u4E4B\u524D\u7684\u5B9E\u4F8B\u5BF9\u8C61\uFF08\u7279\u6B8A\u573A\u666F\uFF09\uFF1B":4===a?"\u6570\u636E\u6E90\u4E2D\u7F3A\u5C11\u5BF9\u8C61\uFF0C\u6216\u5176\u5B83\u6570\u636E\u683C\u5F0F\u9519\u8BEF\uFF1A"+i:5===a?"\u5206\u9875\u64CD\u4F5C\u8D8A\u754C\uFF0C\u53EF\u80FD\u539F\u56E0\uFF1A\u5206\u9875\u53C2\u6570\u9519\u8BEF\uFF0C\u6570\u636E\u8D8A\u754C\uFF1B":6===a?"\u8868\u683C\u6E32\u67D3\u5F02\u5E38\uFF0C\u8868\u683C\u5E03\u5C40\u9519\u8BEF\uFF0C\u53EF\u80FD\u539F\u56E0\uFF1A\u8868\u683C\u521D\u59CB\u5316\u5BB9\u5668\u8FC7\u5C0F":7===a?"Ajax\u9519\u8BEF,\u53EF\u80FD\u539F\u56E0\uFF1A\u5E94\u7528\u54CD\u5E94\u5F02\u5E38\uFF1B":i,l+="#Code:"+a);window.console&&console.error&&console.error(l)}),("ALL"==e||-1!==$.inArray("jstree",e))&&$.jstree&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"jstree"),$.jstree.root=COM_DEFAULT._jsTreeOpt.root),("ALL"==e||-1!==$.inArray("validator",e))&&$.validator&&(CUS_PLUGINS._VALID_.init(),$.extend($.validator.messages,TEDU_LANGUAGE._validate()[COM_TOOLS._language]),COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"validator")),("ALL"==e||-1!==$.inArray("datetimepicker",e))&&$.fn.datetimepicker&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"datetimepicker"),$.fn.datetimepicker.dates["cus-lang"]=TEDU_LANGUAGE._datetimepicker[COM_TOOLS._language],$.extend($.fn.datetimepicker.defaults,COM_DEFAULT._dateTimePickerOpt,{language:"cus-lang"})),("ALL"==e||-1!==$.inArray("daterangepicker",e))&&$.fn.daterangepicker&&($.fn.daterangepicker.defaultOptions={})&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"daterangepicker"),$.extend($.fn.daterangepicker.defaultOptions,COM_DEFAULT._dateRangePickerOpt,{locale:TEDU_LANGUAGE._daterangepicker()})),("ALL"==e||-1!==$.inArray("select2",e))&&$.fn.select2&&(TEDU_LANGUAGE._select2(),$.fn.select2.defaults.set("language",COM_TOOLS._language),$.fn.select2.defaults.set("width","style"),COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj._jsfileArr,"select2")))},_data:{WEEKDAYS_:[],PLAYDAYS_:[]},private_obj_:{},cache_obj:{_jsfileArr:[],_ptWinFnNames:{},_ptWinFnList:{},_cus_jstree_cache:{}},_jsPath:function(){var e=document.currentScript?document.currentScript.src:function(){for(var e,a=document.scripts,l=a.length-1,s=l;0<s;s--)if("interactive"===a[s].readyState){e=a[s].src;break}return e||a[l].src}();return e.substring(0,e.lastIndexOf("/")+1)}(),localStorageSupport:function(){return"localStorage"in window&&null!==window.localStorage},save_toLocal:function(e,a){localStorage.setItem(e,"object"==typeof a?JSON.stringify(a):a)},get_fromLocal:function(e){return localStorage.getItem(e)},sessionStorageSupport:function(){return"sessionStorage"in window&&null!==window.sessionStorage},save_toSession:function(e,a){sessionStorage.setItem(e,"object"==typeof a?JSON.stringify(a):a)},get_fromSession:function(e){return sessionStorage.getItem(e)},requestParam:function(e){var a=location.search,l=a.indexOf("?");if(-1===l)return"";for(var s,n=a.substr(l+1),o=n.split("&"),r=0;r<o.length;r++)if(s=o[r].split("="),s[0].toUpperCase()==e.toUpperCase()){if(r===o.length-1){var c=s[1].indexOf("#");-1!==c&&(s[1]=s[1].substring(0,c))}return s[1]}return""},serializeObject:function(e){var a={},i=$(e).serializeArray();return $.each(i,function(e,i){a[i.name]=a[i.name]?a[i.name]+","+$.trim(i.value):$.trim(i.value)}),a},get_random_fun:function(e){for(var a="",l=0;l<e;l++)a+=Math.floor(10*Math.random());return a},get_UID:function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},get_GUID:function(){function e(){return(0|65536*(1+Math.random())).toString(16).substring(1)}return(e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()).replace(/-/g,"")},is_playerDay:function(e){var a=moment(e).day();return(0==a||6==a||-1!=$.inArray(e,COM_TOOLS._data.PLAYDAYS_))&&-1==$.inArray(e,COM_TOOLS._data.WEEKDAYS_)},get_nextWeekDay:function(e){return COM_TOOLS.is_playerDay(e)?(e=moment(e).add(1,"days").format("YYYY-MM-DD"),arguments.callee(e)):moment(e).format("YYYY-MM-DD")},getPosition:function(e){var a=e[0],i="BODY"==a.tagName,l=a.getBoundingClientRect();null==l.width&&(l=$.extend({},l,{width:l.right-l.left,height:l.bottom-l.top}));var s=i?{top:0,left:0}:e.offset(),n={scrollTop:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),scrollLeft:i?document.documentElement.scrollLeft||document.body.scrollLeft:e.scrollLeft()},o=i?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},l,n,o,s)},_ajax_jumpToLogin:function(e,a){if(COM_DEFAULT._forcedExit&&!0===COM_DEFAULT._forcedExit.ajaxForm){var i=cumCheckPwin(a||window);e&&-1!==e.indexOf("\"code\":\"8001\"")&&(i.location.href=COM_DEFAULT._contextPath||"/")}},DT_init:function(e,a,i,l,s,n){var o=Math.abs,r={},c={},d="string"==$.type(i),p="object"==$.type(s)?s:{};d?c={ajax:{url:i,type:l||"get",dataSrc:function(e){return e&&0==e.isFilterTag?(e.recordsTotal=0,e.recordsFiltered=0,[]):e.data},data:function(e){return cus_dt_ajaxdata(e,p)}}}:(c={data:i,serverSide:!1,processing:!1},n=l),n="object"==$.type(n)?n:{},n.other="object"==$.type(n.other)?n.other:{};var u=$("#"+e).DataTable($.extend(!0,{columns:a,initComplete:function(a,e){var i=this.api();if(a._select&&"mutil"==a._select.style&&($(a.nTableWrapper).off("click.dtcus",".cus-checkbox-all").on("click.dtcus",".cus-checkbox-all",function(){$(this).hasClass("cus-checked")?($(this).removeClass("cus-checked"),i.rows().deselect()):($(this).addClass("cus-checked"),i.rows().select())}),i.off("select.dt.dtcus deselect.dt.dtcus").on("select.dt.dtcus deselect.dt.dtcus",function(i,e){e&&$(a.nTableWrapper).find(".cus-checkbox-all").toggleClass("cus-checked",e.rows({selected:!0}).count()==e.rows().count())})),$.isFunction(n.jsTrDblclick)){var l,s,r=null;$(a.nTBody).off("dblclick.dtcus touchstart.dtcus touchmove.dtcus touchend.dtcus","tr").on({"dblclick.dtcus":function(){n.jsTrDblclick(COM_TOOLS.DT_getRowsSourceData(i,this)[0],$(this))},"touchstart.dtcus":function(a){a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(l=a.originalEvent.changedTouches[0].clientX,s=a.originalEvent.changedTouches[0].clientY,r=setTimeout(function(){$(a.currentTarget).trigger("dblclick.dtcus")},750))},"touchmove.dtcus":function(a){r&&a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(50<o(l-a.originalEvent.changedTouches[0].clientX)||50<o(s-a.originalEvent.changedTouches[0].clientY))&&clearTimeout(r)},"touchend.dtcus":function(){r&&clearTimeout(r)}},"tr").off("dblclick.dtcus",".select-checkbox, :input, .no-Sel-obj").on("dblclick.dtcus",".select-checkbox, :input, .no-Sel-obj",function(){return!1})}$.isFunction(n.jsInitComplete)&&n.jsInitComplete.call(i,a,e)},drawCallback:function(e){$.isFunction(n.jsDrawCallback)&&n.jsDrawCallback.call(this.api(),e)},select:{style:n.selectStyle||"mutil",selector:"td:not(td:has(:input))",info:!1}},c,n.other));return r.table=u,r.setAjaxData=function(e,a,i){"object"==$.type(e)&&(p=e,!i&&COM_TOOLS.DT_ajaxReload(u,!0,a))},r.getAjaxData=function(){return p},r.getSelectRowsData=function(e){return COM_TOOLS.DT_getSelectRowsSourceData(u,e)},r},DT_getSelectRows:function(e){return COM_TOOLS.DT_getSelectRowsData(e,"itemid")},DT_getSelectRowsData:function(e,a){var i=[];return"string"===$.type(a)?e.rows(".selected").nodes().to$().each(function(){i.push($(this).data(a))}):e.rows(".selected").nodes().to$().each(function(){i.push($(this).data())}),i},DT_getSelectRowsSourceData:function(e,a,i){return COM_TOOLS.DT_getRowsSourceData(e,!0===i?"":".selected",a)},DT_getRowsSourceData:function(e,a,i){var l=[];return"string"===$.type(i)?e.rows(a||"").every(function(){l.push(this.data()[i])}):e.rows(a||"").every(function(){l.push(this.data())}),l},DT_getColumnSum:function(e,a,i){var l=[];return e.columns(a).every(function(a){var s=this.data().reduce(function(e,a){return COM_TOOLS.fnFloatSum(e,a)},0);i&&$(this.footer()).html(s);var n={};n[e.column(a).dataSrc()]=s,l.push(n)}),l},DT_getSelectRowsInputData:function(e,a){var i=[];return e.rows(!0===a?"":".selected").nodes().to$().each(function(){var e={};e.id=$(this).data("itemid"),$(this).find(".js-getval").each(function(){$(this).attr("name")&&(e[$(this).attr("name")]=$(this).val())}),i.push(e)}),i},DT_tdToinpEdit:function(e,a){var i=e.rows(".selected").nodes().to$();return i.length?void e.columns(a).nodes().to$().each(function(e){$(this).filter(function(){return $(this).parent().hasClass("selected")}).each(function(){if(!$(this).children().is("input.js-getval")){var i=$(this).text(),l=$("<input name='"+a[e].split(":")[0]+"' class='input-sm js-getval no-Sel-obj' type='text'>");l.val(i),$(this).html(l)}})}):(COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noSelrows"]),!1)},DT_inpTotdSave:function(e,a,i){var l="";return e.rows(".selected").nodes().to$().find("input[name="+a[0].split(":")[0]+"]").length?(l=COM_TOOLS.DT_getSelectRowsInputData(e),!1!=i&&e.columns(a).nodes().to$().each(function(){$(this).filter(function(){return $(this).parent().hasClass("selected")}).each(function(a,i){if($(this).children().is("input.js-getval")){var l=$(this).children().val();e.cell(i).data(l)}})})):COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noSelrows"]),l},DT_getInputSum:function(e,a,i){var l=0;return e.columns(a).nodes().to$().each(function(){$(this).filter(function(){return i||$(this).parent().hasClass("selected")}).each(function(){$(this).children().is("input[type=text]")&&(l=COM_TOOLS.fnFloatSum(l,$(this).children().val()))})}),l},DT_getCurPageIndex:function(e,a){var i=e.page()||0;return a&&(COM_TOOLS.private_obj_.pageIndex=i),i},DT_setCurPageIndex:function(e,a){var i=a||COM_TOOLS.private_obj_.pageIndex||0;e.page(parseInt(i)).draw(!1),COM_TOOLS.private_obj_.pageIndex=0},DT_ajaxReload:function(e,a,i){var l={cb:null,rp:!0};"boolean"==typeof a&&(l.rp=a),"function"==typeof i&&(l.cb=i),e.ajax.reload(l.cb,l.rp)},DT_checkboxReset:function(e){$(e.table().container()).find(".cus-checkbox-all").removeClass("cus-checked")},DT_getNode:function(e,a){return /body|footer|header|node|container/.test(a)?e.table()[a]():""},select2_init:function(e,a,i,l,s){function n(e,a){return null==a.toPinYin?0<=a.toUpperCase().indexOf(e.toUpperCase()):!!(0<=a.toPinYin().indexOf(e.toUpperCase()))||0<=a.toUpperCase().indexOf(e.toUpperCase())}var o={select2:$("#"+e)};if(o.select2.data("select2_init"))return o.select2.data("select2_init");var r={iscache:!0,multiple:o.select2.prop("multiple")||!1,ispinyin:!1,initValue:o.select2.attr("selectedvalue")||"",drawCallBack:function(){},other:{}},c=o.select2.data()||{};s=$.extend(!0,{},"object"==$.type(a)?a:"array"==$.type(a)&&"object"==$.type(i)?i:"object"==$.type(s)?s:{}),s.hasOwnProperty("ispinyi")&&(s.ispinyin=s.ispinyi,delete s.ispinyi),$.extend(!0,r,s),c.opt_url&&(a=c.opt_url,i="",l=""),c.opt_ajaxtype&&(i=c.opt_ajaxtype),c.opt_ajaxdata&&(l=c.opt_ajaxdata);var d=$.Callbacks(),p=$.Callbacks();if(o.select2.on("change",function(a){$(this).trigger("focusout.validate").trigger("click.validate"),d.fire(a)}).on("select2:select select2:unselect",function(a){p.fire(a.params.data,a)}),o.setVal=function(e,a){o.select2.val(e).trigger("change"),a?o.select2.trigger("change.select2").trigger("focusout.validate").trigger("click.validate"):o.select2.trigger("change")},o.getVal=function(){return o.select2.val()},o.getSelectedData=function(){return o.select2.select2("data")||[]},o.updateOption=function(e){o.select2.html(e).trigger("change.select2"),o.select2.trigger("focusout.validate").trigger("click.validate")},o.changeCallback=function(e){"function"==$.type(e)&&d.add(e)},o.changeCallbackByitem=function(e){"function"==$.type(e)&&p.add(e)},o.destroy=function(){o.select2.select2("destroy"),o.select2.removeData("select2_init")},r.ispinyin&&COM_TOOLS.requireJsFn(["cusPinYin"],[],function(){}),"string"!=$.type(a)||""==$.trim(a))"array"==$.type(a)?r.ispinyin?$.fn.select2.amd.require(["select2/compat/matcher"],function(e){o.select2.select2($.extend(!0,{multiple:r.multiple,data:a,matcher:e(n)},r.other)),""!=r.initValue&&o.setVal(r.initValue),r.drawCallBack(!0)}):(o.select2.select2($.extend(!0,{multiple:r.multiple,data:a},r.other)),""!=r.initValue&&o.setVal(r.initValue),r.drawCallBack()):r.ispinyin?$.fn.select2.amd.require(["select2/compat/matcher"],function(e){o.select2.select2($.extend(!0,{multiple:r.multiple,matcher:e(n)},r.other)),""!=r.initValue&&o.setVal(r.initValue),r.drawCallBack(!0)}):(o.select2.select2($.extend(!0,{multiple:r.multiple},r.other)),""!=r.initValue&&o.setVal(r.initValue),r.drawCallBack());else if(i=i||"get",r.iscache)$.ajax({type:i,url:a,data:"function"==$.type(l)?l("",""):"object"==$.type(l)?l:{},cache:!1,dataType:"json",success:function(e){e&&(r.ispinyin?$.fn.select2.amd.require(["select2/compat/matcher"],function(a){o.select2.select2($.extend(!0,{multiple:r.multiple,data:0==e.isFilterTag?[]:e.results,matcher:a(n)},r.other)),""!=r.initValue&&o.setVal(r.initValue),r.drawCallBack(!0)}):(o.select2.select2($.extend(!0,{multiple:r.multiple,data:0==e.isFilterTag?[]:e.results},r.other)),""!=r.initValue&&o.setVal(r.initValue),r.drawCallBack()))}});else{var u={multiple:r.multiple,ajax:{url:a,dataType:"json",cache:!1,delay:250,processResults:function(e){return e&&0==e.isFilterTag?{results:[]}:e},data:function(e){return"function"==$.type(l)?l(e.term,e):{q:e.term}}},minimumInputLength:1,placeholder:LOCAL_MESSAGE_DATA["platform.plugin.msg.enterSearch"]};o.select2.select2($.extend(!0,u,r.other))}return o.select2.data("select2_init",o),o},jstree_init:function(e,a){var i="string"==$.type(e)?$("#"+e):e;if(i.data("jstree_init"))return i.data("jstree_init");a="object"==$.type(a)?a:{};var l={},s={core:{dblclick_toggle:!1},themes:{icons:!1}},n={groupName:"",url:!1,ajaxData:!1,ids:[],input_val_obj:$(),input_text_obj:$(),input_val_name:"",input_text_name:"",initCallback:function(){},dataFilter:"",other:{}};$.extend(!0,n,a);var o,r;o=n.input_val_obj.length?n.input_val_obj:"string"==$.type(e)?$("#"+e+"_val"):i.nextAll("input.jstree_init_val:hidden"),r=n.input_text_obj.length?n.input_text_obj:"string"==$.type(e)?$("#"+e+"_text"):i.nextAll("input.jstree_init_text:hidden"),!n.input_val_name||0!=o.length||(o=$("<input type=\"hidden\" name=\""+n.input_val_name+"\" />"),i.after(o)),!n.input_text_name||0!=r.length||(r=$("<input type=\"hidden\" name=\""+n.input_text_name+"\" />"),i.after(r)),"array"==$.type(n.url)?$.extend(!0,s,{core:{data:data}}):n.url&&"string"==$.type(n.url)&&$.extend(!0,s,{core:{data:{url:n.url,data:n.ajaxData,cache:!1}}}),$.extend(!0,s,n.other),"object"==$.type(s.core.data)&&s.core.data.url&&(n.groupName&&COM_TOOLS.cache_obj._cus_jstree_cache[n.groupName]&&COM_TOOLS.cache_obj._cus_jstree_cache[n.groupName].length?$.extend(!0,s,{core:{data:COM_TOOLS.cache_obj._cus_jstree_cache[n.groupName]}}):$.extend(!0,s,{core:{data:{url:s.core.data.url,data:s.core.data.data,cache:!1,dataFilter:function(e,a){if(COM_TOOLS._ajax_jumpToLogin(e),n.dataFilter&&"function"==$.type(n.dataFilter))return n.dataFilter(e,a);if(e){var i=jQuery.parseJSON(e);return 0==i.isFilterTag?"[]":e}return e},success:function(e){!!n.groupName&&e&&e.length&&(COM_TOOLS.cache_obj._cus_jstree_cache[n.groupName]=e)}}}}));var c=$.Callbacks();return $.jstree.reference(i)||(i.jstree(s).on("ready.jstree",function(){var e=$(this).jstree(!0),a=[];"array"==$.type(n.ids)&&n.ids.length?a=n.ids:o.length&&""!=$.trim(o.val())&&(a=o.val().split(",")),a.length&&e.select_node(a,!0,!1),"function"==$.type(n.initCallback)&&n.initCallback()}).on("changed.jstree",function(){var e=l.get_selected(!0),a=[],s=[];$.each(e,function(e,i){a.push(i.id),s.push(i.text)}),o.length&&o.val(a.join(",")),r.length&&r.val(s.join(",")),c.fire(a,s,e)}),i.data("jstree_init",l)),l.jstree=i.jstree(!0),l.select_node=function(e,a,i){l.jstree.select_node(e,a,i)},l.get_selected=function(e){return l.jstree.get_selected(e)},l.destroy=function(e){l.jstree.destroy(e),i.removeData("jstree_init")},l.changeCallback=function(e){"function"==$.type(e)&&c.add(e)},l.deselect_all=function(e){l.jstree.deselect_all(e)},l.target=i,l},alert:function(e,a){return layer.msg(e||"",$.extend({zIndex:layer.zIndex},a))},alert2:function(e,a){return layer.msg(e||"",$.extend({zIndex:layer.zIndex},{time:0,btn:[LOCAL_MESSAGE_DATA["platform.plugin.com_btn.confirm"]],btnAlign:"c",shade:.3,shadeClose:!1},a))},confirm:function(e,a,i,l){var s="function"==typeof a;return s&&(l=i,i=a),layer.confirm(e||"",$.extend({zIndex:layer.zIndex,btn:[LOCAL_MESSAGE_DATA["platform.plugin.com_btn.confirm"],LOCAL_MESSAGE_DATA["platform.plugin.com_btn.cancel"]],title:LOCAL_MESSAGE_DATA["platform.plugin.com_label.message"]},s?{}:a),i,l)},formatMoney:function(e,a,l,s,n){var o=Math.abs;e=e||0,a=isNaN(a=o(a))?2:a,l=l===void 0?"\uFFE5":l,s=s||",",n=n||".";var r=0>e?"-":"",c=parseInt(e=o(+e||0).toFixed(a),10)+"",i=3<(i=c.length)?i%3:0;return l+r+(i?c.substr(0,i)+s:"")+c.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?n+o(e-c).toFixed(a).slice(2):"")},requireJsFn:function(e,a,i){var l={};l.loadFile=function(e,a){if(COM_TOOLS._jsFileList[e].js&&(COM_TOOLS.cache_obj._jsfileArr.push(e),$.ajax({type:"get",url:COM_TOOLS._jsPath+COM_TOOLS._jsFileList[e].js,dataType:"script",cache:!0,success:function(){a&&a()},error:function(){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.1102"])}})),COM_TOOLS._jsFileList[e].css&&!l.checkCssIsLoad(COM_TOOLS._jsFileList[e].css)){var i=$("#cus_app_link");0==i.length&&(i=$("head link[rel=\"stylesheet\"]").filter(function(){return-1!=$(this).attr("href").indexOf("css/style.css")})),i.before($("<link rel=\"stylesheet\" type=\"text/css\" href=\""+COM_TOOLS._jsPath.replace("/js/","/css/")+COM_TOOLS._jsFileList[e].css+"\"/>"))}},l.checkCssIsLoad=function(e){return!!$("head link[rel=\"stylesheet\"]").filter(function(){return e.substring(e.indexOf("css/"))==$(this).attr("href").substring($(this).attr("href").indexOf("css/"))}).length},l.forCheck=function(e,a){for(var l=0,s=e.length;l<s;l++)COM_TOOLS._jsFileList[e[l]]&&-1===$.inArray(e[l],COM_TOOLS.cache_obj._jsfileArr)&&a&&a(e[l])},l.ready_check=function(e){for(var a=0,i=e.length;a<i;a++)if(COM_TOOLS._jsFileList[e[a]]&&-1===$.inArray(e[a],COM_TOOLS.cache_obj._jsfileArr))return!1;return!0},l.fn1=function(){l.forCheck(e,function(s){l.loadFile(s,function(){l.ready_check(e)&&i&&window.setTimeout(function(){COM_TOOLS.initjSDefaultOpt(e.concat(a)||"ALL"),i()},4)})})},"array"===jQuery.type(a)&&0<a.length&&!l.ready_check(a)?l.forCheck(a,function(s){l.loadFile(s,function(){l.ready_check(a)&&("array"===jQuery.type(e)&&0<e.length&&!l.ready_check(e)?l.fn1():i&&i())})}):"array"===jQuery.type(e)&&0<e.length&&!l.ready_check(e)?l.fn1():i&&i()},fnTabPage:function(e,a,i){var l={};if("string"===jQuery.type(e)&&$("#"+e).length){var s=$("#"+e);if(s.data("inited"))return s.data("inited");var n=s.is("[isiframe]");n&&($("body").addClass("flex-tabpage"),$("<style type=\"text/css\">html, body{height: 100%;} .flex-tabpage .cus-tabmodel-box{padding-right:0;position: absolute;left: 0;top: 0;height: 42px; width: 100%;}.flex-tabpage .tab-content{height: 100%;padding-top: 42px;}.flex-tabpage .tab-content .tab-pane{height:100%;}</style>").appendTo("head"));var o=s.find("a[data-toggle=\"tab\"]").on("shown.bs.tab",function(l,e){var s=$(l.target),o=s.attr("aria-controls")||t.attr("href").replace("#",""),r=$.trim(s.data("itemurl")),c=$("#"+o),d=s.data("itemcallback");if(!r)d&&COM_TOOLS.private_obj_[d]();else if(0<c.length)if(n){var p=c.children("iframe");p.length?s.is("[data-isreload=true]")&&(COM_TOOLS.loadingOverlay.open(c),p.addClass("layui-layer-load").attr("src",p.attr("dsrc"))):(COM_TOOLS.loadingOverlay.open(c),p=$("<iframe scrolling=\"auto\" allowtransparency=\"true\" style=\"height:100%;width:100%;display:block;\" id=\"tabmodl_"+o+"\" name=\"tabmodl_"+o+"\" frameborder=\"0\" src=\""+r+"\" dsrc=\""+r+"\"></iframe>"),p.on("load",function(){COM_TOOLS.loadingOverlay.close(c),d&&d()}),c.html(p))}else(s.is("[data-isreload=true]")||"API"==e||10>$.trim(c.html()).length)&&(COM_TOOLS.private_obj_._curTabPageid=o,a&&a(),c.load(r,function(){d&&COM_TOOLS.private_obj_[d](),i&&i(),COM_TOOLS.fnInitInputHelpVal()}));n||$(window).trigger("resize")});$.trim(o.eq(0).data("itemurl"))&&o.eq(0).trigger("shown.bs.tab",["API"]),l.reloadOneTab=function(a,i){if(a){var l=$("#"+e+" a[data-toggle=\"tab\"][href=\""+a+"\"]");i?(l.tab("show"),!l.is("[data-isreload=true]")&&$.trim(l.data("itemurl"))&&l.trigger("shown.bs.tab",["API"])):$.trim(l.data("itemurl"))&&l.trigger("shown.bs.tab",["API"])}},s.data("inited",l)}return l},fnFloatSum:function(e,a){var i,l,s;try{i=e.toString().split(".")[1].length}catch(a){i=0}try{l=a.toString().split(".")[1].length}catch(a){l=0}return s=Math.pow(10,Math.max(i,l)),(e*s+a*s)/s},fnInitInputHelpVal:function(e){COM_DEFAULT._isOpenHelpMsg.helpMsgDefVal&&window.setTimeout(function(){$(".js-helpmsg:text[data-titlemsg!=\"true\"]:not([placeholder])").attr("placeholder",function(e,a){var i=$(this).data("helpdata");return i=i?i.toString().split(","):[],TEDU_MESSAGE.get($(this).data("helpmsg"),i)||a})},"number"===jQuery.type(e)?e:300)},callParentWinFn:function(e,a){if(e&&COM_TOOLS.cache_obj._ptWinFnNames[e]){var i=cumGetParentWinGlobel();i.COM_TOOLS.private_obj_[COM_TOOLS.cache_obj._ptWinFnNames[e]]&&i.COM_TOOLS.private_obj_[COM_TOOLS.cache_obj._ptWinFnNames[e]](a)}},callParentWinCacheFn:function(e,a){if(e&&COM_TOOLS.cache_obj._ptWinFnNames[e])if("function"==$.type(COM_TOOLS.cache_obj._ptWinFnNames[e]))COM_TOOLS.cache_obj._ptWinFnNames[e](a);else{var i=cumGetParentWinGlobel();i.COM_TOOLS.cache_obj._ptWinFnList[COM_TOOLS.cache_obj._ptWinFnNames[e]]&&i.COM_TOOLS.cache_obj._ptWinFnList[COM_TOOLS.cache_obj._ptWinFnNames[e]](a)}},setCacheFnForChildWin:function(e){COM_TOOLS.cache_obj._ptWinFnList=$.isEmptyObject(e)?{}:e},eChartsTools:function(){function e(e,a,l,i){var s={dnames:[],series:[],legends:[]},l=l||e.data("js_fopt")||{},i=i||e.data("js_dopt")||{},o=!0;return $.each(a||[],function(e,a){var n=$.extend(!0,{},a,{}).data;$.each(n||[],function(e,a){var l=i[a.name]?i[a.name]:a.name;n[e].name=l,o&&s.dnames.push(l)}),o=!1;var r=$.extend(!0,{},l[a.cname],{})||{};r.data=n,s.series.push(r),s.legends.push(r.name)}),s}function a(a,i,l,s,n,o){var r={},c=e(a,l,s,n);r.series=c.series;var i=i||a.data("js_type");return"bar"==i||"line"==i?(r.yAxis={type:"value"},r.xAxis={data:c.dnames},r.tooltip={trigger:"axis"},r.legend={data:c.legends}):("pie"==i||"funnel"==i)&&(r.tooltip={trigger:"item"},r.legend={data:c.dnames}),$.extend(!0,r,o||a.data("js_opt")||{})}function i(e,i,l,s,n,o,r){var c={};"array"==$.type(s)?(c=a(e,l,s,n,o,r),i.setOption(c)):"string"==$.type(s)?(i.showLoading(),$.ajax({type:s.split("||")[1]||"get",url:s.split("||")[0],async:!0,cache:!1,dataType:"json",success:function(s){i.hideLoading(),c=a(e,l,s,n,o,r),i.setOption(c)}})):"object"==$.type(s)?(i.showLoading(),$.ajax({type:s.type||"get",url:s.url,data:s.data||{},async:!0,cache:!1,dataType:"json",success:function(s){i.hideLoading(),c=a(e,l,s,n,o,r),i.setOption(c)}})):console.log("error")}var l={};return l.initOpt=function(e,a,l,s,n,o){var r=$(e),c=echarts.init(r[0]);return r.data({js_type:a,js_fopt:s,js_dopt:n,js_opt:o}),i(r,c,a,l,s,n,o),c},l.updateData=function(e,a){var l=$(e);i(l,echarts.getInstanceByDom(l[0]),!1,a,!1,!1,!1)},l}(),infoTipsFn:function(e,a,i,l){var s={hideTime_:300,showTime_:400,html:!0,imageZoom:!1,placement:"left",trigger:"manual",container:"body",maxHeight:"",maxWidth:"276px",height:"",title:"",content:function(){var e=i?i($(this)):"";return /<img[^>]*/.test(e)&&(s.height=s.maxHeight?s.maxHeight:$(window).height()*(/left|right/.test(s.placement)?.5:.4)+"px"),e}};$.extend(s,l||{}),s.template="<div class=\"popover cus-popover-box\" role=\"tooltip\" style=\"max-width:"+s.maxWidth+";"+(s.imageZoom?"width:"+s.maxWidth+";":"")+"\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\" style=\""+(s.maxHeight?"max-height:"+s.maxHeight+";":"")+"\"></div></div>",s.imageZoom&&COM_TOOLS.requireJsFn(["jqueryZoom"],[],!1),$(e).on("mouseleave",a,function(){var e=$(this),a=e.data("show_timer");a&&window.clearTimeout(a);var i=window.setTimeout(function(){e.popover("destroy").removeClass("js-mouseove").off("shown.bs.popover")},s.hideTime_);return e.data("hide_timer",i),!1}).on("mouseenter",a,function(){var e=$(this),a=e.data("hide_timer");if(a&&window.clearTimeout(a),!e.hasClass("js-mouseove")){var i=window.setTimeout(function(){e.on("inserted.bs.popover",function(){$("#"+e.attr("aria-describedby")).children(".popover-content").css({height:s.height,"max-height":"auto"})}).on("shown.bs.popover",function(){s.imageZoom&&$("#"+e.attr("aria-describedby")).find("img").wrap("<span class=\"img-zoom-box\"></span>").css("display","block").parent().zoom()});var a=e.addClass("js-mouseove").popover(s).popover("show").attr("aria-describedby");$("#"+a).on("mouseenter",function(){var a=e.data("hide_timer");return a&&window.clearTimeout(a),!1}).on("mouseleave",function(){return e.popover("destroy").removeClass("js-mouseove").off("shown.bs.popover"),!1})},s.showTime_);e.data("show_timer",i)}return!1})},loadingShade:{open:function(e,a){layer.load(1,{time:1e3*(e||0),shade:a||[.5],zIndex:layer.zIndex})},close:function(){layer.closeAll("loading")}},loadingBtn:{createLabel:function(e){e.wrapInner("<span class=\"cus-spinner-label\"></span>")},createSpinner:function(e){for(var a=["<div class=\"cus-spinner cus-spinner-fading-circle\">"],l=1;12>=l;l++)a.push("<div class=\"cus-circle",l," cus-circle\"></div>");a.push("</div>"),e.append(a.join(""))},open:function(e){var a="string"==$.type(e)?$("#"+e):e;a.addClass("cus-spinner-box").attr("data-loading","").prop("disabled",!0),0==a.children(".cus-spinner-label").length&&this.createLabel(a),0==a.children(".cus-spinner").length&&this.createSpinner(a)},close:function(e){var a="string"==$.type(e)?$("#"+e):e;a.each(function(){var e=$(this);e.removeAttr("data-loading").prop("disabled",function(){return e.is("[must_disabled]")||!1})})}},loadingOverlay:{open:function(e){var a="string"==$.type(e)?$("#"+e):e;a.is(":button")?COM_TOOLS.loadingBtn.open(a):a.addClass("model-overlay")},close:function(e){var a="string"==$.type(e)?$("#"+e):e;a.is(":button")?COM_TOOLS.loadingBtn.close(a):a.removeClass("model-overlay")}},customValid:{specialChars:function(e,a){var i=/[\-\_\,\!\|\~\`\(\)\#\$\%\^\&\*\{\}\:\;\"\<\>\?]/g;return null!=a&&(i=new RegExp("[\\"+a.join("\\")+"]","g")),i.test(e)}},arrayUniqueFn:function(e){var s,n,r=[],a={};for(s=0,n=e.length;s<n;s++)void 0===a[e[s]]&&(r.push(e[s]),a[e[s]]=!0);return r},arrayUniquePushFn:function(e,a){return-1===$.inArray(a,e)&&e.push(a)},arrayObjectSortBy:function(e,i,l){l=l||1,e.sort(function(e,s){return e=e[i],s=s[i],e<s?-1*l:e>s?1*l:0})},cus_mult_choice:function(e,a,i,l,s){var n=$("#"+e),o=n.children(".cus-mult-choice"),r=l?$("#"+l):[],c=s?$("#"+s):[];n.on("click",".js-mult-remove",function(){$(this).closest(".mult-item").remove(),r.length&&r.val(d.setHiddenValue("code")),c.length&&c.val(d.setHiddenValue("text"))}).on("click",".cus-mult-btn",function(){a&&a()});var d={addItem:function(e,a){return"-1"!=i&&o.find("span").length>=i?(COM_TOOLS.alert("\u6700\u591A\u6DFB\u52A0"+i+"\u4E2A"),!1):!o.children("span").is("[data-code="+e+"]")&&void(o.append("<span data-text=\""+a+"\" data-code=\""+e+"\" class=\"mult-item\">"+a+" <i class=\"glyphicon glyphicon-remove js-mult-remove\"></i></span>"),r.length&&r.val(d.setHiddenValue("code")).trigger("focusout.validate"),c.length&&c.val(d.setHiddenValue("text")))},removeAll:function(){o.html(""),r.length&&r.val(""),c.length&&c.val("")},backfill:function(e,a){if(null!=e&&e.length){var i=e.split(","),l=a.split(",");$.each(i,function(e,a){d.addItem(a,l[e])})}},getMultItem:function(e){var a=[],e=e||0;return $.each(o.find("span"),function(l,i){a.push(e?$(i).data():$(i).data("code"))}),a},setHiddenValue:function(e){var a=[];return $.each(o.find("span"),function(l,i){a.push($(i).data(e))}),a.join(",")}};return d},parseOjects:function(e){var a={};return e=$.trim(e),e&&("{"!=e.substring(0,1)&&(e="{"+e+"}"),a=new Function("return "+e)()),a},parseArray:function(e){var a=[];return e=$.trim(e),""!=e&&("["!=e.substring(0,1)&&(e="["+e+"]"),a=new Function("return "+e)()),a},ajaxFn:function(e,a,i){var l={dataType:"json",cache:!1};return $.extend(!0,l,e,{beforeSend:function(l){1==a?COM_TOOLS.loadingShade.open(0,i):2==a?COM_TOOLS.loadingBtn.open(i):3==a&&COM_TOOLS.loadingOverlay.open(i),"function"==$.type(e.beforeSend)&&e.beforeSend(l)},complete:function(l,s){setTimeout(function(){1==a?COM_TOOLS.loadingShade.close():2==a?COM_TOOLS.loadingBtn.close(i):3==a&&COM_TOOLS.loadingOverlay.close(i)},300),"function"==$.type(e.complete)&&e.complete(l,s)}}),$.ajax(l)},docEditor:function(e,a,i){if(i=i||{},!(window.CKEDITOR&&window.CKEDITOR.dom)||!$("#"+e).length)return!1;"object"==typeof a&&(i=a,a="");var l=$.extend({imageUploadUrl:COM_DEFAULT._fileServeOpt.fileUploadUrl,filebrowserImageUploadUrl:COM_DEFAULT._fileServeOpt.fileUploadUrl,fileUploadMaxSize:COM_DEFAULT._fileServeOpt.defaultFileSize,imgUploadMaxSize:COM_DEFAULT._fileServeOpt.imgFileSize,fileUploadType:COM_DEFAULT._fileServeOpt.fileType,imgUploadType:COM_DEFAULT._fileServeOpt.imgType},i);l.imageUploadUrl=l.imageUploadUrl+"?type=1"+(a?"&"+a:""),l.filebrowserImageUploadUrl=l.filebrowserImageUploadUrl+"?type=2"+(a?"&"+a:"");var s=CKEDITOR[i.is_inline_init?"inline":"replace"](e,l);return s},sel_make_optionFn:function(e){var a=$("<option value=\"\">\u8BF7\u9009\u62E9</option>");return $.each(e,function(e,i){var l=$("<option value=\""+i.id+"\">"+i.text+"</option>");l.data("data",i),a=a.add(l)}),a},_view:{setInputStatus:function(e,a,i){if(e&&(e="string"==typeof e?$(e):e,0<e.length)){var l=e.parent(),s=l.hasClass("input-group"),n=s?l.next(".form-control-feedback"):e.next(".form-control-feedback"),o=s?l.parent():l;o.removeClass("has-success has-warning has-error has-feedback"),n.length&&n.remove();var r="";if("success"===a?(o.addClass("has-feedback has-success"),r="<span class=\"glyphicon glyphicon-ok form-control-feedback \"></span>"):"warning"===a?(o.addClass("has-feedback has-warning"),r="<span class=\"glyphicon glyphicon-warning-sign form-control-feedback \"></span>"):"error"===a?(o.addClass("has-feedback has-error"),r="<span class=\"glyphicon glyphicon-remove form-control-feedback \"></span>"):r="",i&&(r=""),r)if(s){var c=$(r),d=e.nextAll(".input-group-btn, .input-group-addon");if(d.length){var p=0;$.each(d,function(e,a){p+=$(a).outerWidth()}),c.css("right",p+15+"px")}l.after(c)}else e.after($(r))}},cusPopover:function(e,a,i,l){var s={container:"body",placement:"bottom",content:"",trigger:"click",width:"",html:!0,title:"<button type=\"btn\" class=\"btn btn-warning btn-sm cus-pop-close\" onclick=\"javascript:$('#"+e+"').trigger('click')\"><i class=\"glyphicon glyphicon-chevron-up\"></i></button>"},n="",o="";"object"==$.type(a)&&(n=$(a.content),a.content=n.html(),$.extend(s,a)),$("#"+e).popover({html:s.html,container:s.container,placement:s.placement,content:s.content,trigger:s.trigger,title:s.title,template:"<div class=\"popover cus-popover-box2\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title text-right\"></h3><div class=\"popover-content\"></div></div>"}).on("show.bs.popover",function(){$(this).find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),o=$("<div>").hide().insertBefore(n),n.remove()}).on("shown.bs.popover",function(){"function"==typeof i&&i(e)}).on("hidden.bs.popover",function(){$(this).find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"),o.replaceWith(n),"function"==typeof l&&l(e)}).on("inserted.bs.popover",function(){s.width&&$("#"+$(this).attr("aria-describedby")).css({width:s.width,"max-width":"none"})})},cusHighSearch:function(e){$("#"+e).on("click",".js-highsearch-btn",function(){var e=$(this);e.data("isload")||e.siblings(".js-moreSearchBox").load(e.data("itemurl"),function(){e.data("isload",!0)})}).find(".js-moreSearchBox").click(function(){return!1})},cusFileUpload:function(e,a,i){function l(e){var a=null;return null==window.createObjectURL?null==window.URL?null!=window.webkitURL&&(a=window.webkitURL.createObjectURL(e)):a=window.URL.createObjectURL(e):a=window.createObjectURL(e),a}var s=$("#"+e);if(!s.length)return!1;if("inited"==s.data("cusFileUpload"))return!1;var n=s.is("button")?"btn":!!s.is("img")&&"img",o=0,r="";i=i||{},"object"==typeof a&&(i=a);var c=$.extend({apitype:"H5",serve_url:COM_DEFAULT._fileServeOpt.fileUploadUrl,serve_name:"upload",isname:!1,uptype:"",filetype:[],filesize:("btn"==n?COM_DEFAULT._fileServeOpt.defaultFileSize:COM_DEFAULT._fileServeOpt.imgFileSize)||5120},i);if(c.filetype.length||(c.filetype="btn"==n?COM_DEFAULT._fileServeOpt.fileType.slice():"img"==n?COM_DEFAULT._fileServeOpt.imgType.slice():[]),s.hasClass("js-dy-creation")){var d=s.attr("id"),p=$("<div class=\"js-temp-html\"></div>");if(s.before(p),"btn"==n){s.addClass("js-judge-dom"),s.data("fpath")&&(r=s.data("fpath"),c.isname=!0);var u="<span class=\"js-replace-dom\"></span>"}else if("img"==n){o=s.attr("height");s.attr("src")&&"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMvaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhERUVCNjBFMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhERUVCNjBEMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2NEM3RjlCMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ2NEM3RjlDMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgICAgICAgICAgMCAgIDBAMCAgMEBQQEBAQEBQYFBQUFBQUGBgcHCAcHBgkJCgoJCQwMDAwMDAwMDAwMDAwMDAEDAwMFBAUJBgYJDQsJCw0PDg4ODg8PDAwMDAwPDwwMDAwMDA8MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAKABGAwERAAIRAQMRAf/EAHAAAAEEAgMAAAAAAAAAAAAAAAAFBgcIAgMBBAkBAQAAAAAAAAAAAAAAAAAAAAAQAAIBBAEDAgQEBgMAAAAAAAECAwARBAUGITESQWFRcRMHIkJiMzJy0xSkFVUWFxEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9FKAoNbTRI6xvKiyN1WMsAx+Q70GygKAoCgKAoCg7urwG2+21OnjlMD7XKTHGQACUUgs7C9xcIrW97UFtMPhvF8DX/6yHR4b4jL4zLNEsrS3Fi0juCzE+pJoK28647BxjkcuBgkjXZcCZeDCzFmiDMyPFc9Sqlbrf0NvSgaFAe1AUBQFAUGyKafGmx8vElMGXhypPiTgX8JIyGU29R0sR6jpQTxh/ejXHCDbDSZibNVs0OMY3hkb1KO7qQP5gD86CGd7vM7km3ytzsFWKbICRQYsZLJBBHfwjDEDyN2JJt1J+FqBHYsAAqNNI7LHFCnV5JHIVEUepZiAPegmXdfbKXX8HxMrHT+45Lqw2Zt/pC5yUcXmgWwuREP2/j42/MaCG1ZXVXQh0dQysOoIIuCPnQc0BQFAUCpptJtOQ5x1unxhk5Kx/VnZ28IoY+tmkcA+PkRZRa5PsCQCY6yxSzY2RC+NlYshiysWUeMkUi91Yeh7exHUdKCVvtRxc7PaPyTMjvr9M7RaxW7S5lrPJ7iEHxH6ifVaCyPf5UFS+f8AF/8Aq2/kGNH4abcmTJ1lh+GOS/lNj+3iT5L+k2H8NAy6AoCgzijE00ML5CYaTOEkzZFaRIVPeRkS7Nb4Dufh3oLFcZ5J9t+K6xNbrdsTc/Uy8uTGyDLkSkWaSVhELk+g7AWAAAoGrzyfgfK1TO13IU1e+jCxHOOJktHLBf8AEsqCL8RUElD3B6diRQPnUc1+3uj1mFqcDbGLDwIlihU4+SSQvdmP0urMepPqaBS/9K4T/wA1/jZP9Kga/MeTcE5VosvWPuxFlC0+tyji5J+jkx9Y3/a7flYeqkigrshZkRnX6bsoLx3vY+ouO9BnQf/Z"!=s.attr("src")?r=s.attr("src"):s.attr("src","data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMvaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhERUVCNjBFMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhERUVCNjBEMkNCMDExRTg4QjdEODkwOTJCMDAzRkZDIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2NEM3RjlCMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ2NEM3RjlDMkNBRTExRTg5MzZBQUVFNkE0NzM5RTk4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgICAgICAgICAgMCAgIDBAMCAgMEBQQEBAQEBQYFBQUFBQUGBgcHCAcHBgkJCgoJCQwMDAwMDAwMDAwMDAwMDAEDAwMFBAUJBgYJDQsJCw0PDg4ODg8PDAwMDAwPDwwMDAwMDA8MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAKABGAwERAAIRAQMRAf/EAHAAAAEEAgMAAAAAAAAAAAAAAAAFBgcIAgMBBAkBAQAAAAAAAAAAAAAAAAAAAAAQAAIBBAEDAgQEBgMAAAAAAAECAwARBAUGITESQWFRcRMHIkJiMzJy0xSkFVUWFxEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9FKAoNbTRI6xvKiyN1WMsAx+Q70GygKAoCgKAoCg7urwG2+21OnjlMD7XKTHGQACUUgs7C9xcIrW97UFtMPhvF8DX/6yHR4b4jL4zLNEsrS3Fi0juCzE+pJoK28647BxjkcuBgkjXZcCZeDCzFmiDMyPFc9Sqlbrf0NvSgaFAe1AUBQFAUGyKafGmx8vElMGXhypPiTgX8JIyGU29R0sR6jpQTxh/ejXHCDbDSZibNVs0OMY3hkb1KO7qQP5gD86CGd7vM7km3ytzsFWKbICRQYsZLJBBHfwjDEDyN2JJt1J+FqBHYsAAqNNI7LHFCnV5JHIVEUepZiAPegmXdfbKXX8HxMrHT+45Lqw2Zt/pC5yUcXmgWwuREP2/j42/MaCG1ZXVXQh0dQysOoIIuCPnQc0BQFAUCpptJtOQ5x1unxhk5Kx/VnZ28IoY+tmkcA+PkRZRa5PsCQCY6yxSzY2RC+NlYshiysWUeMkUi91Yeh7exHUdKCVvtRxc7PaPyTMjvr9M7RaxW7S5lrPJ7iEHxH6ifVaCyPf5UFS+f8AF/8Aq2/kGNH4abcmTJ1lh+GOS/lNj+3iT5L+k2H8NAy6AoCgzijE00ML5CYaTOEkzZFaRIVPeRkS7Nb4Dufh3oLFcZ5J9t+K6xNbrdsTc/Uy8uTGyDLkSkWaSVhELk+g7AWAAAoGrzyfgfK1TO13IU1e+jCxHOOJktHLBf8AEsqCL8RUElD3B6diRQPnUc1+3uj1mFqcDbGLDwIlihU4+SSQvdmP0urMepPqaBS/9K4T/wA1/jZP9Kga/MeTcE5VosvWPuxFlC0+tyji5J+jkx9Y3/a7flYeqkigrshZkRnX6bsoLx3vY+ouO9BnQf/Z");var u="<div class=\"js-judge-dom show-mask\"><span class=\"js-replace-dom\"></span><div class=\"cus-img-mask\" style=\"line-height: "+o+"px;\"><span class=\"glyphicon glyphicon-open\"></span></div></div>"}var m="object"!=typeof a&&a||e+"_hide",g=$("<div id=\"js_is"+n+"_"+d+"\" class=\"cus-single-upload\"><div class=\"main-area "+("is-"+n)+"\"><input id=\""+m+"\" name=\""+m+"\" "+(!0==c.required?"required":"")+" class=\"hide-inp-validate\" value=\""+r+"\" type=\"text\"/><input class=\"js-inp-files hidden\" type=\"file\" accept=\""+$.map(c.filetype,function(e){return"."+e})+"\"/>"+u+"</div>"+(c.isname?"<span class=\"file-name\"></span>":"")+"</div>");if(g.find(".js-replace-dom").replaceWith(s),p.replaceWith(g),"btn"==n&&r&&c.isname){var h="";h=/targetName/.test(r)?r.split("targetName=")[r.split("targetName=").length-1]:r.split("/")[r.split("/").length-1],g.find(".file-name").attr("title",h).html("<a href=\""+r+"\">"+h+"</a>")}}else return console.error("dom\u7ED3\u6784\u9519\u8BEF\uFF0C\u7F3A\u5C11 js-dy-creation \u7684class\u3002"),!1;s.data("cusFileUpload","inited");var f=g.find(".main-area"),b=g.find(".js-judge-dom");g.off("click.jude-dom change.inp-files").on("click.jude-dom",".js-judge-dom",function(){return c.serve_url&&c.serve_name?(f.find(".tip-icon").length&&f.find(".tip-icon").remove(),g.find(".js-inp-files").click()):(COM_TOOLS.alert2(TEDU_MESSAGE.get("platform.plugin.com_msg.opt_lack")),!1)}).on("change.inp-files",".js-inp-files",function(){var e=this.files[0];if(this.value="",e){var a=1024*c.filesize,i=e.name.split(".")[e.name.split(".").length-1],s=$("<i class=\"cus-progress-bar\"></i>"),r=$("<span class=\"tip-icon success glyphicon glyphicon glyphicon-ok-circle\"></span>"),d=$("<span class=\"tip-icon error glyphicon glyphicon-remove-circle\"></span>");if(c.isname&&g.find(".file-name").html("").html(e.name),a<e.size)return COM_TOOLS.alert2(TEDU_MESSAGE.get("platform.plugin.com_msg.size_exceed",c.filesize)),!1;if(!new RegExp("^("+c.filetype.join("|")+")$","i").test(i))return COM_TOOLS.alert2(TEDU_MESSAGE.get("platform.plugin.com_msg.type_err",c.filetype.join("|"))),!1;var p=new FormData;if(p.append(c.serve_name,e),!$.isEmptyObject(c.uptype))for(var u in c.uptype)p.append(u,c.uptype[u]);"img"==n&&b.find("img").attr("src",l(e)),$.ajax({type:"post",dataType:"json",url:c.serve_url,data:p,processData:!1,contentType:!1,cache:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload.onprogress=function(e){if(e.lengthComputable){var a=Math.floor(100*(e.loaded/e.total));"btn"==n?(!b.find(".cus-progress-bar").length&&(COM_TOOLS.loadingBtn.open(b),b.append(s)),s.css("width",a+"%")):"img"==n&&(!b.parent().find(".cus-progress-bar").length&&(s.css("line-height",o+"px"),b.parent().append(s)),s.text(a+"%").css("width",a+"%"))}},e},complete:function(){"btn"==n&&COM_TOOLS.loadingBtn.close(b),s.remove()},success:function(e){1==e.state?(COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.up_success"]),f.append(r),g.find(".hide-inp-validate").val(e.path),c.required&&$.validator&&g.find(".hide-inp-validate").trigger("focusout.validate").trigger("click.validate")):0==e.state&&(COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.up_error"]),f.append(d)),c.success&&c.success(e,g)},error:function(e,a){console.log("-----",e,a),COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.com_msg.up_error"]),f.append(d)}})}})},cus_dropdown:function(e,a){a=a||{},a=$.extend(!0,{placement:"bottom",container:"body",autoPlace:"auto",pull:"left",height:"auto",width:"",autoDestroy:!1,maxWidth:"none",maxHeight:parseInt(.4*($(window).height()||500)),content:"",template:"<div class=\"cus-dropdown-plugin\"><div class=\"drop-cbox\"><div class=\"drop-cbox-overflow\"><div class=\"drop-cbox-cont\"></div></div></div></div>"},a);var i={},l="string"==$.type(e)?$("#"+e):e.selector?e:$(),s=$(a.template);return 0==l.length?(console.error("\u672A\u627E\u5230\u64CD\u4F5C\u5BF9\u8C61"),!1):l.data("cus_dropdown")?l.data("cus_dropdown"):(i.show=function(){var e=Math.round;if(l.attr("cus-cus_dropdown"))return l.trigger("inserted.cus_dropdown"),s.show(),l.trigger("shown.cus_dropdown"),!1;var i=a.placement,n=COM_TOOLS.get_UID("cus_dropdown"),o=COM_TOOLS.getPosition(l);s.attr("id",n).find(".drop-cbox-cont").html(a.content),l.attr("cus-cus_dropdown",n),s.detach().css({top:0,left:0,height:a.height||"auto",width:a.width||o.width||"auto",maxWidth:a.maxWidth||"none",display:"block"}).addClass(i),a.container?s.appendTo(a.container):s.insertAfter(l),l.trigger("inserted.cus_dropdown");var r=s.outerWidth(),c=s.outerHeight();if(a.autoPlace){var d=i,p=COM_TOOLS.getPosition($("body"));i="bottom"==i&&o.bottom+c>p.bottom?i.replace("bottom","top"):"top"==i&&o.top-c<p.top?i.replace("top","bottom"):i,s.removeClass(d).addClass(i)}var u={top:"top"==i?o.top-c:o.top+o.height,left:"left"==a.pull?o.left:o.right-r};s.css({top:e(u.top),left:e(u.left)}),l.trigger("shown.cus_dropdown")},i.hide=function(e,a){e?((a?$("#"+a.attr("cus-cus_dropdown")):s).detach(),(a||l).removeAttr("cus-cus_dropdown").trigger("hidden.cus_dropdown")):(a?$("#"+a.attr("cus-cus_dropdown")):s).hide()},i.getdropbox=function(){return s},i.autoDestroy=a.autoDestroy,l.data("cus_dropdown",i),l.on("click.cus_dropdown",function(){s.is(":hidden")?($(document).one("mouseup.cus_dropdown_api",function(e){var n=$(e.target);return!(n.closest(l).length||n.closest(s).length)&&void i.hide(a.autoDestroy)}),i.show()):($(document).off("mouseup.cus_dropdown_api"),i.hide(a.autoDestroy))}),s.on("mouseup.cus_dropdown_api",function(){return!1}),i)},cus_drop_jstree:function(e,a,i){function l(e,a){return i.hasPinyin&&null!=a.toPinYin?!!(0<=a.toPinYin().indexOf(e.toUpperCase()))||0<=a.toUpperCase().indexOf(e.toUpperCase()):0<=a.toUpperCase().indexOf(e.toUpperCase())}i=i||{},i=$.extend(!0,{wrapBoxId:"",hasSearch:!0,hasPinyin:!1,url:!1,data:!1,groupName:"",jstree:{},dropdown:{autoDestroy:!0}},i);var s="string"==$.type(e)?$("#"+e):e.selector?e:$(),n="string"==$.type(a)?$("#"+a):a.selector?a:$();if(!s.length||!n.length)return console.error("\u672A\u627E\u5230\u64CD\u4F5C\u5BF9\u8C61"),!1;var o={},r=i.wrapBoxId?"string"==$.type(i.wrapBoxId)?$("#"+i.wrapBoxId):i.wrapBoxId.selector?i.wrapBoxId:s:s;if(r.data("cus_drop_jstree"))return console.error("\u4E0D\u80FD\u91CD\u590D\u521D\u59CB\u5316"),r.data("cus_drop_jstree");i.hasPinyin&&COM_TOOLS.requireJsFn(["cusPinYin"]);var c=COM_TOOLS._view.cus_dropdown(r,$.extend(!0,{},i.dropdown,{content:(i.hasSearch?"<input class=\"jstree-searchbox form-control input-sm\"/>":"")+"<div class=\"js-dy-jstree\"></div>"}));return r.on("shown.cus_dropdown",function(){var e={checkbox:{three_state:!1},core:{dblclick_toggle:!1,themes:{icons:!1},data:{url:i.url||!1,data:i.data||!1}},search:{show_only_matches:!0,show_only_matches_children:!0,search_callback:function(e,a){return l(e,a.text)}},plugins:["checkbox","search"]};$.extend(!0,e,i.jstree);var a=c.getdropbox(),r=COM_TOOLS.jstree_init(a.find(".js-dy-jstree"),{groupName:i.groupName,input_text_obj:s,input_val_obj:n,other:e,initCallback:function(){if(i.hasSearch){var e=!1,l=a.find(".jstree-searchbox");l.keyup(function(){e&&clearTimeout(e),e=setTimeout(function(){var e=$.trim(l.val());r.jstree.search(e)},250)})}}});o.jstree_api=r}),o.show=c.show,o.hide=function(){c.hide(!0)},o.target=r,r.data("cus_drop_jstree",o),o},noviceGuide:"<div class=\"popover cus-step-popover-box\" role=\"tooltip\"> <div class=\"arrow\"></div> <h3 class=\"popover-title\"></h3> <div class=\"popover-content\"></div><div class=\"popover-navigation\"> <div class=\"btn-group\"> <button class=\"btn btn-sm btn-default\" data-role=\"prev\">&laquo; "+LOCAL_MESSAGE_DATA["platform.plugin.msg.prevStep"]+"</button> <button class=\"btn btn-sm btn-default\" data-role=\"next\">"+LOCAL_MESSAGE_DATA["platform.plugin.msg.nextStep"]+" &raquo;</button><button class=\"btn btn-sm btn-default\" data-role=\"pause-resume\" data-pause-text=\"Pause\" data-resume-text=\"Resume\">"+LOCAL_MESSAGE_DATA["platform.plugin.msg.pause"]+"</button> </div> <button class=\"btn btn-sm btn-default\" data-role=\"end\">"+LOCAL_MESSAGE_DATA["platform.plugin.msg.end"]+"</button> </div> </div>",tabScrollFn:{dom_:{ul_:$(),overBox_:$()},sumWidth:function(e){var a=0;return $(e).each(function(){a+=$(this).outerWidth()}),a},scrollTabLeft:function(){var e=Math.abs(parseInt(this.dom_.ul_.css("margin-left"))),a=this.dom_.overBox_.width(),i=0;if(this.dom_.ul_.width()<a)return!1;for(var l=this.dom_.ul_.find("li:first"),s=0;s+$(l).outerWidth()<=e;)s+=$(l).outerWidth(),l=$(l).next();if(s=0,this.sumWidth($(l).prevAll())>a){for(;s+$(l).outerWidth()<a&&0<l.length;)s+=$(l).outerWidth(),l=$(l).prev();i=this.sumWidth($(l).prevAll())}this.dom_.ul_.animate({marginLeft:0-i+"px"},"fast")},scrollTabRight:function(){var e=Math.abs(parseInt(this.dom_.ul_.css("margin-left"))),a=this.dom_.overBox_.width(),i=0;if(this.dom_.ul_.width()<a)return!1;for(var l=this.dom_.ul_.find("li:first"),s=0;s+$(l).outerWidth()<=e;)s+=$(l).outerWidth(),l=$(l).next();if(s<this.dom_.ul_.outerWidth()-a)for(s=0;s+$(l).outerWidth()<a&&0<l.length;)s+=$(l).outerWidth(),l=$(l).next();i=this.sumWidth($(l).prevAll()),0<i&&this.dom_.ul_.animate({marginLeft:0-i+"px"},"fast")},scrollToTab:function(e){var a=this.sumWidth($(e).prevAll()),i=this.sumWidth($(e).nextAll()),l=this.dom_.overBox_.width(),s=0;if(this.dom_.ul_.outerWidth()<l)s=0;else if(!(i<=l-($(e).outerWidth()+$(e).next().outerWidth())))a>l-($(e).outerWidth()+$(e).prev().outerWidth())&&(s=a-$(e).prev().outerWidth());else if(l-$(e).next().outerWidth()>i){s=a;for(var n=e;s-$(n).outerWidth()>=this.dom_.ul_.outerWidth()-l;)s-=$(n).prev().outerWidth(),n=$(n).prev()}this.dom_.ul_.animate({marginLeft:0-s+"px"},"fast")},init:function(e){var a=$(e),i=this;this.dom_={ul_:a.find(".tab-list-ul"),overBox_:a.find(".tab-list-overflow")},a.on("click",".tab-list-ul li",function(){i.scrollToTab($(this))}).on("click",".tab-left-btn",function(){i.scrollTabLeft()}).on("click",".tab-right-btn",function(){i.scrollTabRight()})}},DT_colShowBar:function(e,a){var i=$("#"+a);if(i.length&&!i.hasClass("dropdown-toggle")&&!i.is("[data-toggle]")){$("<div class=\"btn-group md-dropdown-ll0328\"></div>");i.addClass("dropdown-toggle").attr("data-toggle",dropdown)}},cusPWD:function(e,a){var i=$("#"+e);if(i.length){if(!1!=a){var l=$("<div class=\"js-temp-html\"></div>");i.before(l);var s=$("<div class=\"input-group input-group-sm js-pwd-parent\">                 <span class=\"js-replace-dom\"></span>                 <span class=\"input-group-btn\"><button class=\"btn btn-primary js-pwd-btn\" type=\"button\"><i class=\"glyphicon glyphicon-eye-close\"></i></button></span>                 </div>");i.attr("type","password"),s.find(".js-replace-dom").replaceWith(i),l.replaceWith(s)}var n=i.closest(".js-pwd-parent");n.on("click.pwd",".js-pwd-btn",function(){var e=n.find(".glyphicon");i.is("[type=password]")?(i.attr("type","text"),e.removeClass("glyphicon-eye-close").addClass("glyphicon-eye-open")):(i.attr("type","password"),e.removeClass("glyphicon-eye-open").addClass("glyphicon-eye-close"))})}}},_model:{set_i18n_fn:function(e,a,i){function l(){COM_TOOLS.ajaxFn({url:a,type:"GET",success:function(e){e&&"array"==$.type(e)&&($.each(e,function(e,a){s(e,a)}),o())}},2,c.find(".js-cus-btn-refresh"))}function s(e,a){var i=a.pid.replace(/\./g,"_"),l="<li role=\"presentation\" class=\""+(0==e?"active":"")+"\"><a href=\"#js_tab_"+i+"\" role=\"tab\" data-toggle=\"tab\">"+a.name+"</a></li>",s="<div role=\"tabpanel\" class=\"tab-pane "+(0==e?"active":"")+"\" id=\"js_tab_"+i+"\" data-pid=\""+a.pid+"\">"+n(a.child)+"</div>";d.append(l),p.append(s)}function n(e){if("array"==$.type(e)&&0<e.length){var a=[];return a.push("<div class=\"form-horizontal\">"),$.each(e,function(e,i){a.push("<div class=\"form-group\" data-dcode=\"",i.code,"\">"),a.push("<label class=\"col-sm-2 col-md-offset-2 control-label\">","1"==i.required?"<span class=\"text-danger\">*</span> ":"",i.name,"</label>"),a.push("<div class=\"col-sm-5\"><input class=\"form-control input-sm js-input-val\" type=\"text\" value=\"",i.value,"\" ","1"==i.required?"required=\"required\"":"","/></div>"),a.push("</div>")}),a.push("</div>"),a.join("")}return""}function o(){p.find("input.js-input-val[required]").on("blur",function(){""==$.trim($(this).val())?COM_TOOLS._view.setInputStatus($(this),"error"):COM_TOOLS._view.setInputStatus($(this),"")})}if(!e||!a||!i)return!1;var r="<div class=\"js-cus-tabmodel-box\" id=\"js_cus_tabmodel_box\"><div class=\"cus-tabmodel-box\"><div class=\"tab-list-box js-tab-list-box\"><button class=\"roll-nav roll-left tab-roll-btn tab-left-btn btn-primary\"><i class=\"fa fa-backward\"></i></button><div class=\"tab-list-overflow\"><div class=\"tab-list-bar\"><ul class=\"nav nav-tabs tab-list-ul pull-left js-create-tab\" role=\"tablist\"></ul></div></div><button class=\"roll-nav roll-right tab-roll-btn tab-right-btn btn-primary\"><i class=\"fa fa-forward\"></i></button></div><div class=\"cus-tabmodel-btns\"><button class=\"btn btn-primary btn-sm js-cus-btn-save js-helpmsg\" type=\"button\" data-helpmsg=\"platform.plugin.com_msg.tab_this\" data-helpdata=\""+TEDU_MESSAGE.get("platform.plugin.com_btn.save")+"\"><i class=\"glyphicon glyphicon-floppy-disk\"></i> "+TEDU_MESSAGE.get("platform.plugin.com_btn.save")+"</button><button class=\"btn btn-warning btn-sm js-cus-btn-refresh\" type=\"button\"><i class=\"glyphicon glyphicon-refresh\"></i> "+TEDU_MESSAGE.get("platform.plugin.com_btn.fresh")+"</button></div></div><div class=\"tab-content cus-tabmodel-contbox js-create-content\"></div></div>";$("#"+e).html(r);var c=$("#js_cus_tabmodel_box"),d=c.find(".js-create-tab"),p=c.find(".js-create-content");l(),c.find(".js-cus-btn-save").click(function(){var e=$(this);COM_TOOLS.confirm(TEDU_MESSAGE.get("platform.plugin.com_msg.tab_separate"),function(a){layer.close(a);var l=c.find(".js-create-content .tab-pane.active"),s=l.data("pid")||"",n=l.find(".form-group"),o=[],r=!1;n.each(function(){var e=$(this),a=e.find("input.js-input-val");a.prop("required")&&""==$.trim(a.val())&&(r=!0),o.push({cCode:e.data("dcode"),lCode:s,name:$.trim(a.val())})}),r?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.defeated")):COM_TOOLS.ajaxFn({url:i,type:"POST",data:{data:JSON.stringify(o)},success:function(e){"1"==e.code?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.success")):"-2"==e.code?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.china_notnull")):COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.defeated"))}},2,e)})}).end().find(".js-cus-btn-refresh").click(function(){d.html(""),p.html(""),l()}),COM_TOOLS._view.tabScrollFn.init("#js_cus_tabmodel_box .js-tab-list-box")},set_i18n_fn2:function(e,a,i){function l(){var e=[];y.find("[js-i18n-key]:not([js-i18n-key=\"\"])").each(function(){var a=$(this),i=$.trim(a.attr("js-i18n-key")),l=i,s=a.attr("js-i18n-label"),n=i.match(/\{([\w\.]+)\}/);if(n&&1<n.length){var o=y.find("[name=\""+n[1]+"\"]");if(0<o.length){var r=$.trim(o.val());if(r&&(l=i.replace(new RegExp("\\{"+n[1]+"\\}"),function(){return r})),e.push({code:l,oldcode:i,label:s}),y.data("validator")){var c=o.rules()||{};"required"in c||o.rules("add",{required:!0,"ck-i18n-key":!0})}else o.attr("required")||o.attr({required:"required","ck-i18n-key":!0})}}!0===COM_DEFAULT._debug&&console.error("asd")}),COM_TOOLS.ajaxFn({url:u,type:"GET",data:{data:JSON.stringify(e)},success:function(e){e&&"array"==$.type(e)&&($.each(e,function(e,a){s(a),o(a)}),f.find("input.js-input-val[required]").off("blur.i18n.check").on("blur.i18n.check",function(){c($(this))}))}},2,h.find(".js-cus-btn-refresh").add(_))}function s(e){var a=b.children("li").length,i=e.pid.replace(/\./g,"_").replace(/[\{\}]/g,""),l="<li role=\"presentation\" class=\""+(0==a?"active":"")+"\"><a href=\"#js_tab_"+i+"\" role=\"tab\" data-toggle=\"tab\">"+e.name+"</a></li>",s="<div role=\"tabpanel\" class=\"tab-pane "+(0==a?"active":"")+"\" id=\"js_tab_"+i+"\" data-pid=\""+e.pid+"\">"+r(e.child,e.oldpid)+"</div>";b.append(l),f.append(s)}function n(e){return e=(e||"")+"",e.toLowerCase().replace(/\{([\w\.-]+)\}/i,(e.match(/\{([\w\.-]+)\}/)||[])[0]||"")}function o(e){var a=n(e.oldpid),i=f.find("[js-i18n-target=\""+a+"_"+COM_DEFAULT._language+"\"]"),l=i.data("i18n_isedit");i.off("blur.i18n.evt focus.i18n.evt").on("focus.i18n.evt",function(){i.data("cur_value",$.trim(i.val()))}).on("blur.i18n.evt",function(){i.data("cur_value")!=$.trim(i.val())&&i.data("user_changed",!0)});var s=a.match(/\{([\w\.]+)\}/),o="";s&&1<s.length&&(o="[name]:not([name=\""+s[1]+"\"])"),y.find("[js-i18n-key]").filter(function(){var e=$(this);return n(e.attr("js-i18n-key"))==a&&(!o||e.is(o))}).off("keyup.i18n.evt").on("keyup.i18n.evt",function(){l||i.data("user_changed")||i.val($(this).val())})}function r(e,a){if("array"==$.type(e)&&0<e.length){var i=[];return i.push("<form class=\"form-horizontal\" novalidate=\"novalidate\" onsubmit=\"return false;\">"),$.each(e,function(e,l){i.push("<div class=\"form-group\" data-dcode=\"",l.code,"\">"),i.push("<label class=\"col-sm-2 col-md-offset-2 control-label\">","1"==l.required?"<span class=\"text-danger\">*</span> ":"",l.name,"</label>"),i.push("<div class=\"col-sm-5\"><input class=\"form-control input-sm js-input-val\" type=\"text\" value=\"",l.value,"\" ","1"==l.required?"required=\"required\"":"","js-i18n-target=\"",n(a),"_",l.code,"\" data-i18n_isedit=\"",!!l.value,"\" /></div>"),i.push("</div>")}),i.push("</form>"),i.join("")}return""}function c(e){return""==$.trim(e.val())?(COM_TOOLS._view.setInputStatus(e,"error"),!0):(COM_TOOLS._view.setInputStatus(e,""),!1)}function p(e){e?h.find(".js-cus-btn-save").show():h.find(".js-cus-btn-save").hide()}function d(e,a,i){var l=[],s=!1,n=!1;if(2==e&&(n=!a.is(".js-cus-btn-save")||!1),n){var o=a.clone().removeAttr("id").addClass("disabled");o.insertBefore(a),a.attr("must_disabled",!0).prop("disabled",!0).hide(),o.addClass("js-helpmsg").data("helpmsg","platform.plugin.help.save_i18n_only")}f.find(".tab-pane").each(function(){var e=$(this),a=(e.data("pid")||"")+"",i=e.find(".form-group"),o=a.match(/\{([\w\.]+)\}/);if(o&&1<o.length){var r=y.find("[name=\""+o[1]+"\"]");if(0<r.length){var d=$.trim(r.val());d&&(a=a.replace(new RegExp("\\{"+o[1]+"\\}"),function(){return d})),n&&r.prop("readonly",!0)}}s||i.each(function(){var e=$(this),i=e.find("input.js-input-val");return i.prop("required")&&(s=c(i)),s?(b.find("a[href=\"#"+e.closest(".tab-pane").attr("id")+"\"]").tab("show"),!1):void l.push({cCode:e.data("dcode"),lCode:a,name:$.trim(i.val())})})}),s?(p(!0),COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.defeated"))):COM_TOOLS.ajaxFn({url:m,type:"POST",data:{data:JSON.stringify(l)},success:function(e){"1"==e.code?(cumCheckPwin(parent).COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.success")),"function"==$.type(i)?i():cumParentCallValue()):"-2"==e.code?COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.china_notnull")):COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.defeated")),p(!0)},error:function(){p(!0),COM_TOOLS.alert(TEDU_MESSAGE.get("platform.plugin.com_msg.i18n")+TEDU_MESSAGE.get("platform.plugin.com_msg.defeated"))}},e,a)}if(!e||!a||!i)return!1;var u=COM_DEFAULT._modelI18nOpt.geturl,m=COM_DEFAULT._modelI18nOpt.seturl;if(!u||!m)return!1;var g="<div class=\"js-cus-tabmodel-box\" id=\"js_cus_tabmodel_box\"><div class=\"cus-tabmodel-box\"><div class=\"tab-list-box js-tab-list-box\"><button class=\"roll-nav roll-left tab-roll-btn tab-left-btn btn-primary\"><i class=\"glyphicon glyphicon-backward\"></i></button><div class=\"tab-list-overflow\"><div class=\"tab-list-bar\"><ul class=\"nav nav-tabs tab-list-ul pull-left js-create-tab\" role=\"tablist\"></ul></div></div><button class=\"roll-nav roll-right tab-roll-btn tab-right-btn btn-primary\"><i class=\"glyphicon glyphicon-forward\"></i></button></div><div class=\"cus-tabmodel-btns\"><button class=\"btn btn-primary btn-sm js-cus-btn-save js-helpmsg\" type=\"button\" data-helpmsg=\"platform.plugin.help.save_i18n\" style=\"display:none;\" ><i class=\"glyphicon glyphicon-floppy-disk\"></i> "+TEDU_MESSAGE.get("platform.plugin.com_btn.save")+"</button>&nbsp;<button class=\"btn btn-warning btn-sm js-cus-btn-refresh\" type=\"button\"><i class=\"glyphicon glyphicon-refresh\"></i> "+TEDU_MESSAGE.get("platform.plugin.com_btn.fresh")+"</button></div></div><div class=\"tab-content cus-tabmodel-contbox js-create-content\"></div></div>";$(e).html(g);var h=$("#js_cus_tabmodel_box"),b=h.find(".js-create-tab"),f=h.find(".js-create-content"),y=$(a),_=$(i);return l(),h.find(".js-cus-btn-save").click(function(){d(2,$(this))}).end().find(".js-cus-btn-refresh").click(function(){b.html(""),f.html(""),l()}),COM_TOOLS._view.tabScrollFn.init("#js_cus_tabmodel_box .js-tab-list-box"),{save:function(e){d(2,_,e)}}},msg_fn:function(e,a){var i=[],a=a||{},l={type:1,area:["280px","auto"],other:{offset:"rb",cusOffsetLeft:-10,shade:0,skin:"layui-skin-msg",move:!1,maxHeight:400,id:"cus_msg_wid_"+(e.id||"")}};$.extend(!0,l,a),l.other.skin+=" ",l.other.skin+="1"==e.type?"layui-skin-warning":"layui-skin-primary",i.push("<h3>",e.title,"</h3>"),i.push("<div class=\"ind-msg-cont\">",e.msg,"</div>"),cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),i.join(""),top,l)},msg_fn2:function(e,a){function i(a){var l=[];return $.each(e,function(e,i){return-1!==$.inArray(i.id,a)||void(l.push("<div class=\"cus-msg-item clearfix\" data-itemid=\"",i.id,"\">"),l.push("<div class=\"cus-msg-lbox\">"),l.push("<i class=\"glyphicon ","1"==i.type?"glyphicon-bell":"glyphicon-bullhorn","\"></i>"),l.push("</div>"),l.push("<div class=\"cus-msg-rbox\">"),l.push("<h3>",i.title,"</h3>"),"1.0"==COM_DEFAULT._isOpenNotice.version&&l.push("<div class=\"msg-cont201103\">",i.msg,"</div>"),l.push("<div class=\"t-btn-box clearfix\">"),l.push("<span class=\"t-time pull-left\">",i.date,"</span>"),l.push("</div></div></div>"))}),l}function l(){var e=[];return o.find(".cus-msg-item").each(function(){e.push($(this).data("itemid"))}),e}if("array"!=$.type(e))return!1;if(!e.length)return!1;var a=a||{},s={type:1,area:["300px","auto"],other:{offset:"rb",cusOffsetLeft:-20,shade:0,skin:"layui-skin-msg layui-skin-primary",move:!1,maxHeight:280,id:"cus_msg_wid_0",btnAlign:"c",btnStyleArr:["btn-primary"],btn:["\u5168\u90E8\u5DF2\u8BFB","\u67E5\u770B\u5168\u90E8"],btn2:function(e){return cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),COM_DEFAULT._isOpenNotice.infoListUrl,top,{ismax:!0}),cumCloseWin(e,!0,top),!1}},success:function(e,a){$.mCustomScrollbar&&e.find(".cus-msg-overflow").mCustomScrollbar({theme:"minimal-dark"}),e.find(".cus-msg-contbox").on("click",".cus-msg-item",function(){var e=$(this);cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),COM_DEFAULT._isOpenNotice.infoPageUrl+"?id="+$(this).data("itemid"),top,{ismax:!0,success:function(){0==e.siblings().length?cumCloseWin(a,!0,top):e.remove()}})})},end:function(){var e=l();COM_DEFAULT._isOpenNotice.seturl&&0<e.length&&$.ajax({type:"get",url:COM_DEFAULT._isOpenNotice.seturl,data:{id:e.join(",")},async:!0,cache:!1,timeout:3e3,dataType:"json",success:function(){o=$(!1)}})}};$.extend(!0,s,a);var n=s.other.id,o=$("#"+n);if(!o.length)cumCurWinModal(TEDU_MESSAGE.get("platform.plugin.com_msg.message_notice"),"<div class=\"cus-msg-overflow\"><div class=\"cus-msg-contbox\">"+i().join("")+"</div></div>",top,s),o=$("#"+n);else{var r=i(l());if(0<r.length){o.find(".cus-msg-contbox").append(r.join(""));var c=o.parent(".layui-layer");c.length&&cumResizeWin(c.attr("times"),top)}}},panel:{makePanelStyle:function(){var e={styleCache:{}};e.addStyle=function(i,l){if(!i||!l)return!1;var s={};$.each(l,function(e,l){var n=a[e];if(n){var o=n.classAttr(l),r=n.className.replace(/\.cus-panel( |$)/g,".cus-panel[data-itemid=\""+i+"\"] ");o&&(s[r]?$.extend(!0,s[r],o):s[r]=o)}}),e.styleCache[i]=s},e.getStyle=function(){return e.styleCache},e.formatStyle=function(){var a=[],i="\n";return $.each(e.styleCache,function(e,l){$.each(l,function(e,l){var s="";$.each(l,function(e,a){s+=e+":"+a+";"+i}),a.push(e+"{"+i+s+"}")})}),a.join(i)||""},e.useStyle=function(){var a=$("#cuspanel_stylebox");a.length||(a=$("<style type=\"text/css\" id=\"cuspanel_stylebox\"></style>").appendTo("head")),a.html(e.formatStyle())};var a={panelBorder:{className:".cus-panel",classAttr:function(e){return $.isNumeric(e)?{"border-width":parseInt(e)+"px"}:!!e&&{border:e}}},height:{className:".cus-panel > .cus-panel-body",classAttr:function(e){return $.isNumeric(e)?{height:e+"px"}:!!e&&{height:e}}},headHidden:{className:".cus-panel > .cus-panel-heading",classAttr:function(e){return!("true"!=e)&&{display:"none"}}},headBorder:{className:".cus-panel > .cus-panel-heading",classAttr:function(e){return $.isNumeric(e)?{"border-bottom-width":parseInt(e)+"px"}:!!e&&{"border-bottom":e}}}};return e},add_one_panel:function(e,a,i){var l=[];l.push("<div class=\"cus-panel ",e.skin&&e.skin.className?e.skin.className:"cus-panel-default","\" data-itemid=\"",e.id,"\" data-iframesrc=\"",e.url,"\">"),l.push("<div class=\"cus-panel-heading\"><span class=\"cus-panel-title\">",e.name,"</span>"),l.push("<div class=\"cus-panel-btn-box\"></div></div>"),l.push("<div class=\"cus-panel-body\"><p class=\"panel-no-permission\"><i class=\"glyphicon glyphicon-exclamation-sign\"></i><span>\u60A8\u8FD8\u6CA1\u6709[",e.name,"]\u6A21\u5757\u7684\u8BBF\u95EE\u6743\u9650\uFF01</span></p></div></div>"),"makeAndCache"==i||"makeOne"==i?(("makeAndCache"==i?a.find("#"+e.parent):a).children(".cus-col-box").append(COM_TOOLS._model.panel.model_wrap(l.join(""),e.id,e.modelid,e.parent,3).data("skin",e.skin)),"makeOne"==i&&$(".cus-panel[data-itemid=\""+e.id+"\"]").cuspanel()):"onlyShow"==i&&a.find("#"+e.parent).append(l.join(""))},model_wrap:function(e,a,i,l,s){var n=$("<div class=\"js-model-item\" data-wrapitem_id=\""+a+"\"  data-model_id=\""+i+"\" data-parent_id=\""+l+"\" data-model_type=\""+s+"\"><div class=\"js-code-box\"></div><div class=\"js-btn-box\">"+(1==s?"":"<span class=\"label label-info js-evt-btnbar\" data-active=\"config\"><i class=\"glyphicon glyphicon-cog\"></i>\u8BBE\u7F6E</span>")+"<span class=\"label label-danger js-evt-btnbar\" data-active=\"del\"><i class=\"glyphicon glyphicon-remove\"></i>\u5220\u9664</span><span class=\"label label-warning js-evt-btnbar\" data-active=\"move\"><i class=\"glyphicon glyphicon-move\"></i>\u62D6\u52A8</span></div></div>");return n.children(".js-code-box").html(e),n}},orgModel:function(e,a,i){var l="string"==$.type(a)?$("#"+a):a,s="string"==$.type(e)?$("#"+e):e;if(0==s.length||0==l.length||s.data("orgmodel"))return!1;var n=COM_TOOLS._model._orgModel_(i),o=n._initSelBox(l);s.click(function(){n._openModel(JSON.parse($.trim(l.val())||"[]"),function(e,a){n._updateSelItem(a,o),l.val(JSON.stringify(e))})}),s.data("orgmodel","inited")},_orgModel_:function(e){var a={};e="object"==$.type(e)?e:{};var l={tree_url:COM_DEFAULT._orgTreeOpt.treeUrl,search_url:COM_DEFAULT._orgTreeOpt.searchUrl,type:"1",only_sel_people:!1,cb:null,max_num:-1};return $.extend(!0,l,e),a._openModel=function(e,a){function s(e){var a="1"==e.dtype?"glyphicon glyphicon-user":"glyphicon glyphicon-folder-close";return $("<div title=\""+e.path+"\" data-id_=\""+e.id+"\" class=\"item-xxw1121 "+("0"==e.hasauth?"nohasauth":"0"==e.dtype&&"2"==e.isexternal?"this-outer-org":"")+" clearfix\"><span class=\"iconx\"><i class=\""+a+"\"></i></span><span class=\"name-xxw\">"+e.text+"</span><span class=\"pull-right del-node-xxw\"><i class=\"glyphicon glyphicon-remove\"></i></span></div>").data(e)}function i(){d.jstree({checkbox:{visible:!1,three_state:!1},core:{themes:{dots:!1},dblclick_toggle:!1,check_callback:!0,data:{url:l.tree_url,data:function(e){return{parentId:e.id,type:l.type}},dataFilter:function(a){COM_TOOLS._ajax_jumpToLogin(a);var i=$.parseJSON(a);return $.each(i,function(a,i){var s={};i.type+="",i.dtype=i.type,"0"==i.type&&"2"==i.isexternal&&(i.type="2"),s.disabled=0==i.hasauth,!0===l.only_sel_people&&"1"==l.type&&"1"!=i.type&&(s.disabled=!0),$.each(e,function(e,a){if(i.code===a.code)return s.selected=!0,!1}),i.state=s}),JSON.stringify(i)}}},types:{1:{icon:"glyphicon glyphicon-user"},0:{icon:"glyphicon glyphicon-folder-close"},2:{icon:"glyphicon glyphicon-folder-close this-outer-org"}},plugins:["checkbox","types","wholerow"]}).on("ready.jstree",function(){if(n=$(this).jstree(!0),n.get_node(0)){var e=n.get_node(0).children[0];e&&n.open_node(e)}}).on("load_node.jstree",function(){}).on("changed.jstree",function(a,i){var l=$(this).jstree(!0);if("deselect_node"==i.action||"select_node"==i.action){var n=i.node;if(l.is_selected(n.id)){var o={};$.extend(!0,o,n.original),c.append(s(o)),e.push(o)}else c.find(".item-xxw1121[data-id_="+n.id+"] .del-node-xxw").trigger("click")}})}e=e||[];var n,o=COM_TOOLS.get_UID("orgjtree_"),r=$("<div style=\"display: none;\" class=\"cus-orgjtree-wrap\" id=\""+o+"\"><div class=\"select-treelist-xxw\"><div class=\"clearfix\"><div class=\"left-cont pull-left\"><div class=\"search-box-xxw form-inline\"><i class=\"glyphicon glyphicon-search icon1\"></i><input type=\"text\" class=\"form-control input-sm js-orgtree-searchbtn\" placeholder=\"\u641C\u7D22\uFF1A\u540D\u79F0\u3001\u62FC\u97F3\u3001\u90AE\u7BB1\"><i class=\"glyphicon glyphicon-remove-circle icon2 js-delinp\"></i></div><div class=\"tree-cont js-tree-cont-xxw\"><div class=\"js-orgtree-box\"></div></div></div><div class=\"right-cont pull-left\"><div class=\"tit\">\u5DF2\u9009\u90E8\u95E8\u3001\u6210\u5458</div><div class=\"sel-boxpar-xxw\"><div class=\"sel-box-xxw\"></div></div></div><div class=\"search-list-xxw\"><div class=\"search-cont\"></div></div></div><div class=\"btn-box-xxw clearfix\"><div class=\"pull-left t-org-style\"><i class=\"glyphicon glyphicon-info-sign\"></i> <span>\u5185\u90E8\u7EC4\u7EC7\uFF08<i class=\"glyphicon glyphicon-folder-close\"></i>\uFF09</span><span>\u5916\u90E8\u7EC4\u7EC7\uFF08<i class=\"glyphicon glyphicon-folder-close this-outer-org\"></i>\uFF09</span></div><div class=\"pull-right\"><button type=\"button\" class=\"btn btn-success btn-sm js-submitbtn\" style=\"margin-right: 20px;\">\u786E\u8BA4</button><button type=\"button\" class=\"btn btn-sm btn-default js-canelbtn\">\u53D6\u6D88</button></div></div></div></div>"),c=r.find(".sel-box-xxw"),d=r.find(".js-orgtree-box"),p=r.find(".js-orgtree-searchbtn"),u=r.find(".js-submitbtn"),m=r.find(".js-canelbtn");cumCheckPwin(parent).$("body").append(r);var g=cumParentWinModal("\u8BBE\u7F6E\u8303\u56F4",r,{type:1,ismax:!1,area:["640px","530px"],end:function(){r.remove()},success:function(){p.val(""),c.html(""),d.jstree(!0)||i(),0<e.length&&COM_TOOLS.ajaxFn({url:COM_DEFAULT._orgTreeOpt.getDataUrl,type:"post",data:{param:JSON.stringify(e)},success:function(a){if(a&&1==a.code){var i=a.data;e=i,$.each(i,function(e,a){a.dtype=a.type,c.append(s(a))})}}})}});r.on("click",".del-node-xxw",function(){var a=$(this).closest(".item-xxw1121"),l=a.data("id_"),s=-1;$.each(e,function(e,a){if(a.id==l)return s=e,!1}),0<=s&&e.splice(s,1),a.remove(),n.get_node(l)&&n.deselect_node(l,!0)}),r.on("click",".js-search-item",function(){var e=$(this),a=e.data("id");0<!c.find(".item-xxw1121[data-id_="+a+"]").length&&(c.append(s(e.data()||{})),n.get_node(a)&&n.select_node(a,!0,!1)),r.find(".search-list-xxw").hide(),p.val("")}),p.keypress(function(a){if(13==a.keyCode){var e=$.trim($(this).val());1<=e.length&&$.get(l.search_url,{keyword:e,type:l.type},function(e){if(e){var a="";e.person&&0<e.person.length&&(a+="<div class=\"search-list-box\"><div class=\"tit\">\u4EBA\u5458</div><div class=\"cont js-person\">",$.each(e.person,function(e,i){a+="<p class=\"search-item clearfix js-search-item\" title=\""+i.path+"\" data-code=\""+i.code+"\" data-path=\""+i.path+"\" data-isexternal=\""+i.isexternal+"\" data-dtype=\""+i.type+"\" data-text=\""+i.text+"\" data-id=\""+i.id+"\"><span>"+i.text+"</span><span class=\"pull-right\">"+i.department+"</span></p>"}),a+="</div></div>"),e.department&&0<e.department.length&&(a+="<div class=\"search-list-box\"><div class=\"tit\">\u90E8\u95E8</div><div class=\"cont\">",$.each(e.department,function(e,i){a+="<p class=\"search-item clearfix js-search-item "+("2"==i.isexternal?"this-outer-org":"")+"\" title=\""+i.path+"\" data-code=\""+i.code+"\" data-path=\""+i.path+"\" data-isexternal=\""+i.isexternal+"\" data-dtype=\""+i.type+"\" data-text=\""+i.text+"\" data-id=\""+i.id+"\"><i class=\"iconx  glyphicon glyphicon-folder-close\"></i><span>"+i.text+"</span></p>"}),a+="</div></div>"),a?r.find(".search-cont").html(a):r.find(".search-cont").html("<div class=\"tit\">\u65E0\u7ED3\u679C</div>"),r.find(".search-list-xxw").show()}})}}),u.click(function(){var e=[],i=[];return c.find(".item-xxw1121").each(function(){var a=$(this).data();e.push({code:a.code,type:a.dtype}),i.push({code:a.code,type:a.dtype,path:a.path,isexternal:a.isexternal,text:a.text})}),0<l.max_num&&e.length>l.max_num?(cumCheckPwin(parent).COM_TOOLS.alert("\u6700\u591A\u9009\u62E9"+l.max_num+"\u4E2A"),!1):void("function"==$.type(l.cb)&&l.cb(e),"function"==$.type(a)&&a(e,i),cumCloseWin(g,!1,parent))}),m.click(function(){cumCloseWin(g,!1,parent)}),r.find(".js-delinp").click(function(){p.val(""),r.find(".search-list-xxw").hide()})},a._makeSelWrap=function(){return $("<div class=\"orgtree-selectedlist-box\"><ul class=\"orgtree-item-list clearfix\"></ul></div>")},a._updateSelItem=function(e,a){if(0==a.length)return!1;var l="";$.each(e,function(e,a){l+="<li class=\"orgtree-item "+("0"==a.type&&"2"==a.isexternal?"this-outer-org":"")+"\" data-code=\""+a.code+"\" data-type=\""+a.type+"\""+(a.path?"title=\""+a.path+"\"":"")+"><i class=\"the-icon glyphicon "+("1"==a.type?"glyphicon-user":"glyphicon-folder-close")+"\"></i>"+a.text+"</li>"}),a.find(".orgtree-item-list").html(l)},a._getFormatData=function(e,a){e.length&&COM_TOOLS.ajaxFn({url:COM_DEFAULT._orgTreeOpt.getDataUrl,type:"post",data:{param:JSON.stringify(e)},success:function(e){e&&1==e.code&&a(e.data)}})},a._initSelBox=function(e){var i=$();if(e.length){i=a._makeSelWrap(),e.before(i).addClass("hidden");var l=JSON.parse($.trim(e.val())||"[]");a._getFormatData(l,function(e){a._updateSelItem(e,i)})}return i},a}}},COM_DEFAULT={_debug:!1,_customMenus:6,_tabSingle:3,_contextPath:"",_tabHomePage:"index_default.html",_404Page:"404.html",_helpPage:"help.html",_language:"zh-CN",_isOpenHelpMsg:{helpBtn:!0,helpMsgTips:!0,helpMsgDefVal:!0},_isOpenNotice:{geturl:"",seturl:"",infoPageUrl:"help.html",infoListUrl:"",isDisplay:!1,delayTime:5,requestTime:300,isNew:!0,version:"1.0",showMsg:0,showWait:0,showNotice:0,showRbnotice:0,appKey:"",getNewurl:"",processListUrl:"",rongcoudflag:"0"},_modelI18nOpt:{geturl:"",seturl:""},_isOpenSwitch:!0,_dataTableOpt:{scrollX:!0,paging:!0,pageLength:11,lengthChange:!1,ordering:!1,searching:!1,serverSide:!0,processing:!0},_dateTimePickerOpt:{minView:2,todayBtn:!0,autoclose:!0,pickerPosition:"bottom-left",clearBtn:!0,forceParse:!1},_dateRangePickerOpt:{opens:"left",singleDatePicker:!0,showDropdowns:!1,minYear:new Date(new Date().setFullYear(new Date().getFullYear()-5)).getFullYear(),maxYear:new Date(new Date().setFullYear(new Date().getFullYear()+5)).getFullYear(),timePicker:!1,timePickerIncrement:5,timePicker24Hour:!0,autoUpdateInput:!1,linkedCalendars:!0},_jsTreeOpt:{root:"0"},_fileServeOpt:{fileUploadUrl:"",defaultFileSize:40960,imgFileSize:10240,fileType:["doc","docx","xls","xlsx","ppt","pptx","txt","pdf","jpg","jpeg","png","gif","rar","zip"],imgType:["jpg","jpeg","png","gif"]},_orgTreeOpt:{treeUrl:"",searchUrl:"",getDataUrl:""},_forcedExit:{time:"-1",ajaxForm:!1}};(function(){if(window.cus_default_&&"object"==$.type(window.cus_default_))$.extend(!0,COM_DEFAULT,window.cus_default_),COM_TOOLS.localStorageSupport()&&COM_TOOLS.save_toLocal("cus_default",window.cus_default_);else if(COM_TOOLS.localStorageSupport()){var e={},a=COM_TOOLS.get_fromLocal("cus_default");if(a){try{e=$.parseJSON(a)}catch(a){console.error("\u4FEE\u6539\u9ED8\u8BA4\u914D\u7F6E\u53C2\u6570\u51FA\u9519\uFF01")}$.extend(!0,COM_DEFAULT,e)}}$.ajaxSetup({dataFilter:function(e){return COM_TOOLS._ajax_jumpToLogin(e),e}})})(),COM_TOOLS.initjSDefaultOpt("ALL"),$(function(){COM_DEFAULT._isOpenHelpMsg.helpBtn&&$(document).on("click",".js-helpbtn",function(a){var e=$(this),i=e.data("helpbtn");if(e.is("#js_cushelpbtn")&&(i="#"+($("#t_tabBox > li.active > a").data("itemid")||"")),i)e.attr({href:/^#\w+/.test(i)?COM_DEFAULT._helpPage+i.replace(/^#{1}/,"#help_"):i,target:"cushelppage"});else return!1;a.stopPropagation()}),COM_DEFAULT._isOpenHelpMsg.helpMsgTips&&$(document).delayPopover({selector:".js-helpmsg[data-titlemsg=\"true\"],.js-helpmsg:not(:text)",placement:"auto",trigger:"hover",html:!0,container:"body",content:function(){var e=$(this).data("helpdata");return e=e?e.toString().split(","):[],TEDU_MESSAGE.get($(this).data("helpmsg"),e)}}),COM_TOOLS.fnInitInputHelpVal()});